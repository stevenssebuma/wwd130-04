(()=>{"use strict";var e={21208:(e,t,n)=>{var o=n(16550),r=n(20745),a=n(86706),i=n(23810),s=n(35404),l=n(35262);const c=(e,t)=>{let n=e.pathname!==window.location.pathname,o=e.search!==window.location.search;(n||o)&&document.dispatchEvent(new CustomEvent("analyticsroutechange"))},d=[e=>{e._beforeThunks=[],e.before=t=>{e._beforeThunks.push(t)},e.block(((t,n)=>{e._beforeThunks.forEach((e=>e(t,n)))}))},e=>{e.before((()=>{let t=(0,l.c)();sessionStorage.setItem(e.location.key,t)})),e.listen((()=>{let t=(0,l.w)(),n=sessionStorage.getItem(e.location.key);t&&null!=n&&(t.scrollTop=n)}))}];var u=n(84639),h=n(67294),p=n(64593),f=n(85455),g=n(76540),m=n(76484);const v="app-oo7_W",y="panelOpen-bqPDf";var S=n(61027),E=n(6267),b=n(63927),I=n(62972);const T=e=>{let{children:t}=e;return t};var w=n(73935);const O="toaster-RYVLT",_="show-SudTV";var N=n(94184),k=n.n(N),P=n(70426),C=n(18511),j=n(85893);const A={saved:{type:"Success",messageKey:"annotationSavedToastMessage",aria:{role:"status","aria-live":"polite","aria-atomic":"true"}},"annotation-moved":{type:"Success",messageKey:"annotationMovedToastMessage",aria:{role:"status","aria-live":"polite","aria-atomic":"true"}},"failed-to-save":{type:"Error",messageKey:"failedToSaveToastMessage",aria:{role:"alert","aria-live":"assertive","aria-atomic":"true"}},"annotations-out-of-service":{type:"Error",messageKey:"annotationsOutOfServiceText",aria:{role:"alert","aria-live":"assertive","aria-atomic":"true"}},error:{type:"Error",messageKey:"genericErrorToastMessage",aria:{role:"alert","aria-live":"assertive","aria-atomic":"true"}},"link-already-exists":{type:"Warn",messageKey:"linkAlreadyExistsToastMessage",aria:{role:"alert","aria-live":"assertive","aria-atomic":"true"}},"url-copied":{type:"Success",messageKey:"urlCopiedToastMessage",aria:{role:"status","aria-live":"polite","aria-atomic":"true"}}},L=e=>{var t,n;let{type:o="Info",handleClose:r,selectI18nStringById:a,customMessage:i=""}=e;i=a(null===(t=A[o])||void 0===t?void 0:t.messageKey)||i,o=(null===(n=A[o])||void 0===n?void 0:n.type)||o;const s=P[o];return"logged-off"===o?(0,j.jsx)(C.H,{handleClose:r}):(0,j.jsx)(s,{onClose:r,children:i})},x=e=>{var t;let{type:n,autoHideDuration:o=6e3,onCloseCallback:r=(()=>{}),disableAutoHide:i=!1,show:s=!1,customMessage:l}=e;const c=(0,h.useRef)(null),d=(0,a.I0)(),u=()=>d((0,S.dismissToast)());let p=(0,a.v9)(E.I3);const[f,g]=(0,h.useState)(!0);(0,h.useEffect)((()=>{c.current=document.getElementById("portalRoot")}),[]),(0,h.useEffect)((()=>{if(s&&g(!1),s&&!i){const e=setTimeout((()=>{u(),setTimeout((()=>r()),250)}),o);return()=>clearTimeout(e)}}),[s,i]);return c.current&&w.createPortal((0,j.jsx)("div",{onTransitionEnd:e=>{g(!s)},className:k()(O,s&&_),...null===(t=A[n])||void 0===t?void 0:t.aria,children:(s||!f)&&(0,j.jsx)(L,{handleClose:()=>{document.activeElement.blur(),u()},selectI18nStringById:p,type:n,customMessage:l})}),c.current)};var D=n(38901);const $="lowServiceBanner-cmFJR";var R=n(39587);const H="banner-o5VpE",U="basic-TWZ29";var F=n(9241);const M=e=>{let{className:t,...n}=e;return(0,j.jsx)(F.Z,{className:k()(H,U,t),...n})};var B=n(33724),V=n(1577);const Z=e=>{let{onClose:t,props:n}=e;const o=(0,a.v9)(E.I3),r=(0,a.I0)();return(0,j.jsx)(M,{action:(0,j.jsx)(R.kq,{onClick:()=>{r((0,B.setVideoPreferences)(!0)),r((0,B.setImagePreferences)(!0)),r((0,S.triggerNotification)("trigger-optimize-settings-notification")),V.Z.fireSettingsEvent({component:{info:{location:"banner",name:"disable images, disable videos"},category:{type:"low bandwidth"}}}),t()},small:!0,children:o("lowServiceBannerButton")}),className:$,description:o("lowServiceBannerMesssage"),onClose:t,...n})},W="hideFeedbackButton-oWvCg";var J=n(60152);const G=e=>{let{className:t,I18nStringById:n,usabillaId:o}=e;const r=(0,h.useRef)(null),[a,i]=(0,h.useState)(!1),s=(0,J.P)((()=>{let e=document.querySelector("#Error"),t=document.querySelector("#header-wrapper").getBoundingClientRect(),n=t.y+20;e||(t.height+n>0?i(!1):t.height+n<=0&&i(!0))}),500);return(0,h.useEffect)((()=>{var e,t,n,o;a?null===(e=r.current)||void 0===e||null===(t=e.classList)||void 0===t||t.add(W):null===(n=r.current)||void 0===n||null===(o=n.classList)||void 0===o||o.remove(W)}),[a]),(0,h.useEffect)((()=>{var e,n;return null===(e=r.current)||void 0===e||null===(n=e.classList)||void 0===n||n.add(t),()=>{var e,n;return null===(e=r.current)||void 0===e||null===(n=e.classList)||void 0===n?void 0:n.remove(t)}}),[t]),(0,b.nw)((()=>{window.addEventListener("scroll",s);const e=new MutationObserver((o=>{o.forEach((o=>{if("childList"===o.type&&(r.current=document.querySelector(".usabilla_live_button_container"),r.current)){const o=r.current.querySelector("iframe"),a=o.contentWindow.document.querySelector("img");r.current.classList.add(t),r.current.setAttribute("aria-label",n("feedbackButton")),o.title=n("feedbackButton"),a.alt=n("feedbackButton"),e.disconnect()}}))}));return e.observe(document.body,{childList:!0}),()=>{var t;e.disconnect(),null===(t=r.current)||void 0===t||t.remove(),window.lightningjs=void 0}})),(0,j.jsx)(p.Z,{children:(0,j.jsx)("script",{children:`window.lightningjs||function(c){function g(b,d){d&&(d+=(/\\?/.test(d)?"&":"?")+"lv=1");c[b]||function(){var i=window,h=document,j=b,g=h.location.protocol,l="load",k=0;(function(){function b(){a.P(l);a.w=1;c[j]("_load")}c[j]=function(){function m(){m.id=e;return c[j].apply(m,arguments)}var b,e=++k;b=this&&this!=i?this.id||0:0;(a.s=a.s||[]).push([e,b,arguments]);m.then=function(b,c,h){var d=a.fh[e]=a.fh[e]||[],j=a.eh[e]=a.eh[e]||[],f=a.ph[e]=a.ph[e]||[];b&&d.push(b);c&&j.push(c);h&&f.push(h);return m};return m};var a=c[j]._={};a.fh={};a.eh={};a.ph={};a.l=d?d.replace(/^\\/\\//,(g=="https:"?g:"http:")+"//"):d;a.p={0:+new Date};a.P=function(b){a.p[b]=new Date-a.p[0]};a.w&&b();i.addEventListener?i.addEventListener(l,b,!1):i.attachEvent("on"+l,b);var q=function(){function b(){return["<head></head><",c,' onload="var d=',n,";d.getElementsByTagName('head')[0].",d,"(d.",g,"('script')).",i,"='",a.l,"'\\"></",c,">"].join("")}var c="body",e=h[c];if(!e)return setTimeout(q,100);a.P(1);var d="appendChild",g="createElement",i="src",k=h[g]("div"),l=k[d](h[g]("div")),f=h[g]("iframe"),n="document",p;k.style.display="none";e.insertBefore(k,e.firstChild).id=o+"-"+j;f.frameBorder="0";f.id=o+"-frame-"+j;/MSIE[ ]+6/.test(navigator.userAgent)&&(f[i]="javascript:false");f.allowTransparency="true";l[d](f);try{f.contentWindow[n].open()}catch(s){a.domain=h.domain,p="javascript:var d="+n+".open();d.domain='"+h.domain+"';",f[i]=p+"void(0);"}try{var r=f.contentWindow[n];r.write(b());r.close()}catch(t){f[i]=p+'d.write("'+b().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};a.l&&setTimeout(q,0)})()}();c[b].lv="1";return c[b]}var o="lightningjs",k=window[o]=g(o);k.require=g;k.modules=c}({});window.usabilla_live = lightningjs.require("usabilla_live", "//w.usabilla.com/${o}.js");`})})},{APP_URL:K,LOW_BANDWIDTH_THRESHOLD:q}=(0,u.U2)(),Y=e=>{let{bookUri:t,children:n,fireLocationChange:r,libraryUri:i,toast:s}=e;const l=(0,o.TH)(),c=(0,a.I0)(),d=(0,a.v9)(E.Z2),u=(0,a.v9)(E.vQ),p=(0,a.v9)(E.I3),f=()=>c((0,S.showLowServiceBanner)());return(0,b.nw)((()=>{const e=window.performance.getEntriesByType("navigation"),[t]=e;let n;const o=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection;if(o){const e=o.effectiveType;"4g"!==e&&"3g"!==e&&f()}else{if(t)n=t.domInteractive;else{const e=window.performance.timing;n=e.domInteractive-e.requestStart}n>q&&f()}})),(0,b.nw)((()=>{const e=e=>{"checkLogin"===e.data&&c((0,D.fo)(!0))};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)})),(0,h.useEffect)((()=>{(0,I.z)(i,t,p)}),[i,t,p]),(0,h.useEffect)((()=>{window.platformConfig.headerConfig.returnUri=window.location.href,window.platformConfig.headerConfig.signInServiceUrl=`${K}/login?redirect_uri=${window.location.href}`,window.platformConfig.headerConfig.signOutServiceUrl=`${K}/logout?redirect_uri=${window.location.href}`,document.dispatchEvent(new CustomEvent("checkcontext")),r(l)}),[l]),(0,b.nw)((()=>{const e=new MutationObserver((t=>{t.forEach((t=>{if("childList"===t.type){let t=document.head.querySelectorAll('meta[name="viewport"]');t.length>1&&(t.forEach((e=>{e.setAttribute("content","width=device-width, initial-scale=1, minimum-scale=1")})),e.disconnect())}}))}));return e.observe(document.head,{childList:!0}),()=>e.disconnect()})),(0,j.jsxs)("div",{className:v,children:[(0,j.jsxs)(T,{children:[(0,j.jsx)("main",{children:n}),(0,j.jsx)(G,{className:u?y:null,I18nStringById:p,usabillaId:"a097bb5f0578"})]}),(0,j.jsx)(x,{...s}),d&&(0,j.jsx)(Z,{onClose:()=>c((0,S.hideLowServiceBanner)())})]})};var z=n(85326);const{IPS_CDN_URL:Q}=(0,u.U2)(),X=(e,t)=>(n,o,r)=>{(o.linkTags||[]).forEach((t=>{t.rel.includes("stylesheet")&&t.addEventListener("load",(()=>e(t)),{once:!0})})),(r.linkTags||[]).forEach((e=>{"stylesheet"===e.rel&&t(e)}))},ee=e=>(0,h.createElement)("link",{...e,key:e.href,rel:"preload stylesheet",as:"style",type:"text/css",href:e.href}),te=(0,z.Z)((e=>{let{currentLinks:t=[],removeStyleSheet:n,styleSheetLoaded:o}=e;return(0,j.jsx)(p.q,{onChangeClientState:X(o,n),children:t.map(ee)})}));var ne=n(1262),oe=n(98306),re=n(16179);const ae=(0,a.$j)(((e,t)=>{let n=t.location,o=(0,E.uo)(e,n);return{defaultStyle:e.localSettings.defaultStyle,footnotesHidden:e.localSettings.footnotesHidden,showArchivedContent:e.localSettings.showArchivedContent,theme:e.localSettings.theme,location:n,lang:t.lang,bookUri:o.uri||""}}),{...B},((e,t,n)=>({...e,...t,...n,ownProps:n}))),ie=(0,a.$j)(((e,t)=>({...e.system})),{...S},((e,t,n)=>({...e,...t,...n})));var se=n(14791);const le=function(){let e=(0,se.qC)(...arguments);return t=>{const n=e((e=>{let{ownProps:n,origOwnProps:o,origRef:r,...a}=e;return(0,j.jsx)(t,{ref:r,...a,ownProps:o})}));return(0,h.forwardRef)(((e,t)=>(0,j.jsx)(n,{origRef:t,origOwnProps:e})))}}((e=>(0,o.EN)(ae(e))),ie)((e=>{let{updateSeenNotifications:t,setFontSansSerif:n,setFontSize:o,setFootnotesHidden:r,setImagePreferences:a,setPrintHighlights:i,setShowArchivedContent:s,setTheme:l,setVideoPreferences:c,updateDefaultHighlightStyle:d}=e;const u=(0,h.useRef)({});return(0,h.useEffect)((()=>{const e=e=>{i(e),e?document.body.classList.remove("print-hide-highlights"):document.body.classList.add("print-hide-highlights")},h=e=>{let t=JSON.parse(localStorage.getItem("fontSize"))??1,n=e;t!==n&&(n=t),n<.6||n>1.8||void 0===n||n===isNaN()?(n="1",o(n)):(n>.6||n<1.8)&&(n=n.toString(),o(n))},p=e=>{r(e),e?document.body.classList.replace("print-show-footnotes","print-hide-footnotes"):document.body.classList.replace("print-hide-footnotes","print-show-footnotes")};u.current=JSON.parse(localStorage.getItem("libraryLookup")||"{}");let f=JSON.parse(localStorage.getItem("fontSansSerif"))??!1,g=JSON.parse(localStorage.getItem("footnotesHidden"))??!1,m=JSON.parse(localStorage.getItem("fontSize"))??1,v=Number(m),y=JSON.parse(localStorage.getItem("printHighlights"))??!0,S=JSON.parse(localStorage.getItem("disableImages")),E=JSON.parse(localStorage.getItem("disableVideos")),b=JSON.parse(localStorage.getItem("highlightStyle")),I=JSON.parse(localStorage.getItem("showArchivedContent"))??!1,T=localStorage.getItem("theme")??"default",w=JSON.parse(localStorage.getItem("seenNotifications"))||[];document.body.classList.add("print-hide-footnotes"),p(g),e(y),S&&a(S),E&&c(E),b&&d(b),n(f),h(v),s(I),T&&l(T),w.length&&t(w);const O=o=>{switch(o.key){case"fontSansSerif":n(JSON.parse(o.newValue));break;case"fontSize":h(JSON.parse(o.newValue));break;case"footnotesHidden":p(JSON.parse(o.newValue));break;case"printHighlights":e(JSON.parse(o.newValue));break;case"disableImages":a(JSON.parse(o.newValue));break;case"disableVideos":c(JSON.parse(o.newValue));break;case"highlightStyle":d(JSON.parse(o.newValue));break;case"libraryLookup":u.current=JSON.parse(o.newValue);break;case"notifications":t(JSON.parse(o.newValue));break;case"showArchivedContent":s(JSON.parse(o.newValue));break;case"theme":l(JSON.parse(o.newValue))}};return window.addEventListener("storage",O),()=>window.removeEventListener("storage",O)}),[]),null}));var ce=n(6837),de=n(46712);const{APP_PATHNAME:ue}=(0,u.U2)(),he=(0,a.$j)(((e,t)=>{var n,o;let r=t.location,{lang:a}=(0,s.LM)(r.search),i=(0,E.uo)(e,r),l=(0,E.au)(e,r),c=(0,E.pW)(e,r),d=(0,E.sr)(e);return i=i.entries?i:{},l=l.content?l:{},c=c.loaded?c:{},{toast:d,bookTitle:i.title||"",bookUri:i.uri,breadCrumbs:c.breadCrumbs||[],contentTitle:(null===(n=l)||void 0===n||null===(o=n.meta)||void 0===o?void 0:o.title)||"",dir:e.system.dir,i18n:e.i18n,lang:a,location:r,libraryUri:c.uri||i.parenturiOverride||i.parentUri,system:e.system,selectI18nStringById:(0,E.I3)(e)}}),{asyncCheckLogin:D.fo,fireLocationChange:D.Ps,getI18nData:oe.Mx,saveBackedUpAnnotation:re.fr},((e,t,n)=>({...n,...e,...t})));class pe extends h.Component{static async updateInitialStore(e,t){let n=e.getState(),o=n.preview?"preview":void 0,r=e.dispatch,a={cookie:n.headers.cookie},i=(0,E.so)(n),s=[(0,oe.Mx)({lang:i,context:o},a),(0,S.getNotifications)({lang:i,context:o},a),(0,S.setVisibleNotifications)([])];"eng"!==i&&s.push((0,oe.Mx)({lang:"eng",context:o},a)),await Promise.all(s.map(r))}async componentDidMount(){const{asyncCheckLogin:e,getI18nData:t,i18n:n,lang:o}=this.props;window.navigator.platform.startsWith("Mac")&&document.body.classList.add("force-scrollbar"),document.elementsFromPoint||(document.elementsFromPoint=(e,t)=>{let n,o=[];do{n!==document.elementFromPoint(e,t)?(n=document.elementFromPoint(e,t),o.push(n),n.style.pointerEvents="none"):n=!1}while(n);return o.forEach((e=>e.style.pointerEvents="all")),o});if(await e()){const e=JSON.parse((0,ne.Kk)("unsavedAnnotations"));e&&e.length&&Promise.all(e.map((e=>this.props.saveBackedUpAnnotation(e))))}!n[o]&&t({lang:o})}render(){const{children:e,dir:t,lang:n,...r}=this.props;let a=n;try{a=(0,de.langToLangCode)(n)}catch(e){console.error(e)}return(0,j.jsx)(ce.hk,{lang:n,children:(0,j.jsxs)(Y,{...r,children:[(0,j.jsx)(le,{}),(0,j.jsxs)(p.q,{children:[(0,j.jsx)("html",{lang:a}),(0,j.jsx)("body",{dir:t}),(0,j.jsx)("link",{rel:"preload stylesheet",as:"style",type:"text/css",href:`https://foundry.churchofjesuschrist.org/Foundry/v1/Ensign:Sans:300@${a}/css`,media:"screen, print"}),(0,j.jsx)("link",{rel:"preload stylesheet",as:"style",type:"text/css",href:`https://foundry.churchofjesuschrist.org/Foundry/v1/Ensign:Serif:400@${a}/css`,media:"screen, print"}),(0,j.jsx)("link",{rel:"preload stylesheet",as:"style",type:"text/css",href:`https://foundry.churchofjesuschrist.org/Foundry/v1/Ensign:Sans:400@${a}/css`,media:"screen, print"}),(0,j.jsx)("link",{rel:"preload stylesheet",as:"style",type:"text/css",href:`https://foundry.churchofjesuschrist.org/Foundry/v1/Ensign:Sans:600@${a}/css`,media:"screen, print"}),(0,j.jsx)("link",{rel:"preload stylesheet",as:"style",type:"text/css",href:`https://foundry.churchofjesuschrist.org/Foundry/v1/Ensign:Sans:700@${a}/css`,media:"screen, print"}),(0,j.jsx)("link",{rel:"preload stylesheet",as:"style",type:"text/css",href:`https://foundry.churchofjesuschrist.org/Foundry/v1/Ensign:Sans:Italic:400@${a}/css`,media:"screen, print"}),(0,j.jsx)("link",{rel:"preload stylesheet",as:"style",type:"text/css",href:`https://foundry.churchofjesuschrist.org/Foundry/v1/Ensign:Sans:Italic:700@${a}/css`,media:"screen, print"})]}),(0,j.jsx)(te,{}),(0,j.jsxs)(o.rs,{children:[(0,j.jsx)(o.AW,{exact:!0,path:ue,component:f.Z}),(0,j.jsx)(o.AW,{exact:!0,path:`${ue}/notFound`,component:m.Z}),(0,j.jsx)(o.AW,{path:`${ue}/*`,component:g.Z}),(0,j.jsx)(o.AW,{path:"*",component:m.Z})]}),e]})})}}const fe=he((0,o.EN)(pe)),ge=()=>(0,j.jsx)(o.AW,{path:"*",component:fe});var me=n(53894),ve=n(76276),ye=n(37531),Se=n(39516),Ee=n(36976),be=n(33065);const{APP_PATHNAME:Ie}=(0,u.U2)(),Te=(e,t)=>Object.entries(e).filter((e=>{let[n,o]=e;return o.annotationId!==t})).reduce(Ee.qX,{}),we=(e,t)=>Object.values(e).filter((e=>e.annotationId===t)),Oe=(e,t)=>{let n=e.sort-t.sort;return n||(n=Date.parse(t.lastUpdated)-Date.parse(e.lastUpdated)),n},_e=e=>t=>t.annotationId===e,Ne=(e,t)=>{let n=(e.sort||0)-(t.sort||0);return n||(n=Date.parse(t.timestamp)-Date.parse(e.timestamp)),n},ke=(0,se.UY)({activeAnnotation:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;return t===Se.DP?n:e},activeSetId:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;return t===Se.WD?n:e},annotations:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:n=[]}=arguments.length>1?arguments[1]:void 0;switch(t){case Se._m:return n.reduce(((e,t)=>({...e,[t.id]:{...t,highlights:(0,Ee.yq)(t.id,t.highlights),refs:t.refs.map((e=>e.pid))}})),e);case Se.$C:return(0,Ee.Tv)(n.annotationId,e,{highlights:(0,Ee.yq)(n.annotationId,n.offsets),highlightUri:n.uri});case Se.HO:return{...e,[n.annotationId]:{...e[n.annotationId],setId:n.setId}};case Se.OF:{const t=e[n.annotationId],o=t.refs,r=t.refs.lastIndexOf(n.refId);return{...e,[t.id]:{...t,refs:o.slice(0,r).concat(o.slice(r+1))}}}case Se.jI:{const t=e[n.annotationId],o=t.refs;return{...e,[t.id]:{...t,refs:[...o,n.ref.pid]}}}case Se.jY:return n.reduce(((e,t)=>({...e,[t.id]:{...t,bookmark:void 0}})),e);case Se.E1:return(0,Ee.Tv)(n.annotationId,e,{docId:n.docId,lang:n.lang,uri:n.uri.split(".")[0]});case Se.Pk:{if(!e[n])return e;let{[n]:t,...o}=e;return o}case Se.gF:return n.some((t=>e[t]))?Object.entries(e).filter((e=>{let[t,o]=e;return!n.includes(t)})).reduce(Ee.qX,{}):e;case Se.Iy:return(0,Ee.Ym)(n.annotationId,e,"tags",n.tag);case Se.ji:return(0,Ee.wp)(n.annotationId,e,"tags",n.tagId);case Se.Sh:return(0,Ee.Ym)(n.annotationId,e,"folders",n.folder.id);case Se.$W:return(0,Ee.wp)(n.annotationId,e,"folders",n.folderId);case Se.Bv:return{...e,[n.annotationId]:(0,Ee.Tv)("note",e[n.annotationId],n.note)};default:return e}},bookmarkOrder:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{type:t,payload:n=[]}=arguments.length>1?arguments[1]:void 0;switch(t){case Se.jY:return n.map((e=>{let{id:t,bookmark:n,lastUpdated:o}=e;return{annotationId:t,sort:n.sort||0,lastUpdated:o}})).concat(e).filter(((e,t,n)=>{let{annotationId:o}=e;return n.findIndex(_e(o))===t})).sort(Oe);case Se.Pk:{let t=[...e];const o=t.findIndex(_e(n));return-1===o?e:(t.splice(o,1),t.map(((e,t)=>({...e,sort:t}))))}case Se.nF:return n.map((t=>{let[n,o]=t;return{...e.find(_e(n)),sort:o}})).concat(e).filter(((e,t,n)=>{let{annotationId:o}=e;return n.findIndex(_e(o))===t})).sort(Oe);default:return e}},bookmarks:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:n=[]}=arguments.length>1?arguments[1]:void 0;switch(t){case Se.jY:return n.reduce(((e,t)=>{let{id:n,bookmark:o,docId:r,lang:a}=t;return{...e,[n]:{...o,annotationId:n,docId:r,lang:a}}}),e);case Se.bg:case Se.E1:return(0,Ee.Tv)(n.annotationId,e,n);case Se.Pk:{if(!e[n])return e;const{[n]:t,...o}=e;return o}default:return e}},folders:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(t){case Se.Sh:return(0,Ee.Tv)(n.folder.id,e,{name:n.folder.name,id:n.folder.id});case Se.JF:return n.reduce(((e,t)=>({...e,[t.id]:t})),{});case Se.AL:return Object.entries(e).filter((e=>{let[t,o]=e;return!n.includes(t)})).reduce(Ee.qX,{});default:return e}},highlights:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:n=[]}=arguments.length>1?arguments[1]:void 0;switch(t){case Se._m:return n.reduce(((e,t)=>({...e,...t.highlights.reduce(((e,n,o)=>({...e,[(0,Ee.m8)(t.id,n.pid)]:{...n,annotationId:t.id,docId:t.docId,first:0===o,icon:0===o?(0,Ee.Nr)(t):void 0}})),{})})),e);case Se.Pk:return we(e,n).length?Te(e,n):e;case Se.$C:{let{clear:t,color:o,docId:r,icon:a,underline:i}=we(e,n.annotationId)[0]||{};return n.offsets.reduce(((e,s,l)=>(0,Ee.Tv)((0,Ee.m8)(n.annotationId,s.pid),e,{...s,annotationId:n.annotationId,clear:t,color:o,docId:r,first:0===l,icon:a,underline:i})),Te(e,n.annotationId))}case Se.wM:return Object.entries(e).map((e=>{let[t,o]=e;return o.annotationId===n.annotationId?[t,{...o,...(0,be.YU)(n.style)}]:[t,o]})).reduce(Ee.qX,{});case Se.Av:return(0,Ee.LM)(n.id,e,"icon",n.icon);default:return e}},initialized:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;return t===Se.I3?Object.assign({},e,n):e},refs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(t){case Se._m:return n.reduce(((e,t)=>t.refs.reduce(((e,t)=>Object.assign(e,{[t.pid]:{...t,href:`${Ie}${t.uri}`}})),e)),e);case Se.MB:case Se.jI:return(0,Ee.Tv)(n.ref.pid,e,{id:n.ref.pid,href:`${Ie}${n.ref.uri}`,...n.ref});default:return e}},setOrder:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{type:t,payload:n=[]}=arguments.length>1?arguments[1]:void 0;switch(t){case Se.On:return(e=>e.sort(Ne).map((e=>{let{id:t}=e;return t})))(n);case Se.WC:return e.filter((e=>e!==n));case Se.GC:return o=n,Object.entries(o).sort(((e,t)=>{let[n,o]=e,[r,a]=t;return o-a})).map((e=>{let[t]=e;return"null"===t?null:t}));default:return e}var o},sets:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{type:t,payload:n=[]}=arguments.length>1?arguments[1]:void 0;switch(t){case Se.On:return n;case Se.c6:{const t=[...e],o=t.findIndex((e=>{let{id:t}=e;return t===n.id}));return t[o]={...t[o],...n},t}case Se.WC:return e.filter((e=>e.id!==n));default:return e}},tags:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;return t===Se.PO?n.reduce(((e,t)=>({...e,[t.id]:t})),{}):e}});var Pe=n(20890);const Ce=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:n={}}=arguments.length>1?arguments[1]:void 0;return t===Pe.zn?{...e,...Object.values(n).reduce(((e,t)=>({...e,[t.uri]:{content:[],...t,referenceURI:(0,s.cp)((0,s.aq)(t.referenceURI)),uri:(0,s.cp)((0,s.aq)(t.uri))}})),{})}:e},je=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;return t===oe.hF?{...e,[n.lang]:n.resources}:e};var Ae=n(54350);const Le=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:n=[]}=arguments.length>1?arguments[1]:void 0;return t===Ae.vP?n:e};var xe=n(19113);const De=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:n,payload:o={},lang:r="eng"}=arguments.length>1?arguments[1]:void 0;return n===xe.mQ?(e=(0,Ee.nH)(o.uri||"",r),{...t,[e]:{...t[e],...o,loaded:!0}}):t},$e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{defaultStyle:{color:"yellow"},footnotesHidden:!1,printHighlights:!0,showArchivedContent:!1,theme:"default"},{type:t,payload:n={}}=arguments.length>1?arguments[1]:void 0;switch(t){case B.SET_FONT_SANS_SERIF:return{...e,fontSansSerif:n};case B.SET_FONT_SIZE:return{...e,fontSize:n};case B.SET_FOOTNOTES_HIDDEN:return{...e,footnotesHidden:n};case B.SET_PRINT_HIGHLIGHTS:return{...e,printHighlights:n};case B.SET_SHOW_ARCHIVED_CONTENT:return{...e,showArchivedContent:n};case B.SET_IMAGE_PREFERENCES:return{...e,disableImages:n};case B.SET_VIDEO_PREFERENCES:return{...e,disableVideos:n};case B.SET_HIGHLIGHT_STYLE:return{...e,defaultStyle:{color:"yellow",...n}};case B.SET_APP_THEME:return{...e,theme:n};default:return{...e}}},Re=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notifications:void 0,showLowServiceBanner:!1,toast:{show:!1,type:"default",disableAutoHide:!1},visibleNotifications:void 0},{type:t,payload:n={}}=arguments.length>1?arguments[1]:void 0;switch(t){case S.SHOW_TOAST:return{...e,toast:n};case S.HIDE_TOAST:return{...e,toast:{...e.toast,...n}};case S.SHOW_LOW_SERVICE_BANNER:return{...e,showLowServiceBanner:!0};case S.HIDE_LOW_SERVICE_BANNER:return{...e,showLowServiceBanner:!1};case S.SET_NOTIFICATIONS:return{...e,notifications:n};case S.SET_SEEN_NOTIFICATIONS:return{...e,seenNotifications:n};case S.SET_VISIBLE_NOTIFICATIONS:return{...e,visibleNotifications:n};default:return e}};var He=n(77046);const Ue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contentStore:{},bookStore:{}},{type:t,payload:n={},lang:o="eng"}=arguments.length>1?arguments[1]:void 0;switch(t){case He.RR:return{...e,bookStore:{...e.bookStore,...n}};case He.Oz:return{...e,contentStore:{...e.contentStore,...n}};case He.sl:return{...e,bookStore:Object.entries(e.bookStore).map((e=>{let[t,{parentNameOverride:n,parentUriOverride:o,...r}]=e;return[t,r]})).reduce(Ee.qX,{})};case He.Ly:return{...e,bookStore:{...e.bookStore,[n.bookKey]:{...e.bookStore[n.bookKey],parentNameOverride:n.parentNameOverride,parentUriOverride:n.parentUriOverride}}};default:return e}};var Fe=n(18327);const Me=function(){var e,t,n,o;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:a,payload:i={}}=arguments.length>1?arguments[1]:void 0;const s=r.currentKey;switch(a){case Fe.DV:return{...r,[s]:{...r[s],activePanel:i,activeSubPanel:null,floatingPanels:[],focusOnMount:!0}};case Fe.CL:return{...r,[s]:{...r[s],activeSubPanel:i,focusOnMount:!0}};case Fe._i:return{...r,[s]:{...r[s],floatingPanels:[...(null===(e=r[s])||void 0===e?void 0:e.floatingPanels)||[],i],focusOnMount:!0}};case Fe.c0:return{...r,[s]:{...r[s],floatingPanels:(null===(t=r[s])||void 0===t?void 0:t.floatingPanels.slice(0,-1))||[]}};case Fe.y5:return null!==(n=r[s])&&void 0!==n&&null!==(o=n.floatingPanels)&&void 0!==o&&o.some((e=>e.id===i))?{...r,[s]:{...r[s],floatingPanels:r[s].floatingPanels.filter((e=>e.id!==i))}}:r;case Fe.gd:return{...r,[s]:{...r[s],floatingPanels:[]}};case D.nk:{var l,c;const e=(0,Ee.yN)(i),t=Object.entries(r).map((e=>{let[t,n]=e;return[t,{...n,focusOnMount:!1}]})).reduce(Ee.qX,{}),n=t[r.currentKey]||{};return t.currentKey=e,t[e]={...n,activePanel:n.activePanel?n.activePanel:null!==(l=n.floatingPanels)&&void 0!==l&&l.length?"RelatedContentPanel":null,floatingPanels:(null===(c=t[e])||void 0===c?void 0:c.floatingPanels)||[]},t}default:return r}};var Be=n(23303);const Ve=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{styleSheets:{},loadedStyles:[]},{type:t,payload:n={}}=arguments.length>1?arguments[1]:void 0;switch(t){case Be.ADD_STYLE_SHEET:return!e.styleSheets[n.key]&&n.styleSheet.href?(0,Ee.LM)("styleSheets",e,n.key,n.styleSheet):e;case Be.REMOVE_STYLE_SHEET:return{...(0,Ee.ck)("styleSheets",e,n.key),loadedStyles:e.loadedStyles.filter((e=>e!==n.key))};case Be.RESET_STYLE_SHEETS:return{styleSheets:{},loadedStyles:[]};case Be.STYLE_SHEET_LOADED:return{...e,loadedStyles:[...e.loadedStyles,n.key]};default:return e}};var Ze=n(19476);const We=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cssRules:{},lang:"eng",loggedIn:!1,status:200},{type:t,payload:n={}}=arguments.length>1?arguments[1]:void 0;switch(t){case D.WT:return{...e,status:n};case D.TZ:return{...e,status:200};case D.AF:return n.lang!==e.lang?{...e,...n}:e;case D.nk:{let t=(0,s.LM)(n.search);return{...e,lang:t.lang,dir:(0,Ze.j)(t.lang)}}case D.yW:return n===e.loggedIn?e:{...e,loggedIn:n};case D.yN:return{...e,annotationsOutOfService:n};case D.zY:return{...e,cssRules:n};default:return e}},{ALLOW_REDUX_DEV_TOOLS:Je}=(0,u.U2)(),Ge=ve.ZP?(0,ye.lX)():(0,ye.PP)(),Ke=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{type:t,payload:n=[]}=arguments.length>1?arguments[1]:void 0;return e},qe=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};const Ye=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,n=ve.ZP&&window.__INITIAL_STATE__?JSON.parse((o=window.__INITIAL_STATE__,decodeURIComponent(atob(o).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))):e;var o;!n.preview&&delete n.preview;const r=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t={annotations:ke,coreContent:Ce,home:Le,i18n:je,library:De,localSettings:$e,notifications:Re,reader:Ue,sidePanel:Me,styles:Ve,system:We},n=(0,se.UY)(t),o=(0,se.UY)({preview:Ke,...t}),r=(0,se.UY)({preview:Ke,headers:qe,...t});return ve.ZP?e?o:n:r}(n.preview),a=(0,se.qC)((0,se.md)(me.Z),ve.ZP&&"1"===Je&&void 0!==window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():e=>e,t);return(0,se.MT)(r,n,a)}();function ze(){const e=window.BOOMR||{};if(e.version)return e.plugins&&e.plugins.History&&e.plugins.History.hook(Ge,!1),!0}Ge.replace((0,s.ob)(window.location.href)),ze()||(document.addEventListener?document.addEventListener("onBoomerangLoaded",ze):document.attachEvent&&document.attachEvent("onpropertychange",(function(e){(e=e||window.event)&&"onBoomerangLoaded"===e.propertyName&&ze()})));const Qe=window.BOOMR_config=window.BOOMR_config||{};Qe.autorun=!1,Qe.History={enabled:!0,auto:!1},(0,i.TA)((()=>{var e;e=Ge,d.forEach((t=>t(e))),Ge.before(c),(0,r.a)(document.getElementById("app"),(0,j.jsx)(a.zt,{store:Ye,children:(0,j.jsx)(o.F0,{history:Ge,children:(0,j.jsx)(ge,{})})}))}))},39516:(e,t,n)=>{n.d(t,{$:()=>Se,$C:()=>$,$W:()=>O,AL:()=>F,Av:()=>H,BK:()=>_e,Bv:()=>w,CC:()=>le,DH:()=>$e,DP:()=>N,Di:()=>Oe,Dl:()=>ne,E1:()=>j,GC:()=>J,G_:()=>Ee,HO:()=>T,I3:()=>k,Ih:()=>oe,Iy:()=>E,JF:()=>M,Jx:()=>Ae,KN:()=>ue,KQ:()=>me,L6:()=>Pe,MB:()=>U,NJ:()=>ke,NM:()=>De,OF:()=>D,On:()=>Z,PO:()=>B,Pk:()=>b,Qk:()=>se,Rl:()=>be,Sh:()=>S,WC:()=>V,WD:()=>G,_E:()=>ae,_U:()=>te,_Y:()=>de,_m:()=>L,bg:()=>A,c6:()=>W,cg:()=>ie,gF:()=>I,jI:()=>x,jY:()=>P,ji:()=>_,kB:()=>Le,kc:()=>we,ki:()=>xe,mf:()=>he,nF:()=>C,oE:()=>Te,oN:()=>ee,pc:()=>ye,tc:()=>re,uG:()=>K,w4:()=>Re,wM:()=>R,xh:()=>Ce,yc:()=>q});var o=n(36976),r=n(35404),a=n(33065),i=n(26247),s=n(5112),l=n(6267),c=n(61027),d=n(20890),u=n(50681),h=n(84639),p=n(33724),f=n(16179),g=n(1577);const m=(e,t)=>g.Z.fireStudyToolsEvent({component:{info:{name:e},category:{type:t}}}),{APP_URL:v,STUDY_NOTEBOOK_URL:y}=(0,h.U2)(),S="ADD_FOLDER",E="ADD_TAG",b="DELETE_ANNOTATION",I="DELETE_ANNOTATIONS",T="UPDATE_ANNOTATION_SET",w="UPDATE_NOTE",O="REMOVE_FOLDER",_="REMOVE_TAG",N="CHANGE_ACTIVE_ANNOTATION",k="INITIALIZE_ANNOTATIONS",P="ADD_BOOKMARKS",C="REORDER_BOOKMARKS",j="UPDATE_BOOKMARK_LOCATION",A="UPDATE_BOOKMARK_NAME",L="ADD_HIGHLIGHTS",x="ADD_REF",D="REMOVE_REF",$="UPDATE_HIGHLIGHT_OFFSETS",R="UPDATE_HIGHLIGHT_STYLE",H="UPDATE_HIGHLIGHT_ICON",U="UPDATE_REF",F="DELETE_FOLDERS",M="REPLACE_FOLDERS",B="REPLACE_TAGS",V="DELETE_SET",Z="REPLACE_SETS",W="UPDATE_SET",J="REORDER_SETS",G="CHANGE_ACTIVE_SET",K=e=>({type:N,payload:e}),q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{}],[t,n]=[e[0].uri,e.slice(-1)[0].uri];return t!==n&&n?`${t}-${n.split(".")[1]}`:t},Y=(e,t)=>{let{color:n,underline:o,clear:r}=t;return{type:R,payload:{annotationId:e,style:{color:n,underline:o,clear:r}}}},z=e=>({type:B,payload:e}),Q=e=>({type:M,payload:e}),X=e=>({type:G,payload:e}),ee=(e,t)=>async(n,o)=>{let r=o(),a=t?(0,l.W_)(r,t):(0,l.Bc)(r);!a.id||a.folders.includes(e.id)&&e.id||(e=await n(Pe(e)),n(((e,t)=>({type:S,payload:{annotationId:e,folder:t}}))(a.id,e)),n(pe(a.id)),i.oN(a.id,e.id).catch((e=>n((0,f.SW)(e,a.id)))))},te=(e,t)=>async(n,o)=>{let r=o(),a=t?(0,l.W_)(r,t):(0,l.Bc)(r);!a.id||a.tags.includes(e.id)&&e.id||(e=await n(Ne(e)),n(((e,t)=>({type:E,payload:{annotationId:e,tag:t}}))(a.id,e.id)),n(pe(a.id)),m("tag","create"),i._U(a.id,e.name).catch((e=>n((0,f.SW)(e,a.id)))))},ne=e=>async(t,n)=>{let o=n();e=e||(0,l.sJ)(o),(0,l.Ct)(o,e)?m("bookmark","delete"):m("mark","delete"),e&&(t(K(null)),t((e=>({type:b,payload:e}))(e)),i.Dl(e))},oe=(e,t)=>async(n,o)=>{let r=o();(t=t||(0,l.sJ)(r))&&(n(((e,t)=>({type:O,payload:{annotationId:e,folderId:t}}))(t,e)),n(pe(t)),await i.Ih(t,e).catch((e=>n((0,f.SW)(e,t)))))},re=(e,t)=>async(n,o)=>{let r=o();t=t||(0,l.sJ)(r);let a=(0,l.Iq)(r,e);t&&(n(((e,t)=>({type:_,payload:{annotationId:e,tagId:t}}))(t,e)),n(pe(t)),m("tag","delete"),await i.tc(t,a).catch((e=>n((0,f.SW)(e,t)))))},ae=e=>async(t,n)=>{(0,a.xb)(e.refs)||"reference"===e.type||(e.type="reference"),e=s.xW(e),t((e=>({type:"UPDATE_ANNOTATION",payload:e}))(e=await i._E(e))),t(("bookmark"!==e.type?ce:Ie)([e]))},ie=(e,t)=>async(n,o)=>{n(((e,t)=>({type:T,payload:{annotationId:e,setId:t}}))(e,t)),m("study set","update"),i.cg(e,t).then((e=>n((0,c.showToast)({type:"annotation-moved"})))).catch((t=>n((0,f.SW)(t,e))))},se=(e,t)=>async(n,o)=>{let r=o();(t=t||(0,l.sJ)(r))&&(n(((e,t)=>({type:w,payload:{annotationId:e,note:t}}))(t,e)),n(pe(t)),await i.Qk(t,e).catch((e=>n((0,f.SW)(e,t)))))},le=function(e,t){let{folders:n=[],note:r={},offsets:a=[],refs:c=[],style:h,tags:g=[]}=e,y=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return async(e,S)=>{const E=S(),b=q(a),I=(0,l.so)(E),T={...E.localSettings.defaultStyle,...h},w=(0,l.h0)(E),O=(0,l.fx)(E,t);let _={id:(0,u.Z)(),contentVersion:O,docId:(0,l.ke)(E,t),folders:n,highlights:a,highlightUri:b,lang:I,lastUpdated:(new Date).toISOString(),note:r,refs:c,setId:w,source:v,tags:g,type:c.length?"reference":"highlight"};return e((e=>({type:L,payload:[e]}))(_)),e(Y(_.id,T)),y&&e((0,p.updateDefaultHighlightStyle)(T)),e((0,d.i2)({uris:[(0,o.nH)(b,I)]})),m("mark","create"),_=(0,l.W_)(S(),_.id),i.ud(s.xW(_)).catch((t=>e((0,f.SW)(t,_.id)))),_.id}},ce=e=>async(t,n)=>{let r=n(),a=(0,l.so)(r),i=[],c=e.map((e=>{const t=e.highlights&&q(e.highlights);return i.push((0,o.nH)(t,a)),e.highlightUri=t,e.refs&&(i=i.concat(e.refs.map((e=>(0,o.nH)(e.uri,e.locale))))),s.Xu(e)}));t((0,d.i2)({uris:i})),t((e=>({type:L,payload:e}))(c))},de=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["highlight","reference"];return async(n,a)=>{e=(0,r.Qj)(e).split(".")[0];let s=a(),c=(0,l.so)(s),d=(0,l.ke)(s,(0,o.nH)(e,c)),u=(0,l.h0)(s),h=(0,l.fx)(s,(0,o.nH)(e,c));u=u||void 0,d&&await i.fy({docId:d,types:t,lang:c,setId:u,contentVersion:h}).then((async t=>{var r;await n(ce(t)),n((r=(0,o.nH)(e,c),{type:k,payload:{[r]:!0}}))})).catch((o=>n((0,f.YR)(o,de(e,t)))))}},ue=e=>async(t,n)=>{const r=n(),a=(0,l.sJ)(r),s=(0,l.so)(r);let c=q(e);a&&(t(function(e){return{type:$,payload:{annotationId:e,offsets:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],uri:arguments.length>2?arguments[2]:void 0}}}(a,e,c)),t((0,d.i2)({uris:[(0,o.nH)(c,s)]})),m("mark","update"),i.KN(a,e).catch((e=>t((0,f.SW)(e,a)))))},he=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return async(n,o)=>{const r=o(),a=(0,l.sJ)(r);a&&(n(Y(a,e)),t&&n((0,p.updateDefaultHighlightStyle)(e)),m("mark","update"),i.mf(a,s.Rx(e)).catch((e=>n((0,f.SW)(e,a)))))}},pe=()=>async(e,t)=>{let n=t(),r=(0,l.sJ)(n),a=n.annotations.annotations[r];var i,s;r&&e((i=a.highlights[0],s=(0,o.Nr)(a),{type:H,payload:{id:i,icon:s}}))},fe=(e,t)=>{let n=document.querySelector(`[data-aid="${t}"].verse .verse-number`);return`${e}${n?`:${n.innerText.trim()}`:""}`},ge=(e,t,n)=>{const o=(0,l.ph)(t,e);return n?`${o}:${n}`:o},me=(e,t)=>e=(e=[...e]).length>0?t.reduce(((t,n)=>(e.some((e=>e===n[0]))&&t.push(n[0]),t)),[]):[t[1][0]],ve=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t=[...t].join(","),e.includes(t)},ye=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return async(r,a)=>{const u=a(),h=(0,l.Nm)(u,t);e=me(e,h);const p=(0,l.Bc)(u),g=((e,t,n)=>{const{content:{body:o}}=(0,l.au)(n,e),r=document.createElement("template");return r.innerHTML=o,Array.from(r.content.querySelectorAll(".verse[data-aid][id]")).filter((e=>t.includes(e.dataset.aid))).map((e=>parseInt(e.id.replace("p","")))).reduce(((e,t,n,o)=>(t-1===o[n-1]?e[e.length-1].push(t):e.push([t]),e)),[]).map((e=>e.length>1?`${e[0]}-${e[e.length-1]}`:e[0])).join(",")})(t,e,u),v=(0,l.fx)(u,t),y=(0,l.ke)(u,t),S=(0,l.so)(u);if(ve(null==p?void 0:p.refs,e))return void r((0,c.showToast)({type:"link-already-exists"}));const E={name:ge(t,u,g),contentVersion:v,docId:y,locale:S,pid:e.join(",")};null!=p&&p.id&&(r(((e,t)=>({type:x,payload:{annotationId:e,ref:t}}))(p.id,s.$O(E))),r(pe(p.id)),!n&&m("link","create"),i.pc(p.id,E).then((e=>{const t=e.refs.find((e=>e.pid===E.pid));r(((e,t)=>({type:U,payload:{refId:e,ref:t}}))(null,t)),r((0,d.i2)({uris:[(0,o.nH)(t.uri,S)]}))})).catch((e=>r((0,f.SW)(e,p.id)))))}},Se=(e,t,n)=>async(o,r)=>{const a=r(),i=(0,l.Bc)(a);ve(null==i?void 0:i.refs,e)?o((0,c.showToast)({type:"link-already-exists"})):(o(Ee(t,!0)),o(ye(e,n,!0)),m("link","update"))},Ee=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return async(n,o)=>{const r=o(),a=(0,l.sJ)(r);a&&(n(((e,t)=>({type:D,payload:{annotationId:e,refId:t}}))(a,e)),n(pe(a)),!t&&m("link","delete"),await i.G_(a,e).catch((e=>n((0,f.SW)(e,a)))))}},be=(e,t)=>async(n,o)=>{let r=o(),a=(0,u.Z)(),c=(0,l.ke)(r,t),d=(0,l.so)(r),h=(0,l.Z9)(r,t),p=(0,l.ph)(r,t),g=fe(p,e.pid),y={id:a,docId:c,folders:[],lang:d,lastUpdated:(new Date).toISOString(),note:{},source:v,tags:[],type:"bookmark",bookmark:{annotationId:a,sort:0,name:g,offset:"-1",publication:h,reference:g,...e}};n((e=>({type:P,payload:[e]}))(y)),m("bookmark","create"),i.ud(s.xW(y)).catch((e=>n((0,f.SW)(e,y.id))))},Ie=e=>(t,n)=>{e=e.map(s.Ef),t({type:P,payload:e})},Te=()=>async(e,t)=>{let n=await i.oE();e(Ie(n))},we=e=>async(t,n)=>{t((e=>({type:C,payload:e}))(Object.entries(e))),i.kc(e)},Oe=(e,t)=>async(n,o)=>{let r=o();(t=t||(0,l.sJ)(r))&&(n(((e,t)=>({type:A,payload:{annotationId:e,name:t}}))(t,e)),i.sS(t,{name:e}).catch((e=>n((0,f.SW)(e,t)))))},_e=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return async(o,r)=>{let a=r();n=n||(0,l.sJ)(a);let s=(0,l.Ct)(a,n),c=(0,l.ke)(a,t),d=(0,l.so)(a),u=(0,l.Z9)(a,t),h=(0,l.ph)(a,t),p=fe(h,e.pid),g=s.name===s.reference?p:s.name;e={docId:c,lang:d,name:g,offset:"-1",publication:u,reference:p,...e},n&&(o(((e,t)=>({type:j,payload:{annotationId:e,...t}}))(n,e)),m("bookmark","update"),i.sS(n,e).catch((e=>o((0,f.SW)(e,n)))))}},Ne=e=>async(t,n)=>{let o=n(),r=(0,l.a0)(o);return r[(e={href:`${y}/tags/${e.name}`,...e,id:e.id||(0,u.Z)()}).id]||(t(z([...Object.values(r),e])),await i.ln(s.du(e))),(0,l.Xm)(n(),e.id)},ke=()=>async(e,t)=>{let n=await i.NJ();n=n.map(s.a_),e(z(n))},Pe=e=>async(t,n)=>{let o=n(),r=(0,l.B5)(o);const a=(0,l.h0)(o);return r[(e={...e,id:e.id||(0,u.Z)(),setId:a}).id]||(t(Q([...Object.values(r),e])),m("notebook","create"),await i.L6(s.FM(e))),(0,l.rp)(n(),e.id)},Ce=()=>async(e,t)=>{const n=t(),o=(0,l.h0)(n);let r=await i.xh({setId:o});r=s.iQ(r),e(Q(r))},je=e=>(t,n)=>{const o=n(),r=(0,l.I3)(o);let a=(e=e.filter((e=>null!==e.id))).reduce(((e,t)=>Math.max(t.sort,e)),0);const i={name:r("defaultSetName"),id:null,sort:a+1};t((e=>({type:Z,payload:e}))([...e,i]))},Ae=(e,t)=>async(t,n)=>{const o=n(),r=(0,l.Tu)(o),a=(new Date).toISOString(),i={created:a,id:(0,u.Z)(),name:e,sort:0,timestamp:a,visible:"true"};t(je([...r,i])),t(Re(i.id)),m("study set","create")},Le=e=>async(t,n)=>{const o=n();(0,l.h0)(o)===e&&t(Re(null)),t((e=>({type:V,payload:e}))(e));const{annotationsToDelete:r,foldersToDelete:a}=await i.kB(e);t({type:I,payload:r}),t({type:F,payload:a})},xe=()=>async(e,t)=>{let{sets:n=[]}=await i.ki();n=n.map(s.CG);const o=n.filter((e=>e.activeSet))[0];e(X((null==o?void 0:o.id)||null)),e(je(n))},De=e=>async(t,n)=>{const{null:o,...r}=e;t((e=>({type:J,payload:e}))(e)),await i.NM(r)},$e=e=>async(t,n)=>{t((e=>({type:W,payload:e}))(e)),await i.DH(e.id,s.Ue(e))},Re=e=>(t,n)=>{const o=n(),r=(0,l.Er)(o);if(null!=r&&r.id){const e={...r,activeSet:!1};t($e(e))}if(e){const n={...(0,l.UJ)(o,e),activeSet:!0};t($e(n))}m("study set","switch"),t(X(e))}},20890:(e,t,n)=>{n.d(t,{zn:()=>s,i2:()=>l});n(94301);var o=n(42139),r=n(84639);const{ANNOTATIONS_API:a}=(0,r.U2)();var i=n(6267);const s="ADD_CORE_CONTENT_FRAGMENTS",l=(e,t)=>(n,r)=>{const l=(0,i.b5)(r()),{missingFragments:c,exisitingFragments:d}=e.uris.reduce(((e,t)=>{let{missingFragments:n,exisitingFragments:o}=e;return l[t]?o[t]=l[t]:n.push(t),{missingFragments:n,exisitingFragments:o}}),{missingFragments:[],exisitingFragments:{}});return c.length?((e,t)=>{let{uris:n=[],lang:r=""}=e;if(!n.length)return Promise.reject({status:400,message:"uris cannot be empty."});let i=`${a}/content/api/v3${r&&`?lang=${r}`}`,s={method:"POST",mode:"cors",compress:!0,credentials:"include",body:JSON.stringify({uris:n}),headers:{"Content-Type":"application/json"}};return s=(0,o.f)(s,t),fetch(i,s).then((e=>e.ok?e.json():Promise.reject(e))).catch((e=>Promise.reject(e)))})(e,t).then((e=>{const t={...d,...e};return n(function(){return{type:s,payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}(e)),t})):Promise.resolve(d)}},15410:(e,t,n)=>{n.d(t,{w:()=>d});var o=n(10584),r=n(77046),a=n(6267),i=n(19113),s=n(38901),l=n(36976);const c=(e,t)=>t.navList.find((t=>e.includes(t.split("#")[0])))?e:t.firstContentUri,d=(e,t)=>async(n,d)=>{var u,h,p;const f=d();let g=(0,a.gs)(f),{lang:m,uri:v}=e;v=v.split(".")[0];let y=[],S=200,E=(0,l.nH)(v,m),b=(0,a.pW)(f,E),I=(0,l.nH)(v,m),T=(0,a.au)(f,I),w=(0,l.nH)(T.tableOfContentsUri||v,m),O=(0,a.uo)(f,w);!T.content&&O.entries&&(I=(0,l.nH)(c(v,O),m),T=(0,a.au)(f,I)),b=b.loaded&&(0,a.LH)(f,E),T=T.content&&T,O=O.entries&&(0,a.xR)(f,w);let _=(null===(u=b)||void 0===u?void 0:u.verified)??(null===(h=T)||void 0===h?void 0:h.verified)??(null===(p=O)||void 0===p?void 0:p.verified);if(g&&!1===_&&(b=!1,T=!1,O=!1),!(b||T&&O)){const n=((e,t,n,r)=>async(i,s)=>({content:null!=e&&e.firstContentUri&&!t?await(0,o.Z$)({...i,uri:c(i.uri,(0,a.uo)(r,(0,l.nH)(e.uri,i.lang)))},s):t,toc:null!=t&&t.tableOfContentsUri&&!e?await(0,o.sL)({...i,uri:t.tableOfContentsUri},s):e,...e||t||n?{collection:n}:await(0,o.tO)(i,s)}))(O,T,b,f);try{let o=await n(e,t);({collection:b,toc:O,content:T}=o)}catch(e){S=e.status,b=T=O=e}b&&y.push((0,i.U$)(b,m)),T&&(y.push((0,r.OD)(O,m)),y.push((0,r.$p)(T,m)),T.content&&v!==T.uri&&y.push((0,r.$p)({uri:v,status:404,redirect:(0,l.nH)(T.uri,m)},m)))}y.push((0,s.Er)(S)),y.forEach((e=>n(e)));let N=d();return{book:(0,a.uo)(N,w),content:(0,a.au)(N,I),library:(0,a.pW)(N,E)}}},16179:(e,t,n)=>{n.d(t,{SW:()=>h,YR:()=>p,fr:()=>g});var o=n(1262),r=n(38901),a=n(61027),i=n(39516),s=n(37720),l=n(59241),c=n(26247),d=n(5112);let u=null;const h=(e,t)=>async(n,o)=>{const r=o();let a=(0,s.W_)(r,t)||(0,s.zA)(r,t);u||(u=(0,l.J)());const i=await u;if(u=null,!i.success)throw n(f(a)),e;try{const e=(0,d.xW)(a);await(0,c._E)(e)}catch(e){throw n(f(a)),e}},p=(e,t)=>async(n,o)=>{u||(u=(0,l.J)());const r=await u;if(u=null,!r.success)throw e;n(t)},f=e=>async t=>{const n=await t((0,r.fo)(!0)),i="unsavedAnnotations";let s=(0,o.Kk)(i);s=JSON.parse(s),s&&s.length?(0,o.j4)(i,[...s,e]):(0,o.j4)(i,[e]),t(n?(0,a.showToast)({type:"failed-to-save"}):(0,a.showToast)({type:"logged-off",disableAutoHide:!0}))},g=e=>async(t,n)=>{try{return await t((0,i._E)(e)),t((0,a.showToast)({type:"saved"})),(0,o.F_)("unsavedAnnotations"),Promise.resolve()}catch(e){return t((0,a.showToast)({type:"failed-to-save"})),Promise.reject("failed-to-save")}}},54350:(e,t,n)=>{n.d(t,{ig:()=>s,vP:()=>a});var o=n(10584),r=n(38901);const a="GET_HOME_DATA",i=e=>({type:a,payload:e}),s=(e,t)=>(n,a)=>(0,o.uJ)(e,t).then((e=>{n((0,r.Er)(200)),Promise.resolve(n(i(e)))})).catch((e=>{n((0,r.Er)(e.status)),Promise.resolve(n(i(e)))}))},98306:(e,t,n)=>{n.d(t,{Mx:()=>a,hF:()=>r});var o=n(10584);const r="GET_I18N_RESOURCES",a=(e,t)=>async(n,a)=>{let i=a().i18n[e.lang];if(!i){n(function(){return{type:r,payload:{lang:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"eng",resources:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}}(await(0,o.cl)(e,t).catch((()=>({}))),e.lang))}return i}},19113:(e,t,n)=>{n.d(t,{U$:()=>l,mQ:()=>s,v0:()=>c});var o=n(10584),r=n(38901),a=n(6267),i=n(36976);const s="GET_LIBRARY_DATA",l=(e,t)=>({type:s,payload:e||{},lang:t}),c=(e,t)=>async(n,s)=>{let c=s(),{lang:d,uri:u}=e,h=200,p=(0,i.nH)(u,d),f=(0,a.pW)(c,p);if(!f.loaded){try{f=await(0,o.b8)(e,t)}catch(e){h=e.status,f=e}n((0,r.Er)(h)),n(l(f,e.lang))}return f}},33724:(e,t,n)=>{n.r(t),n.d(t,{SET_APP_THEME:()=>u,SET_FONT_SANS_SERIF:()=>o,SET_FONT_SIZE:()=>r,SET_FOOTNOTES_HIDDEN:()=>a,SET_HIGHLIGHT_STYLE:()=>d,SET_IMAGE_PREFERENCES:()=>c,SET_PRINT_HIGHLIGHTS:()=>s,SET_SHOW_ARCHIVED_CONTENT:()=>i,SET_VIDEO_PREFERENCES:()=>l,_setFontSansSerif:()=>h,_setFontSize:()=>p,_setFootnotesHidden:()=>f,_setShowArchivedContent:()=>g,setDefaultHighlightStyle:()=>m,setFontSansSerif:()=>v,setFontSize:()=>y,setFootnotesHidden:()=>S,setImagePreferences:()=>I,setPrintHighlights:()=>E,setShowArchivedContent:()=>b,setTheme:()=>O,setVideoPreferences:()=>T,updateDefaultHighlightStyle:()=>w});const o="SET_FONT_SANS_SERIF",r="SET_FONT_SIZE",a="SET_FOOTNOTES_HIDDEN",i="SET_SHOW_ARCHIVED_CONTENT",s="SET_PRINT_HIGHLIGHTS",l="SET_VIDEO_PREFERENCES",c="SET_IMAGE_PREFERENCES",d="SET_HIGHLIGHT_STYLE",u="SET_APP_THEME",h=e=>({type:o,payload:e}),p=e=>({type:r,payload:e}),f=e=>({type:a,payload:e}),g=e=>({type:i,payload:e}),m=e=>({type:d,payload:e}),v=e=>(t,n)=>{localStorage.setItem("fontSansSerif",e),t(h(e))},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(t,n)=>{localStorage.setItem("fontSize",e),t(p(e))}},S=e=>(t,n)=>{localStorage.setItem("footnotesHidden",e),t(f(e))},E=e=>(t,n)=>{localStorage.setItem("printHighlights",e),t((e=>({type:s,payload:e}))(e))},b=e=>(t,n)=>{localStorage.setItem("showArchivedContent",e),t(g(e))},I=e=>(t,n)=>{localStorage.setItem("disableImages",!!e),t((e=>({type:c,payload:e}))(!!e))},T=e=>(t,n)=>{localStorage.setItem("disableVideos",!!e),t((e=>({type:l,payload:e}))(!!e))},w=e=>(t,n)=>{localStorage.setItem("highlightStyle",JSON.stringify({...e,clear:!1})),t(m(e))},O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return(t,n)=>{localStorage.setItem("theme",e),t((e=>({type:u,payload:e}))(e))}}},61027:(e,t,n)=>{n.r(t),n.d(t,{HIDE_LOW_SERVICE_BANNER:()=>u,HIDE_TOAST:()=>i,SET_NOTIFICATIONS:()=>s,SET_SEEN_NOTIFICATIONS:()=>l,SET_VISIBLE_NOTIFICATIONS:()=>c,SHOW_LOW_SERVICE_BANNER:()=>d,SHOW_TOAST:()=>a,dismissToast:()=>p,getNotifications:()=>S,hideLowServiceBanner:()=>v,setInitialVisibleNotifications:()=>T,setNotifications:()=>f,setSeenNotifications:()=>g,setVisibleNotifications:()=>y,showLowServiceBanner:()=>m,showToast:()=>h,triggerNotification:()=>w,updateAndRecordSeenNotifications:()=>b,updateSeenNotifications:()=>E,updateVisibleNotifications:()=>I});var o=n(10584),r=n(6267);const a="SHOW_TOAST",i="HIDE_TOAST",s="SET_NOTIFICATIONS",l="SET_SEEN_NOTIFICATIONS",c="SET_VISIBLE_NOTIFICATIONS",d="SHOW_LOW_SERVICE_BANNER",u="HIDE_LOW_SERVICE_BANNER",h=e=>{let{type:t,disableAutoHide:n}=e;return{type:a,payload:{type:t,show:!0,disableAutoHide:n}}},p=()=>({type:i,payload:{show:!1}}),f=e=>({type:s,payload:e}),g=e=>({type:l,payload:e}),m=()=>({type:d}),v=()=>({type:u}),y=e=>({type:c,payload:e}),S=(e,t)=>async(n,r)=>{const a=await(0,o.nZ)(e,t);return n(f(a)),a},E=e=>(t,n)=>{const o=(0,r.N$)(n()),a=[].concat(e||[],o||[]).filter(((e,t,n)=>n.indexOf(e)===t));return t(g(a))},b=e=>(t,n)=>{const o=(0,r.N$)(n()),a=[].concat(e||[],o||[]).filter(((e,t,n)=>n.indexOf(e)===t)),i=a.map((e=>(0,r.t0)(n(),e))).filter((e=>e&&!e.prominenceEmphasizedAttribute)).map((e=>{let{id:t}=e;return t}));return i.length&&localStorage.setItem("seenNotifications",JSON.stringify(i)),t(g(a))},I=e=>(t,n)=>{const o=n(),a=(0,r.fG)(o,e);return t(y(a))},T=e=>(t,n)=>{const o=n(),a=(0,r.qp)(o),i=(0,r.fG)(o,e),s=[...new Set([...a,...i])];return t(y(s))},w=e=>(t,n)=>{const o=n(),a=(0,r.JU)(o).filter((t=>t.locatorIds.includes(e)))[0],i=(0,r.qp)(o);return t(y([a,...i]))}},77046:(e,t,n)=>{n.d(t,{$p:()=>d,EZ:()=>h,I$:()=>u,Ly:()=>l,OD:()=>c,Oz:()=>i,RR:()=>a,sl:()=>s});n(10584),n(38901),n(6267);var o=n(36976),r=n(35404);const a="GET_TOC_DATA",i="GET_READER_CONTENT",s="CLEAR_TOC_COLLECTION_OVERRIDES",l="SET_TOC_COLLECTION_OVERRIDE",c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"eng";return{type:a,payload:{[(0,o.nH)(e.uri,t)]:e}}},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"eng";return{type:i,payload:{[(0,o.nH)(e.uri,t)]:e}}},u=()=>({type:s}),h=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"eng";return{type:l,payload:{bookKey:(0,o.nH)(e.tableOfContentsUri,n),parentNameOverride:t.title,parentUriOverride:(0,r.Qj)(t.uri)}}}},18327:(e,t,n)=>{n.d(t,{$R:()=>v,CL:()=>p,DV:()=>h,Rd:()=>m,Vh:()=>S,_i:()=>l,c0:()=>c,c7:()=>E,dL:()=>f,fy:()=>y,gd:()=>u,li:()=>g,ln:()=>b,p5:()=>I,y5:()=>d});var o=n(20890),r=n(15410),a=n(36976),i=n(35404),s=n(6267);const l="ADD_FLOATING_PANEL",c="REMOVE_FLOATING_PANEL",d="REMOVE_FLOATING_PANEL_BY_ID",u="CLEAR_FLOATING_PANELS",h="SET_PANEL",p="SET_SUB_PANEL",f=e=>({type:h,payload:e}),g=e=>({type:p,payload:e}),m=()=>({type:c}),v=e=>({type:d,payload:e}),y=()=>({type:u}),S=e=>async(t,n)=>{var o;const r=(0,a.yN)(),i=n(),c=(0,s.Qw)(i,r);if(e.id===(null===(o=c[c.length-1])||void 0===o?void 0:o.id))return;const d=c.filter((t=>{let{id:n}=t;return e.id===n}));"editor"===(e={...e,key:`${e.id}_${d.length}`}).type&&c.filter((e=>"editor"===e.type)).forEach((e=>t(v(e.id)))),t({type:l,payload:e})},E=()=>(e,t)=>{const n=(0,a.yN)(),o=t();(0,s.Qw)(o,n).filter((e=>"editor"===e.type)).forEach((t=>e(v(t.id))))},b=(e,t)=>{let{uris:n,lang:s}=e;return(e,l)=>{let c=[],{fullUris:d,fragmentUris:u}=n.reduce(((e,t)=>{let n=(0,i.zz)(t.href);return e.fragmentUris.push((0,a.nH)(n,s)),!n.includes(".")&&e.fullUris.push(n),e}),{fullUris:[],fragmentUris:[]});u.length&&c.push((0,o.i2)({uris:u},t)(e,l)),d.length&&d.forEach((n=>c.push((0,r.w)({uri:n,lang:s},t)(e,l))));return Promise.all(c)}},I=(e,t,n)=>{let{uris:r,lang:s}=t;return(t,l)=>r?(r=r.filter((e=>{let{href:t}=e;return/^\//.test(t)||(0,i.L2)(t)})).map((e=>(0,a.nH)((0,i.zz)(e.href),s))),(0,o.i2)({uris:r},n)(t,l).then((n=>t(function(e){return{type:"GET_FOOTNOTE",payload:{id:e,references:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]}}}(e,n))))):Promise.resolve()}},23303:(e,t,n)=>{n.r(t),n.d(t,{ADD_STYLE_SHEET:()=>o,REMOVE_STYLE_SHEET:()=>r,RESET_STYLE_SHEETS:()=>a,STYLE_SHEET_LOADED:()=>i,addStyleSheet:()=>s,removeStyleSheet:()=>l,resetStyleSheets:()=>c,styleSheetLoaded:()=>d});const o="ADD_STYLE_SHEET",r="REMOVE_STYLE_SHEET",a="RESET_STYLE_SHEETS",i="STYLE_SHEET_LOADED",s=e=>({type:o,payload:{key:e.href,styleSheet:e}}),l=e=>({type:r,payload:{key:e.href}}),c=()=>({type:a}),d=e=>({type:i,payload:{key:e.href}})},38901:(e,t,n)=>{n.d(t,{AF:()=>p,Er:()=>v,Ps:()=>y,Rp:()=>w,TZ:()=>h,WT:()=>u,Xx:()=>I,fo:()=>T,nk:()=>d,yN:()=>g,yW:()=>f,zY:()=>m});var o=n(10584),r=(n(19476),n(33065)),a=n(6267),i=n(59241),s=n(32428),l=n(84639);const{NODE_ENV:c}=(0,l.U2)(),d="LOCATION_CHANGE",u="RECEIVE_HTTP_RESPONSE_CODE",h="RECEIVE_HTTP_RESPONSE_CODE_RESET",p="SET_LANGUAGE",f="SET_LOGGED_IN",g="SET_ANNOTATIONS_OUT_OF_SERVICE",m="SET_CSS_RULES",v=e=>({type:u,payload:e}),y=e=>({type:d,payload:e}),S=function(){return{type:f,payload:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},E=function(){return{type:g,payload:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},b=()=>async(e,t)=>{let n=(0,o.o)(),r=(async e=>(await e).loggedIn)(n);e(S(r));try{let{annotationsOutOfService:t,loggedIn:o}=await n;e(E(t)),e(S(o))}catch(t){e(E(!1)),e(S(!1))}return r},I=()=>(e,t)=>{const n=t();let o=(0,a.al)(n);return(0,r.tI)(o)?o=!1:null===o&&e(b()),o||!1},T=e=>async(t,n)=>{const o=n();let r=(0,a.al)(o);(null===r||e)&&(r=t(b()));const l="oauth_refresh_token"+("production"!==c?"-int":""),d=(0,s.$1)()[l];if(!1===r&&d){(await(0,i.J)()).success&&(r=t(b()))}return r},w=(e,t)=>async(n,r)=>{const a=await(0,o.G4)(e,t);return n((e=>({type:m,payload:e}))(a.rules)),a}},6837:(e,t,n)=>{n.d(t,{FU:()=>s,ZP:()=>c,hk:()=>l});var o=n(67294),r=n(19476),a=n(85893);let i=(0,o.createContext)({lang:"eng",dir:"ltr",crossLinkMode:!1});const s=e=>t=>{const n=(0,o.useContext)(i);return(0,a.jsx)(e,{...t,...n})},l=e=>{let{lang:t,crossLinkMode:n,locationState:s,children:l}=e;const c=(0,o.useContext)(i),d=(0,o.useMemo)((()=>({...c,lang:t,dir:(0,r.j)(t),crossLinkMode:n,locationState:s})),[n,c,t,s]);return(0,a.jsx)(i.Provider,{value:d,children:l})},c=i},91499:(e,t,n)=>{n.d(t,{Z:()=>d,e:()=>c});const o="iconButton-NNPV2";var r=n(94184),a=n.n(r),i=n(39587),s=n(85893);const l=e=>{let{className:t,Icon:n,innerRef:r,size:l="small",onClick:c=(()=>{}),optionalClickParam:d,title:u,hiddenTitleText:h,...p}=e;return(0,s.jsx)(i.hU,{className:a()(o,t),ref:r,size:l,title:u,"aria-label":h,onClick:e=>c(e,d),...p,children:(0,s.jsx)(n,{})})},c=e=>t=>(0,s.jsx)(l,{Icon:e,...t}),d=l},66527:(e,t,n)=>{n.d(t,{Z:()=>c});const o="loading-iCuAj",r="loader-Kso6C",a="outerLoader-Xn1Yh";var i=n(94184),s=n.n(i),l=n(85893);const c=e=>{let{className:t}=e;return(0,l.jsx)("div",{className:s()(t,o),children:(0,l.jsx)("div",{className:r,children:(0,l.jsx)("div",{className:a})})})}},18511:(e,t,n)=>{n.d(t,{H:()=>_,Md:()=>w,ZP:()=>N});const o="login-qllBI",r="signInHelpLink-UK6nF",a="outOfService-sxJuP";var i=n(78561),s=n(84639),l=n(94184),c=n.n(l),d=n(76276),u=n(86706),h=n(91499),p=n(6267),f=n(40217),g=n(92526),m=n(70426),v=n(39587),y=n(29650),S=n(63927),E=n(85893);const{APP_URL:b,REGISTER_URL:I}=(0,s.U2)(),T=(0,h.e)(i.Z);T.displayName="ProfileButton";const w=()=>`${b}/login?redirect_uri=${encodeURIComponent(window.location.href)}`,O=e=>{let{small:t}=e,n=(0,S.V2)();return(0,E.jsx)(v.KM,{href:w(),small:t,children:n("signInButtonLabel")})},_=e=>{let{handleClose:t,className:n}=e,o=(0,S.V2)();return(0,E.jsx)(m.Error,{className:n,onClose:()=>{document.activeElement.blur(),t()},children:(0,E.jsxs)(g.Z,{children:[(0,E.jsx)(y.hh,{children:o("logginToSaveAnnotationToastMessage")}),(0,E.jsx)(f.Z,{children:(0,E.jsx)(O,{})})]})})},N=e=>{let{className:t,signInDescription:n}=e,i=(0,S.V2)(),s=(0,u.v9)(p.y8);if(!d.ZP)return null;const l=i("annotationsOutOfServiceText");let h=s?l:n;return(0,E.jsxs)("div",{className:c()(o,t),children:[(0,E.jsx)("div",{className:c()(s&&a),children:h}),(0,E.jsx)(O,{}),(0,E.jsx)(y.ED,{children:(0,E.jsx)("a",{className:r,href:`${I}?target=${window.location.href}`,children:i("signInHelpLink")})})]})}},76540:(e,t,n)=>{n.d(t,{Z:()=>w});var o=n(67294),r=n(86706),a=n(33065),i=n(82600),s=n(38111),l=n(76484),c=n(6267),d=n(15410),u=n(98306),h=n(61027),p=n(77046),f=n(23303),g=n(38901),m=n(35404),v=n(63927),y=n(6837),S=n(16550),E=n(85893);const b=/^[^/]*?\/.+?([.?#][^/]*$)/;function I(e,t,n,o){let[r]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{sections:[]},n=arguments.length>2?arguments[2]:void 0;return t.sections.length?[t.uri,"library"]:e.content?[e.uri,"reader"]:[n.pathname]}(e,t,n),a=(0,m.cp)(n.pathname),i=n.pathname.split(".")[1],s=i?`${r}.${i}`:r;if(n.pathname!==s||n.pathname!==a){let e=`${r}${(n.href||"").replace(b,"$1")}`;o.replace((0,m.ob)(e))}}const T=e=>{var t;const n=(0,r.v9)(c.vK),f=(0,r.I0)(),m=(0,v.NW)(),b=(0,o.useRef)(!1),T=(0,S.k6)(),{lang:w}=(0,o.useContext)(y.ZP),[O,_]=(0,o.useState)(),N=(0,o.useRef)(!1),k=(0,S.TH)(),P=(0,r.v9)(c.gs),C=(0,r.v9)(c.qp),j=(0,r.v9)((e=>(0,c.ld)(e,k)));let A=(0,r.v9)((e=>(0,c.au)(e,k))),L=(0,r.v9)((e=>(0,c.pW)(e,k))),x=(0,r.v9)((e=>(0,c.au)(e,O||k))),D=(0,r.v9)((e=>(0,c.pW)(e,O||k)));(0,o.useEffect)((()=>{A.content&&!D.isDefault&&f((0,p.EZ)(A,D,w))}),[A,D,w,f]);const $={...e,i18n:(0,r.v9)((e=>e.i18n)),loading:N.current,tableOfContents:(0,r.v9)((e=>(0,c.uo)(e,k))),content:A,library:L,location:O,notifications:C};(0,o.useEffect)((()=>{I(A,L,k,T)}),[]),(0,v.rf)((()=>{x.tableOfContentsUri&&A.tableOfContentsUri!==x.tableOfContentsUri&&f((0,h.setVisibleNotifications)([]))}),[A.tableOfContentsUri,x.tableOfContentsUri]),(0,o.useEffect)((()=>{(async()=>{let{i18n:e,tableOfContents:t}=$,o=!(L.loaded&&(L.verified||!P)),r=!(t.entries&&A.content&&(t.verified&&A.verified||!P)),i=[200,401].includes(j)&&o&&r;if(i&&!N.current){let t=k.pathname.split(".")[0];N.current=!0,(0,a.xb)(n)&&f((0,g.Rp)({})),(0,a.xb)(e[w])&&f((0,u.Mx)({lang:w})),void 0===C&&f((0,h.getNotifications)({lang:w})),f((0,h.updateVisibleNotifications)(k)),({library:L,content:A}=await f((0,d.w)({uri:t,lang:w}))),N.current=!1,I(A,L,k,T),_(k),m()}else i||_(k)})()}),[k,P]),(0,o.useEffect)((()=>{N.current||(document.dispatchEvent(new Event("DOMContentLoaded")),document.dispatchEvent(new CustomEvent("checkcontext")),document.activeElement&&document.activeElement.blur())}),[N.current,k.pathname]),(0,o.useEffect)((()=>{f((0,g.Rp)({})),f((0,h.getNotifications)({lang:w})).then((()=>f((0,h.setInitialVisibleNotifications)(k))))}),[]),(0,v.Fg)($.crossLinkMode);const R=!O&&(401===x.status||401===D.status);let H=x.content?s.Z:null!=D&&null!==(t=D.sections)&&void 0!==t&&t.length||R?i.Z:l.Z;return H===i.Z&&(b.current=!0),(0,E.jsx)(H,{...$,fromLibrary:b})};T.updateInitialStore=async(e,t)=>{var n,o;let r=e.getState(),a=r.preview?"preview":void 0,i=e.dispatch,s={cookie:r.headers.cookie},l=(0,c.so)(r),u=[(0,g.Rp)({},s),(0,d.w)({lang:l,uri:t,context:a},s)],[h,{content:p}]=await Promise.all(u.map(i));return((null==p||null===(n=p.content)||void 0===n||null===(o=n.head)||void 0===o?void 0:o.links)||[]).forEach((e=>{i((0,f.addStyleSheet)(e)),i((0,f.styleSheetLoaded)(e))})),{context:a,dispatch:i,headers:s,lang:l,uri:t}};const w=T},85455:(e,t,n)=>{n.d(t,{Z:()=>O});var o=n(67294),r=n(86706),a=n(19113),i=n(54350),s=n(38901),l=n(6267),c=n(10956),d=n.n(c),u=n(1577),h=n(35404),p=n(23810),f=n(66527),g=n(85893);function m(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=y(e,"string");return"symbol"==typeof t?t:String(t)}function y(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}const S=(0,p.ZP)({resolved:{},chunkName:e=>"home",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:e=>Promise.all([n.e(882),n.e(201),n.e(133),n.e(916),n.e(177)]).then(n.bind(n,55115)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return n(t)},resolve(e){return 55115}},{fallback:(0,g.jsx)(f.Z,{})}),E=(e,t)=>{let n=t.location,o=(0,l.pW)(e,n);return{additionalItems:e.home.additionalItems,featureItems:e.home.featureItems,library:o,homeStatus:e.home.status,lang:(0,l.so)(e),libraryStatus:o.status,location:n,meta:e.home.meta,showArchivedContent:e.localSettings.showArchivedContent,streamItems:e.home.streamItems,system:e.system}},b=d()(((e,t)=>({getHomeData:(n,o)=>e.getHomeData({lang:t,...n},o),getLibraryData:(n,o)=>e.getLibraryData({lang:t,...n},o)}))),I=(e,t,n)=>{const o=e.lang;return{...n,...e,...t,...b(t,o)}},T=(0,r.$j)(E,{asyncCheckLogin:s.fo,getHomeData:i.ig,getLibraryData:a.v0},I);class w extends o.Component{constructor(){super(...arguments),m(this,"componentDidMount",(async()=>{const{asyncCheckLogin:e,getHomeData:t,getLibraryData:n,lang:o,library:r,meta:a}=this.props;!r.loaded&&n({uri:(0,h.aq)("/lib"),lang:o}),!a&&t(),u.Z.firePageViewEvent(e,{page:{info:{name:"gospel library landing",language:o},category:{type:"landing"}}})}))}static async updateInitialStore(e,t){let n=e.getState(),o=n.preview?"preview":void 0,r=e.dispatch,s={cookie:n.headers.cookie},c=(0,l.so)(n),d=[(0,a.v0)({context:o,lang:c,uri:"/lib"},s),(0,i.ig)({context:o,lang:c},s)];await Promise.all(d.map((t=>t(r,e.getState))))}render(){return(0,g.jsx)(S,{...this.props})}}const O=T(w)},82600:(e,t,n)=>{n.d(t,{Z:()=>O});var o=n(67294),r=n(86706),a=n(16550),i=n(39516),s=n(19113),l=n(77046),c=n(18327),d=n(38901),u=n(6267),h=n(1577),p=n(62972),f=n(23810),g=n(66527),m=n(85893);function v(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=S(e,"string");return"symbol"==typeof t?t:String(t)}function S(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}const E=(0,f.ZP)({resolved:{},chunkName:e=>"library",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:e=>Promise.all([n.e(882),n.e(201),n.e(327),n.e(133),n.e(329),n.e(916),n.e(347),n.e(721)]).then(n.bind(n,61733)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return n(t)},resolve(e){return 61733}},{fallback:(0,m.jsx)(g.Z,{})}),b=(e,t)=>{let n=t.location,o=(0,u.pW)(e,n);return{activePanel:(0,u.p2)(e),annotationsOutOfService:(0,u.y8)(e),bookmarks:(0,u.Ed)(e),content:(0,u.au)(e,n),dir:e.system.dir,i18n:e.i18n,lang:(0,u.so)(e),library:o,location:n,loggedIn:(0,u.gs)(e),selectI18nStringById:(0,u.I3)(e),showArchivedContent:(0,u.RU)(e),status:o.status}},I=(e,t,n)=>({...n,...e,...t}),T=(0,r.$j)(b,{asyncCheckLogin:d.fo,clearTocCollectionOverrides:l.I$,getBookmarks:i.oE,getSets:i.ki,setActivePanel:c.dL},I);class w extends o.Component{constructor(){super(...arguments),v(this,"firePageViewEvent",(()=>{const{asyncCheckLogin:e,crossLinkMode:t,lang:n,library:o}=this.props;!t&&o.loaded&&h.Z.firePageViewEvent(e,{page:{info:{breadcrumbs:o.breadCrumbs.map((e=>{let{uri:t}=e;return t.split("/").pop()})),language:n},category:{...(0,p.Z)(o.uri),type:"navigation"}}})}))}static async updateInitialStore(e,t){let n=e.getState(),o=n.preview?"preview":void 0,r=e.dispatch,a=(0,u.so)(n),i=[(0,s.v0)({context:o,lang:a,uri:t})];await Promise.all(i.map((t=>t(r,e.getState))))}componentDidMount(){this.clearTocCollectionOverrides(),this.getSecureData(),this.firePageViewEvent()}componentDidUpdate(e){var t,n;(null===(t=e.library)||void 0===t?void 0:t.uri)!==(null===(n=this.props.library)||void 0===n?void 0:n.uri)&&this.firePageViewEvent(),!e.loggedIn&&this.props.loggedIn&&this.getSecureData()}clearTocCollectionOverrides(){const{clearTocCollectionOverrides:e,crossLinkMode:t}=this.props;!t&&e()}async getSecureData(){const{annotationsOutOfService:e,asyncCheckLogin:t,crossLinkMode:n,getBookmarks:o,getSets:r,loggedIn:a}=this.props,i=!e&&!n;(a||await t())&&i&&(o(),r())}render(){return(0,m.jsx)(E,{...this.props})}}const O=(0,a.EN)(T(w))},76484:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(67294),r=n(86706),a=n(6267),i=n(16550),s=n(23810),l=n(66527),c=n(85893);const d=(0,s.ZP)({resolved:{},chunkName:e=>"error",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:e=>n.e(41).then(n.bind(n,2877)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return n(t)},resolve(e){return 2877}},{fallback:(0,c.jsx)(l.Z,{})}),u=(e,t)=>({status:e.system.status,selectErrorByStatus:(0,a.yu)(e),location:t.location}),h=(e,t,n)=>({...n,...e,...t}),p=(0,r.$j)(u,null,h),f=e=>{let{status:t,...n}=e;return(0,c.jsx)(d,{...n,status:200!==t?t:404})},g=(0,o.memo)(f,((e,t)=>t.loading)),m=(0,i.EN)(p(g))},38111:(e,t,n)=>{n.d(t,{Z:()=>N});var o=n(67294),r=n(86706),a=n(16550),i=n(63927),s=n(23810),l=n(39516),c=n(38901),d=n(98306),u=n(18327),h=n(6267),p=n(1577),f=n(35404),g=n(33065),m=n(66527),v=n(10956),y=n.n(v),S=n(85893);const E=(0,s.ZP)({resolved:{},chunkName:e=>"reader",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:e=>Promise.all([n.e(882),n.e(88),n.e(201),n.e(285),n.e(297),n.e(680),n.e(133),n.e(278),n.e(329),n.e(262),n.e(916),n.e(347),n.e(942),n.e(207)]).then(n.bind(n,67577)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return n(t)},resolve(e){return 67577}},{fallback:(0,S.jsx)(m.Z,{})}),b=(e,t)=>{const n=t.location,o=(0,h.uo)(e,n);return{activeAnnotation:(0,h.$g)(e),activeSetId:(0,h.h0)(e),activePanel:(0,h.p2)(e),annotations:(0,h.uS)(e,n),annotationsInitialized:(0,h.wE)(e,n),annotationsOutOfService:(0,h.y8)(e),associatedMedia:(0,h.HK)(e,n),audio:(0,h.HM)(e,n),book:o,bookmarks:(0,h.Ed)(e),content:(0,h.au)(e,n),coreContentUri:(0,f.on)(n.pathname),downloads:(0,h.NK)(e,n),dir:e.system.dir,docId:(0,h.ke)(e,n),editorPanelOpen:(0,h.r8)(e,n),floatingPanels:(0,h.Qw)(e,n),folders:(0,h.B5)(e),footnotes:(0,h._b)(e,n),footnotesHidden:e.localSettings.footnotesHidden,i18n:e.i18n,initialContent:e.reader.initialContent,lang:e.system.lang,location:n,loggedIn:(0,h.gs)(e),meta:(0,h.au)(e,n).meta,selectI18nStringById:(0,h.I3)(e),sidePanelActive:(0,h.vQ)(e),loadedStyles:(0,h.FR)(e),system:e.system,tags:(0,h.a0)(e),template:(0,h.hY)(e,n)}},I=y()(((e,t)=>({getCrossRefData:n=>e.getCrossRefData({lang:t,...n}),getFootnoteData:(n,o)=>e.getFootnoteData(n,{lang:t,...o}),getI18nData:()=>e.getI18nData({lang:t})}))),T=(e,t,n)=>{const o=e.lang;return{...n,...e,...t,...I(t,o)}},w=(0,r.$j)(b,{addFloatingPanel:u.Vh,asyncCheckLogin:c.fo,changeActiveAnnotation:l.uG,checkLogin:c.Xx,clearFloatingPanels:u.fy,createFolder:l.L6,getCrossRefData:u.ln,getFootnoteData:u.p5,getI18nData:d.Mx,removeEditorPanel:u.c7,setActivePanel:u.dL,updateHighlightOffsets:l.KN},T),O=e=>{const{activeSetId:t,annotationsOutOfService:n,asyncCheckLogin:a,book:s,content:c,checkLogin:d,crossLinkMode:u,docId:h,lang:f,loading:g,location:{pathname:m},loggedIn:v}=e;(0,i.nw)((()=>{d()})),(0,o.useEffect)((()=>{!u&&c.content&&p.Z.firePageViewEvent(a,{page:{info:{language:f},category:{primary:s.category,type:"content"}}})}),[c]);const y=(0,r.I0)(),b=(0,o.useRef)(),I=(0,o.useRef)(),T=(0,o.useRef)(),w=(0,o.useRef)(),O=!n&&v&&!g&&!u;return(0,o.useEffect)((()=>{const e=w.current!==t,n=b.current!==s.uri,o=I.current!==h,r=T.current!==f;O&&(w.current=t,b.current=s.uri,I.current=h,T.current=f,r?(y((0,l.oE)()),y((0,l.xh)()),y((0,l.ki)()),y((0,l.NJ)()),y((0,l._Y)(m))):e?(y((0,l.xh)()),y((0,l._Y)(m))):(n&&(y((0,l.oE)()),y((0,l.xh)()),y((0,l.ki)()),y((0,l.NJ)())),o&&y((0,l._Y)(m))))}),[t,O,s.uri,h,f,m,y]),(0,S.jsx)(E,{...e})},_=(0,o.memo)(O,((e,t)=>(0,g.xb)(t.content))),N=(0,a.EN)(w(_))},85326:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(86706),r=n(6267),a=n(23303);const i=(0,o.$j)(((e,t)=>({loadedStyles:(0,r.FR)(e),currentLinks:(0,r.ik)(e)})),a,((e,t,n)=>({...e,...t,...n})))},37720:(e,t,n)=>{n.d(t,{$g:()=>M,B5:()=>S,Bc:()=>v,Ct:()=>K,Ed:()=>q,Er:()=>k,FX:()=>Y,Iq:()=>T,Of:()=>_,Tu:()=>w,UJ:()=>N,W_:()=>F,Wp:()=>ne,Xm:()=>I,Z9:()=>f,a0:()=>b,fx:()=>h,h0:()=>P,it:()=>J,ke:()=>u,p0:()=>Q,ph:()=>p,rp:()=>E,sJ:()=>g,uS:()=>B,wE:()=>C,wv:()=>V,zA:()=>te});var o=n(89676),r=n(33065),a=n(2898),i=n(10956),s=n.n(i),l=n(36976),c=n(55398);const d=[],u=(0,c.P)([a.au],(e=>{var t,n;return(null==e||null===(t=e.meta)||void 0===t||null===(n=t.pageAttributes)||void 0===n?void 0:n["data-aid"])||""})),h=(0,c.P)([a.au],(e=>{var t,n;return(null==e||null===(t=e.meta)||void 0===t||null===(n=t.pageAttributes)||void 0===n?void 0:n["data-aid-version"])||""})),p=(0,c.P)([a.au],(e=>{var t;return(null==e||null===(t=e.meta)||void 0===t?void 0:t.title)||""})),f=(0,c.P)([a.uo],(e=>e.title)),g=e=>e.annotations.activeAnnotation,m=e=>e.annotations.annotations,v=e=>{let t=g(e);return m(e)[t]},y=e=>e.annotations.refs,S=e=>e.annotations.folders,E=(e,t)=>S(e)[t],b=e=>e.annotations.tags,I=(e,t)=>b(e)[t],T=(e,t)=>{var n;return null===(n=I(e,t))||void 0===n?void 0:n.name},w=e=>e.annotations.sets,O=(0,c.P)([w],(e=>{const t=e.map((e=>[e.id,e]));return new Map(t)})),_=(0,c.P)([e=>e.annotations.setOrder,O],((e,t)=>e.map((e=>t.get(e))))),N=(e,t)=>O(e).get(t),k=e=>{const t=P(e);return N(e,t)},P=e=>e.annotations.activeSetId,C=(0,c.P)([e=>e.annotations.initialized,(e,t)=>(0,a.hJ)(t)],((e,t)=>e[t])),j=(0,c.P)([m,P],((e,t)=>Object.entries(e).filter((e=>{let[n,o]=e;return t===o.setId})).reduce(l.qX,{}))),A=(0,o.b0)([m,S,b],((e,t,n)=>({...e,folders:(0,r.xb)(t)?[]:e.folders.map((e=>t[e])),tags:(0,r.xb)(n)?[]:e.tags.map((e=>n[e]))}))),L=(0,o.b0)([j,S,b],((e,t,n)=>({...e,folders:(0,r.xb)(t)?[]:e.folders.map((e=>t[e])),tags:(0,r.xb)(n)?[]:e.tags.map((e=>n[e]))}))),x=["highlight","reference"],D=(0,c.P)([L],(e=>(0,r.D9)(e,(e=>{let{type:t}=e;return x.includes(t)})))),$=(0,o.b0)([e=>e.annotations.highlights],(e=>(0,r.D9)(e))),R=(0,o.b0)([y,a.b5],((e,t)=>({reference:t[`/${e.lang}${e.uri}`],...e}))),H=(0,o.b0)([D,$,R,a.b5],((e,t,n,o)=>{var r,a;const i=(()=>{let e={};return t=>(e[t]=(e[t]||0)+1,`${t}_${e[t]}`)})(),{lang:s,highlightUri:l}=e,c=o[`/${s}${l}`]||{},d=e.highlights.map((e=>t[e])),u=e.refs.map((e=>({...n[e],key:i(e)})));return{...e,highlights:d,icon:d[0].icon,marker:(null==c||null===(r=c.content)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.displayId)||"",reference:c,refs:u}})),U=s()((e=>t=>e[t]||null)),F=(e,t)=>{const n=H(e),o=U(n);return t?o(t):o},M=e=>{const t=g(e);return t?F(e,t):null},B=(0,c.P)([H,u],((e,t)=>(0,r.D9)(e,(e=>e.docId===t)))),V=(0,c.P)([B],(e=>Object.values(e).reduce(((e,t)=>e.concat(t.highlights)),d))),Z=(0,c.P)([e=>e.annotations.bookmarkOrder],(e=>e.map((e=>{let{annotationId:t}=e;return t})))),W=e=>{let{name:t,publication:n,reference:o}=e;return t===o?n:o},J=(0,c.P)([e=>e.annotations.bookmarks],(e=>Object.entries(e).map((e=>{let[t,n]=e;return[t,{...n,context:W(n)}]})).reduce(l.qX,{}))),G=s()((e=>t=>e[t]||null)),K=(e,t)=>{const n=J(e),o=G(n);return t?o(t):o},q=(0,c.P)([Z,J],((e,t)=>e.map((e=>t[e])))),Y=e=>{const t=g(e);return t?K(e,t):null},z=s()((e=>t=>Object.values(e).filter((e=>e.pid===t)))),Q=(e,t)=>{const n=J(e),o=z(n);return t?o(t):o},X=(0,c.P)([A],(e=>(0,r.D9)(e,(e=>{let{type:t}=e;return"bookmark"===t})))),ee=(0,o.b0)([X,J],((e,t)=>({...e,bookmark:t[e.id]}))),te=(e,t)=>ee(e)[t],ne=(0,c.P)([M,R],((e,t)=>{const{refs:n=[]}=e||{};return n.map((e=>t[e.pid]))}))},6267:(e,t,n)=>{n.d(t,{$g:()=>o.$g,A$:()=>a.A$,B5:()=>o.B5,Bc:()=>o.Bc,Ct:()=>o.Ct,DV:()=>r.DV,EU:()=>r.EU,Ed:()=>o.Ed,Er:()=>o.Er,FR:()=>a.FR,FX:()=>o.FX,HK:()=>a.HK,HM:()=>a.HM,I3:()=>a.I3,IK:()=>a.IK,IT:()=>a.IT,Iq:()=>o.Iq,JU:()=>a.JU,LH:()=>a.LH,N$:()=>a.N$,NK:()=>a.NK,Nm:()=>a.Nm,Of:()=>o.Of,Pu:()=>a.Pu,Qw:()=>r.Qw,RU:()=>a.RU,S6:()=>a.S6,Tu:()=>o.Tu,UJ:()=>o.UJ,W_:()=>o.W_,Wd:()=>a.Wd,Wp:()=>o.Wp,Xm:()=>o.Xm,Z2:()=>a.Z2,Z9:()=>o.Z9,_b:()=>a._b,_q:()=>a._q,a0:()=>o.a0,ae:()=>a.ae,al:()=>a.al,au:()=>a.au,b5:()=>a.b5,bK:()=>a.bK,eZ:()=>r.eZ,fG:()=>a.fG,fx:()=>o.fx,g6:()=>a.g6,gs:()=>a.gs,h0:()=>o.h0,hY:()=>a.hY,ik:()=>a.ik,ke:()=>o.ke,ld:()=>a.ld,lf:()=>a.lf,n6:()=>a.n6,n7:()=>a.n7,p0:()=>o.p0,p2:()=>r.p2,pW:()=>a.pW,ph:()=>o.ph,qp:()=>a.qp,r8:()=>r.r8,rE:()=>a.rE,rp:()=>o.rp,sJ:()=>o.sJ,so:()=>a.so,sr:()=>a.sr,t0:()=>a.t0,uS:()=>o.uS,uo:()=>a.uo,vK:()=>a.vK,vQ:()=>r.vQ,wE:()=>o.wE,wv:()=>o.wv,xR:()=>a.xR,x_:()=>a.x_,y8:()=>a.y8,yu:()=>a.yu});var o=n(37720),r=n(89198),a=n(2898)},2898:(e,t,n)=>{n.d(t,{A$:()=>X,FR:()=>z,HK:()=>U,HM:()=>R,I3:()=>v,IK:()=>M,IT:()=>oe,JU:()=>se,LH:()=>O,N$:()=>ce,NK:()=>G,Nm:()=>F,Pu:()=>ie,RU:()=>ae,S6:()=>Q,Wd:()=>re,Z2:()=>ue,_b:()=>H,_q:()=>J,ae:()=>g,al:()=>h,au:()=>L,b5:()=>m,bK:()=>te,fG:()=>pe,g6:()=>ne,gs:()=>p,hJ:()=>T,hY:()=>x,ik:()=>Y,ld:()=>K,lf:()=>y,n6:()=>$,n7:()=>ee,pW:()=>_,qp:()=>he,rE:()=>D,so:()=>u,sr:()=>le,t0:()=>de,uo:()=>W,vK:()=>f,xR:()=>V,x_:()=>q,y8:()=>d,yu:()=>E});var o=n(84639),r=n(36976),a=n(55398),i=n(35404),s=n(33065);const{APP_PATHNAME:l,ALLOW_STRING_FALLBACK:c}=(0,o.U2)(),d=e=>e.system.annotationsOutOfService,u=(e,t)=>t?"string"==typeof t?(0,r.Cz)(t).lang:(0,i.LM)(t.search).lang:e.system.lang,h=e=>e.system.loggedIn,p=e=>{let t=h(e);return!(0,s.tI)(t)&&!!t},f=e=>e.system.cssRules,g=(0,a.P)([f,(e,t)=>`/${B(e,t).split("/").slice(2).join("/")}`],((e,t)=>e.filter((e=>{let{matches:n}=e;return n.some((e=>t.startsWith(e)))})).pop().styles.map((e=>({type:"array",rel:"stylesheet","orig-type":"text/css",href:e}))))),m=e=>e.coreContent,v=(0,a.P)([e=>e.i18n[u(e)]||{},e=>e.i18n.eng||{},e=>e.preview],((e,t,n)=>o=>{var r,a;return(null===(r=e[o])||void 0===r?void 0:r.text)||(null===(a=t[o])||void 0===a?void 0:a.text)||(n||parseInt(c)?o:"")})),y=(0,a.P)([e=>e.i18n[u(e)]||{},e=>e.i18n.eng||{},e=>e.preview],((e,t,n)=>o=>{var r,a;return(null===(r=e[o])||void 0===r?void 0:r.href)||(null===(a=t[o])||void 0===a?void 0:a.href)||(n||parseInt(c)?o:"")})),S={401:{titleKey:"unauthorizedErrorTitle",descKey:"unauthorizedErrorDesc"},404:{titleKey:"pageNotFoundTitle",descKey:"pageNotFoundDesc"},500:{titleKey:"serviceNotAvailableTitle",descKey:"serviceNotAvailableDesc"},other:{titleKey:"otherTitle",descKey:"otherDesc",showStatus:!0}},E=(0,a.P)([v],(e=>t=>{const{titleKey:n,descKey:o,showStatus:r}=S[t]||S.other;return{title:e(n),desc:e(o),statusCode:r?`${e("statusCodeLabel")} ${t}`:""}})),b={isDefault:!0},I=new RegExp(`^(${l})(/?$)`),T=e=>(0,r.nH)((0,i.Fr)(e.pathname).replace(I,"$1/lib"),(0,i.LM)(e.search).lang),w=e=>"string"==typeof e?e:T(e),O=(e,t)=>e.library[w(t)]||b,_=(0,a.P)([O,v,u],((e,t,n)=>{const{breadCrumbs:o=[],sections:r=[],...a}=e;return{breadCrumbs:o,canonicalUrl:a.uri?`${(0,i.Qj)(a.uri)}?lang=${n}`:`/lib?lang=${n}`,title:t("defaultLibraryBreadCrumb"),uri:`${l}/lib`,...a,sections:r}})),N={},k=[],P={},C={},j=[],A={},L=(e,t)=>{let n=((e,t)=>{let n=w(t);return e.reader.contentStore[n]||P})(e,t);return n.redirect?L(e,n.redirect):n},x=(e,t)=>{var n;const o=L(e,t);if(!o.content)return;const r=(null===(n=o.content.head.links[0])||void 0===n?void 0:n.href)||"",a=r.split("/");let i;return r.includes("global-template")?i=a[a.length-1].split("_")[2]:/_contents|_manifest/.test(o.meta.pageAttributes["data-uri"])&&(i="contents/manifest"),i},D=(e,t)=>{const n=L(e,t);if(n.content)return n.meta.scopedClassName||""},$=(e,t)=>{const n=V(e,t);return(null==n?void 0:n.contentType)||void 0},R=(0,a.P)([(e,t)=>{var n,o;return(null===(n=L(e,t))||void 0===n||null===(o=n.meta)||void 0===o?void 0:o.audio)||k}],(e=>(e=(e=>[].concat(e))(e)).length?e.map((e=>({name:e.variant,source:e.mediaUrl,fileSize:e.fileSize,duration:e.duration}))):void 0)),H=(0,a.P)([(e,t)=>{var n,o;return(null===(n=L(e,t))||void 0===n||null===(o=n.content)||void 0===o?void 0:o.footnotes)||C},m,u],((e,t,n)=>{const o=e=>{let{href:o,text:a}=e,{referenceURI:s,referenceURIDisplayText:l=a,...c}=t[(0,r.nH)(o.split(/[?#]/)[0],n)]||{};return s=(0,i.aq)(s||o),{referenceURI:s,referenceURIDisplayText:l,...c}};return Object.entries(e).reduce(((e,t)=>{let[n,r]=t;return{...e,[n]:{...r,references:(r.referenceUris||[]).map(o)}}}),{})})),U=(e,t)=>{var n,o;return(null===(n=L(e,t))||void 0===n||null===(o=n.content)||void 0===o?void 0:o.associated)||N},F=(e,t)=>L(e,t).pids,M=(e,t)=>{var n,o;return(null===(n=F(e,t))||void 0===n||null===(o=n[1])||void 0===o?void 0:o[0])||null},B=(0,a.P)([L,(e,t)=>w(t)],((e,t)=>{var n,o;let a=e.tableOfContentsUri,i=null==e||null===(n=e.meta)||void 0===n||null===(o=n.pageAttributes)||void 0===o?void 0:o.lang;return a?(0,r.nH)(a,i):t})),V=(0,a.P)([B,e=>e.reader.bookStore],((e,t)=>{let n=t[e];return n||(n=t[e=Object.keys(t).sort(((e,t)=>e.length-t.length)).find((t=>e.includes(`${t}/`)||t===e))]),n||A})),Z=(e,t)=>[...e,...t.content?[t.content.uri]:"content"===t.section.type?[t.section.uri].concat(t.section.childUris):t.section.childUris],W=(0,a.P)([V],(e=>({...e,navList:(e.entries||[]).reduce(Z,j)}))),J=(0,a.P)([V],(e=>e.title)),G=(0,a.P)([V,(e,t)=>{var n,o;return null===(n=L(e,t))||void 0===n||null===(o=n.meta)||void 0===o?void 0:o.pdf},R],(function(e,t){let{pdfDownloads:n=[],fullBookAudio:o}=e,r=[o,...arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],...n,t].filter((e=>e&&e.name&&e.source));return r.length?r:void 0})),K=(0,a.P)([_,L,W],((e,t,n)=>e.status&&n.status&&t.status?e.status:200)),q=(e,t)=>{const n=_(e,t),o=L(e,t),r=W(e,t);return n.noIndex||r.noIndex||o.noIndex},Y=(0,a.P)([e=>e.styles.styleSheets],(e=>Object.values(e))),z=e=>e.styles.loadedStyles,Q=e=>e.localSettings.defaultStyle,X=e=>e.localSettings.fontSansSerif,ee=e=>e.localSettings.fontSize,te=e=>e.localSettings.footnotesHidden,ne=e=>e.localSettings.printHighlights,oe=e=>e.localSettings.disableImages,re=e=>e.localSettings.disableVideos,ae=e=>e.localSettings.showArchivedContent,ie=e=>e.localSettings.theme,se=e=>e.notifications.notifications,le=e=>e.notifications.toast,ce=e=>e.notifications.seenNotifications,de=(e,t)=>{const n=se(e);return null==n?void 0:n.find((e=>{let{id:n}=e;return n===t}))},ue=e=>e.notifications.showLowServiceBanner,he=e=>e.notifications.visibleNotifications,pe=(e,t)=>{const n=L(e,t),o=se(e),r=ce(e)||[];if(!Array.isArray(o))return;const a=o.filter((e=>{let{id:t,locatorIds:n=[]}=e;const o=!r.includes(t),a=!n.some((e=>e.startsWith("trigger-")));return o&&a})),i=a.filter((e=>!e.referenceList)),s=a.filter((e=>e.referenceList)).filter((e=>{let{referenceList:n}=e;return n.filter((e=>e.includes(`${t.pathname}?`))).length}));return n?s.concat(i):s}},89198:(e,t,n)=>{n.d(t,{DV:()=>m,EU:()=>f,Qw:()=>y,eZ:()=>g,p2:()=>h,r8:()=>v,vQ:()=>p});var o=n(37720),r=n(2898),a=n(89676),i=n(36976),s=n(55398);const l=(e,t,n,o)=>{let r=n.get(e);return n.set(e,{...r,[t]:[...r[t]||[],o]})},c=e=>e.sidePanel[(0,i.yN)()],d=[],u=e=>{const t=c(e);return(null==t?void 0:t.floatingPanels)||d},h=e=>{const t=c(e);return null==t?void 0:t.activePanel},p=e=>{const t=h(e),n=u(e);return!!(t||null!=n&&n.length)},f=e=>{const t=c(e);return null==t?void 0:t.activeSubPanel},g=e=>{const t=c(e);return null==t?void 0:t.focusOnMount},m=(0,s.P)([o.uS,r._b,r.HK,r.Nm],((e,t,n,o)=>{if(!o)return{loading:!0,relatedContentItems:[]};return o=new Map(o),Object.values(n).forEach((e=>{o=l(e[0].pid,"associatedMedia",o,e)})),Object.values(e).sort(((e,t)=>e.highlights[0].startOffset-t.highlights[0].startOffset)).forEach((e=>{(e.note.title||e.note.content||e.tags.length||e.folders.length||e.refs.length)&&(o=l(e.highlights[0].pid,"annotations",o,e))})),Object.values(t).forEach((e=>{o=l(e.pid,"footnotes",o,e)})),{relatedContentItems:Array.from(o.values()).filter((e=>e.annotations||e.footnotes||e.associatedMedia))}})),v=(0,s.P)([u],(e=>e.some((e=>{let{type:t}=e;return"editor"===t})))),y=(0,a.UZ)([u,o.uS,r._b,o.it,r.b5,e=>e.reader,r.I3,r.HK],((e,t,n,o,r,a,i,s)=>{const l=e=>{switch(e.type){case"annotation":case"highlight":{const n=t[e.id];return n?{Component:"AnnotationPanel",content:n,id:e.id,key:e.key,title:i("annotationNoteTitle"),testId:"notes"}:null}case"associatedMedia":return{Component:"AssociatedMediaPanel",content:{associatedMedia:s[e.id]},id:e.id,key:e.key,title:i("associatedMediaTitle"),testId:"associated-content"};case"crossRef":{let t=r[e.id]||{content:[]},n=a.contentStore[e.id];if(n)n.redirect&&(n=a.contentStore[n.redirect]);else{let t=a.bookStore[e.id]||{},o=e.id.replace(/(^\/[^/]+?)\/.+$/,`$1${t.firstContentUri}`);n=a.contentStore[o]}return t.content.length||(t={...t,chapterContent:n}),{Component:"CrossRefPanel",content:t,id:e.id,key:e.key,title:i("referenceTitle"),testId:"cross-ref"}}case"footnote":{const t=n[e.id];return{Component:"FootnotePanel",content:t,id:e.id,key:e.key,title:`${t.marker} ${t.context||""}`.trim(),testId:"footnotes"}}case"bookmark":{const t=o[e.id];return{Component:"Bookmark",content:t,id:e.id,key:e.key,title:t.name,testId:"bookmark"}}case"disambiguation":return{Component:"DisambiguationPanel",content:{relatedContentItems:e.panels.reduce(((e,t)=>(t=l(t))?[...e,t]:e),[])},id:e.id,key:e.key,title:i("disambiguationTitle"),testId:"disambiguation"};case"editor":return{Component:"EditorPanel",content:{annotationId:e.annotationId,autoFocus:e.autoFocus},id:e.id,key:e.key,title:e.title,testId:"editor-panel",...e};case"moveAnnotationToSet":return{Component:"MoveAnnotationToSetPanel",content:{annotationId:e.annotationId},id:e.id,key:e.key,title:e.title,testId:"move-annotation-to-set"};default:return e}};return l(e)}))},26247:(e,t,n)=>{n.d(t,{DH:()=>j,Dl:()=>l,G_:()=>y,Ih:()=>u,KN:()=>S,L6:()=>w,NJ:()=>N,NM:()=>C,Qk:()=>g,_E:()=>f,_U:()=>h,cg:()=>m,fy:()=>c,kB:()=>P,kc:()=>I,ki:()=>k,ln:()=>_,mf:()=>E,oE:()=>b,oN:()=>d,pc:()=>v,sS:()=>T,tc:()=>p,ud:()=>s,xh:()=>O});n(94301);var o=n(42139),r=n(84639),a=n(35404);const{ANNOTATIONS_API:i}=(0,r.U2)(),s=(e,t)=>{const n=`${i}/notes/api/v3/annotations`;let r={method:"POST",mode:"cors",compress:!0,credentials:"include",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},redirect:"manual"};return r=(0,o.f)(r,t),fetch(n,r).then((e=>e.ok?e.json():Promise.reject(e)))},l=(e,t)=>{const n=`${i}/notes/api/v3/annotations/${e}`;let r={method:"DELETE",mode:"cors",compress:!0,credentials:"include",redirect:"manual"};return r=(0,o.f)(r,t),fetch(n,r).then((t=>t.ok?e:Promise.reject(t)))},c=function(){let{docId:e,types:t=[],lang:n,contentVersion:r,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=arguments.length>1?arguments[1]:void 0;const c=(0,a.pE)({contentVersion:r,docId:e,type:t.join(",")||void 0,locale:n,notesAsHtml:!0,...s}),d=`${i}/notes/api/v3/annotations${c}`;let u={method:"GET",mode:"cors",compress:!0,credentials:"include",redirect:"manual"};return u=(0,o.f)(u,l),fetch(d,u).then((e=>e.ok?e.json():Promise.reject(e)))},d=(e,t,n)=>{const r=`${i}/notes/api/v3/annotations/${e}/folders`;let a={method:"PATCH",credentials:"include",compress:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify({folders:[t]}),redirect:"manual"};return a=(0,o.f)(a,n),fetch(r,a).then((e=>e.ok?e.json():Promise.reject(e)))},u=(e,t,n)=>{const r=`${i}/notes/api/v3/annotations/${e}/folders/${t}`;let a={method:"DELETE",credentials:"include",compress:!0,headers:{"Content-Type":"application/json"},redirect:"manual"};return a=(0,o.f)(a,n),fetch(r,a).then((e=>e.ok?e.json():Promise.reject(e)))},h=(e,t,n)=>{const r=`${i}/notes/api/v3/annotations/${e}/tags`;let a={method:"PATCH",mode:"cors",compress:!0,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags:[t]}),redirect:"manual"};return a=(0,o.f)(a,n),fetch(r,a).then((e=>e.ok?e.json():Promise.reject(e)))},p=(e,t,n)=>{const r=`${i}/notes/api/v3/annotations/${e}/tags/${t}`;let a={method:"DELETE",mode:"cors",compress:!0,credentials:"include",headers:{"Content-Type":"application/json"},redirect:"manual"};return a=(0,o.f)(a,n),fetch(r,a).then((e=>e.ok?e.json():Promise.reject(e)))},f=s,g=(e,t,n)=>{const r=`${i}/notes/api/v3/annotations/${e}/note`;let a={method:"PATCH",mode:"cors",compress:!0,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),redirect:"manual"};return a=(0,o.f)(a,n),fetch(r,a).then((e=>e.ok?e.json():Promise.reject(e)))},m=(e,t,n)=>{const r=`${i}/notes/api/v3/annotations/${e}/set`;let a={method:"PATCH",body:JSON.stringify({annotationId:e,setId:t}),mode:"cors",compress:!0,credentials:"include",headers:{"Content-Length":0,"Content-Type":"application/json"},redirect:"manual"};return a=(0,o.f)(a,n),fetch(r,a).then((e=>e.ok?e.json():Promise.reject(e)))},v=(e,t,n)=>{const r=`${i}/notes/api/v3/annotations/${e}/reference/${t.pid}`;let a={method:"PUT",mode:"cors",compress:!0,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),redirect:"manual"};return a=(0,o.f)(a,n),fetch(r,a).then((e=>e.ok?e.json():Promise.reject(e)))},y=(e,t,n)=>{const r=`${i}/notes/api/v3/annotations/${e}/reference/${t}`;let a={method:"DELETE",mode:"cors",compress:!0,credentials:"include",headers:{"Content-Type":"application/json"},redirect:"manual"};return a=(0,o.f)(a,n),fetch(r,a).then((e=>e.ok?e.json():Promise.reject(e)))},S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;const r=`${i}/notes/api/v3/annotations/${e}/offsets`;let a={method:"PUT",mode:"cors",compress:!0,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),redirect:"manual"};return a=(0,o.f)(a,n),fetch(r,a).then((e=>e.ok?e.json():Promise.reject(e)))},E=(e,t,n)=>{const r=`${i}/notes/api/v3/annotations/${e}/style`;let a={method:"PUT",mode:"cors",compress:!0,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),redirect:"manual"};return a=(0,o.f)(a,n),fetch(r,a).then((e=>e.ok?e.json():Promise.reject(e)))},b=function(){let{docId:e,lang:t,contentVersion:n,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const l=(0,a.pE)({contentVersion:n,docId:e,locale:t,notesAsHtml:!0,...r}),c=`${i}/notes/api/v3/bookmarks${l}`;let d={method:"GET",mode:"cors",compress:!0,credentials:"include",redirect:"manual"};return d=(0,o.f)(d,s),fetch(c,d).then((e=>e.ok?e.json():Promise.reject(e)))},I=(e,t)=>{const n=`${i}/notes/api/v3/bookmarks/order`;let r={method:"PUT",mode:"cors",compress:!0,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),redirect:"manual"};return r=(0,o.f)(r,t),fetch(n,r).then((e=>e.ok?e.json():Promise.reject(e)))},T=(e,t,n)=>{let{uri:r,pid:a,offset:s,name:l,docId:c,sort:d}=t;const u=`${i}/notes/api/v3/annotations/${e}/bookmark`;let h={method:"PATCH",mode:"cors",compress:!0,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l,uri:r,pid:a,offset:s,docId:c,sort:d}),redirect:"manual"};return h=(0,o.f)(h,n),fetch(u,h).then((e=>e.ok?e.json():Promise.reject(e)))},w=(e,t)=>{const n=`${i}/notes/api/v3/folders`;let r={method:"POST",body:JSON.stringify([e]),credentials:"include",compress:!0,headers:{"Content-Type":"application/json"},redirect:"manual"};return r=(0,o.f)(r,t),fetch(n,r).then((e=>e.ok?e.json():Promise.reject(e)))},O=(e,t)=>{let{setId:n="default",...r}=e;n=null===n?"default":n;const s=(0,a.pE)({setId:n,...r}),l=`${i}/notes/api/v3/folders${s}`;let c={method:"GET",mode:"cors",compress:!0,credentials:"include",redirect:"manual"};return c=(0,o.f)(c,t),fetch(l,c).then((e=>e.ok?e.json():Promise.reject(e)))},_=(e,t)=>{const n=`${i}/notes/api/v3/tags`;let r={method:"POST",body:JSON.stringify([e]),credentials:"include",compress:!0,headers:{"Content-Type":"application/json"},redirect:"manual"};return r=(0,o.f)(r,t),fetch(n,r).then((e=>e.ok?e.json():Promise.reject(e)))},N=e=>{const t=`${i}/notes/api/v3/tags`;let n={method:"GET",mode:"cors",compress:!0,credentials:"include",redirect:"manual"};return n=(0,o.f)(n,e),fetch(t,n).then((e=>e.ok?e.json():Promise.reject(e)))},k=e=>{const t=`${i}/notes/api/v3/sets`;let n={method:"GET",mode:"cors",compress:!0,credentials:"include",redirect:"manual"};return n=(0,o.f)(n,e),fetch(t,n).then((e=>e.ok?e.json():Promise.reject(e)))},P=(e,t)=>{const n=`${i}/notes/api/v3/sets/${e}`;let r={method:"DELETE",mode:"cors",compress:!0,credentials:"include",redirect:"manual"};return r=(0,o.f)(r,t),fetch(n,r).then((e=>e.ok?e.json():Promise.reject(e)))},C=(e,t)=>{const n=`${i}/notes/api/v3/sets/order`;let r={method:"PUT",mode:"cors",compress:!0,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),redirect:"manual"};return r=(0,o.f)(r,t),fetch(n,r).then((e=>e.ok?e.json():Promise.reject(e)))},j=(e,t,n)=>{const r=`${i}/notes/api/v3/sets/${e}`;let a={method:"PATCH",mode:"cors",compress:!0,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),redirect:"manual"};return a=(0,o.f)(a,n),fetch(r,a).then((e=>e.ok?e.json():Promise.reject(e)))}},10584:(e,t,n)=>{n.d(t,{G4:()=>S,Z$:()=>h,tO:()=>f,uJ:()=>m,cl:()=>v,b8:()=>g,nZ:()=>E,sL:()=>p,o:()=>y});var o=n(32428),r=(n(94301),n(84639)),a=n(50681);const{APP_API:i}=(0,r.U2)(),s=function(e){let{source:t="core"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return`${i}/${t}/${e}`};var l=n(42139),c=n(35404);const{APP_PATHNAME:d}=(0,r.U2)(),u=(e,t,n)=>{let o=s(e,{source:"language-pages"}),r=t.uri,i={method:"GET",mode:"cors",compress:!0,credentials:"include",headers:{correlationToken:(0,a.Z)(),accept:"application/json"}};return i=(0,l.v)(i,n),r&&(t.uri=(0,c.Qj)(t.uri),t.uri=(0,c.Fr)(t.uri)),fetch(`${o}${(0,c.pE)(t)}`,i).then((e=>e.ok?e.json():Promise.reject(e))).then((e=>((0,c.U9)(e,"uri",d),Promise.resolve(e)))).catch((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{status:n,statusText:o}=e;if(401===n){const{verified:r}=await e.json();return Promise.reject({uri:(0,c.aq)(t.uri),status:n,message:o,verified:r})}return Promise.reject({uri:(0,c.aq)(t.uri),status:n,message:o})}))},h=(e,t)=>u("type/content",e,t),p=(e,t)=>u("type/toc",e,t),f=(e,t)=>u("type/dynamic",e,t),g=(e,t)=>u("type/collection",e,t),m=(e,t)=>u("pubHub/home",e,t),v=(e,t)=>u("misc/resources",e,t).catch((e=>500===e.status?{error:{},general:{}}:Promise.reject(e))).then((e=>Object.values(e).reduce(((e,t)=>Object.assign(e,t)),{}))).catch((n=>{const r=(0,o.$1)(),a=r["lds-preferred-lang"]||r["lds-preferred-lang-v2"]||"eng";return e.lang!==a?v({...e,lang:a},t):Promise.reject(n)})).catch((n=>"eng"!==e.lang?v({...e,lang:"eng"},t):Promise.reject(n))),y=e=>u("misc/user-logged-in",{},e).catch((e=>Promise.resolve({loggedIn:!1}))),S=(e,t)=>u("misc/css-rules",e,t),E=(e,t)=>u("misc/notifications",e,t).catch((e=>[]))},59241:(e,t,n)=>{n.d(t,{J:()=>a});n(94301);var o=n(84639);const{APP_URL:r}=(0,o.U2)(),a=()=>fetch(`${r}/login/refresh`).then((e=>e.json()))},70426:(e,t,n)=>{n.r(t),n.d(t,{Alert:()=>g,Error:()=>m,ErrorAlert:()=>m,Info:()=>v,InfoAlert:()=>v,Modal:()=>b,ModalAlert:()=>b,Overlay:()=>E,OverlayAlert:()=>E,Success:()=>y,SuccessAlert:()=>y,Warn:()=>S,WarnAlert:()=>S});const o="alert-fJklh",r="basic-ul3ED";var a=n(94184),i=n.n(a),s=n(48096),l=n(974),c=n(58309),d=n(70138),u=n(38306),h=n(30024),p=n(80323),f=n(85893);const g=e=>{let{children:t,className:n,...a}=e;return(0,f.jsx)(s.Z,{className:i()(o,r,n),...a,children:t})},m=e=>{let{children:t,className:n,...r}=e;return(0,f.jsx)(l.Z,{className:i()(o,n),...r,children:t})},v=e=>{let{children:t,className:n,...r}=e;return(0,f.jsx)(c.Z,{className:i()(o,n),...r,children:t})},y=e=>{let{children:t,className:n,...r}=e;return(0,f.jsx)(d.Z,{className:i()(o,n),...r,children:t})},S=e=>{let{children:t,className:n,...r}=e;return(0,f.jsx)(u.Z,{className:i()(o,n),...r,children:t})},E=e=>{let{children:t,className:n,...r}=e;return(0,f.jsx)(h.Z,{className:i()(o,n),...r,children:t})},b=e=>{let{children:t,className:n,...r}=e;return(0,f.jsx)(p.Z,{className:i()(o,n),...r,children:t})}},39587:(e,t,n)=>{n.d(t,{gh:()=>v,hU:()=>y,KM:()=>m,kq:()=>g});var o=n(67294);const r="ghost-z1ycr",a="icon-RXkDY",i="primary-WjGqN",s="secondary-KsueD";var l=n(94184),c=n.n(l),d=n(20832),u=n(2316),h=n(36927),p=n(90456),f=n(85893);const g=(0,o.forwardRef)(((e,t)=>{let{className:n,...o}=e;return(0,f.jsx)(d.Z,{className:c()(n,s),...o,ref:t})})),m=(0,o.forwardRef)(((e,t)=>{let{className:n,...o}=e;return(0,f.jsx)(u.Z,{className:c()(n,i),...o,ref:t})})),v=(0,o.forwardRef)(((e,t)=>{let{className:n,...o}=e;return(0,f.jsx)(h.Z,{className:c()(n,r),...o,ref:t})})),y=(0,o.forwardRef)(((e,t)=>{let{className:n,...o}=e;return(0,f.jsx)(p.Z,{className:c()(n,a),...o,ref:t})}))},29650:(e,t,n)=>{n.d(t,{Rw:()=>h,l5:()=>p,hh:()=>f,yr:()=>g,ED:()=>m});const o="text-xr7T4";var r=n(94184),a=n.n(r),i=n(45846),s=n(28940),l=n(30565),c=n(39446),d=n(90551),u=n(85893);const h=e=>{let{children:t="",className:n,...r}=e;return(0,u.jsx)(i.Z,{className:a()(o,n),...r,children:t})},p=e=>{let{children:t="",className:n,...r}=e;return(0,u.jsx)(s.Z,{className:a()(o,n),...r,children:t})},f=e=>{let{children:t="",className:n,...r}=e;return(0,u.jsx)(l.Z,{className:a()(o,n),...r,children:t})},g=e=>{let{children:t="",className:n,...r}=e;return(0,u.jsx)(c.Z,{className:a()(o,n),...r,children:t})},m=e=>{let{children:t="",className:n,...r}=e;return(0,u.jsx)(d.Z,{className:a()(o,n),...r,children:t})}},5112:(e,t,n)=>{n.d(t,{$O:()=>p,CG:()=>d,Ef:()=>s,FM:()=>b,Rx:()=>m,Ue:()=>T,Xu:()=>f,a_:()=>u,du:()=>I,iQ:()=>l,xW:()=>E});var o=n(84639);const{STUDY_NOTEBOOK_URL:r}=(0,o.U2)(),a=e=>e&&Object.keys(e).length?e:void 0,i=e=>{let{annotationId:t,...n}=e;return{...n,id:t,folders:n.folders.map((e=>{let{folderId:t}=e;return t})),lang:n.locale,locale:void 0,note:n.note||{},setId:n.setId||null,tags:n.tags.map((e=>{let{tagId:t}=e;return t}))}},s=e=>{let{annotationId:t,...n}=e;return{...n,id:t,highlights:void 0,lang:n.locale,locale:void 0,bookmark:{...n.bookmark,annotationId:t}}},l=e=>e.map((e=>c(e))).filter((e=>{let{id:t}=e;return t})),c=e=>{let{folderId:t,...n}=e;return{id:t,...n}},d=e=>{let{setId:t,...n}=e;return{id:t,...n}},u=e=>{let{annotationsCount:t,created:n,tagId:o,name:a,timestamp:i}=e;return{annotationsCount:t,created:n,id:o,name:a,timestamp:i,href:`${r}/tags/${o}`}},h=e=>{let{color:t,style:n,...o}=e;return{...o,clear:"clear"===t,color:"clear"===t?"yellow":t,underline:"red_underline"===n||"red-underline"===n}},p=e=>{let{lang:t,locale:n,...o}=e;return{...o,key:o.pid,id:o.pid,href:"",lang:n||t}},f=e=>{var t;return{...i(e),highlights:(null==e||null===(t=e.highlights)||void 0===t?void 0:t.map(h))||[],refs:(e.refs||[]).map(p)}},g=e=>{let{name:t,offset:n,pid:o,sort:r,uri:a}=e;return{name:t,offset:n,pid:o,sort:r,uri:a}},m=e=>{let{startOffset:t,endOffset:n,pid:o,uri:r,color:a,clear:i,underline:s}=e;return{startOffset:t,endOffset:n,pid:o,uri:r,color:i?"clear":a,style:s?"red-underline":void 0}},v=e=>e.id,y=e=>e.name,S=e=>{let{name:t,uri:n,docId:o,pid:r,contentVersion:a,locale:i}=e;return{name:t,uri:n,docId:o,pid:r,contentVersion:a,locale:i}},E=e=>{var t;return{bookmark:a(e.bookmark)&&g(e.bookmark),contentVersion:e.contentVersion,device:e.device,docId:e.docId,folders:a(e.folders)&&e.folders.map(v),highlights:a(e.highlights)?e.highlights.map(m):void 0,annotationId:e.id,note:a(e.note),refs:a(null===(t=e.refs)||void 0===t?void 0:t.map(S)),source:e.source,setId:e.setId||void 0,tags:a(e.tags.map(y)),type:e.type,uri:e.uri,locale:e.lang}},b=e=>{let{id:t,...n}=e;return{folderId:t,...n}},I=e=>{let{id:t,href:n,...o}=e;return{tagId:t,...o}},T=e=>{let{id:t,...n}=e;return{setId:t,...n}}},1577:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(35404);const r={pageView:"Page View",productView:"Product View",addToCart:"Add to Cart",removeFromCart:"Remove from Cart",checkout:"Checkout",purchase:"Purchase",search:"Search",component:{click:"Component Click",share:"Share",formStart:"Form Start",formError:"Form Error",formSubmit:"Form Submit"}},a=()=>{var e;return window.digitalData=window.digitalData||[],window.digitalDataEvents={...r,...window.digitalDataEvents,component:{...r.component,...null===(e=window.digitalDataEvents)||void 0===e?void 0:e.component}},new Promise((e=>{"complete"===document.readyState?e():window.addEventListener("load",e)}))},i={firePageViewEvent:async(e,t)=>{var n;let{page:r={},user:i={},...s}=t;await a(),window.digitalData.push({event:window.digitalDataEvents.pageView,page:{...r,info:{name:(0,o.Qj)(window.location.pathname).slice(1).replace(/\//g,"|"),siteName:"Gospel Library Online",...null==r?void 0:r.info},category:{primary:"Gospel Library",...null==r?void 0:r.category}},user:{...i,profile:{...null==i?void 0:i.profile,info:{loginStatus:await e()?"signed in":"signed out",...null==i||null===(n=i.profile)||void 0===n?void 0:n.info}}},...s})},fireShareEvent:e=>{let{component:t={},...n}=e;a(),window.digitalData.push({event:window.digitalDataEvents.component.share,...n,component:{...t,category:{primary:"social media",...null==t?void 0:t.category}}})},fireSettingsEvent:e=>{let{component:t={},...n}=e;a(),window.digitalData.push({event:window.digitalDataEvents.component.click,...n,component:{...t,category:{primary:"settings",...null==t?void 0:t.category}}})},fireStudyToolsEvent:e=>{let{component:t={},...n}=e;a(),window.digitalData.push({event:window.digitalDataEvents.component.click,...n,component:{...t,category:{primary:"study tools",...null==t?void 0:t.category}}})},fireComponentClickEvent:e=>{let{component:t={},...n}=e;a(),window.digitalData.push({event:window.digitalDataEvents.component.click,component:{...t},...n})},fireAssociatedRelatedContentEvent:e=>{let{context:t,type:n}=e;a();const o=n?`-${n}`:"",r=n?" click":"";window.digitalData.push({event:window.digitalDataEvents.component.click,component:{info:{name:`${t} content${o}`},category:{primary:"study tools",type:`associated-related content${r}`}}})}}},32428:(e,t,n)=>{n.d(t,{$1:()=>s,Mz:()=>l});var o=n(84639),r=n(76276),a=(n(46489),n(36976));const{OAUTH_COOKIE_NAME:i}=(0,o.U2)(),s=()=>r.ZP?document.cookie.split("; ").map((e=>e.split("="))).reduce(a.qX,{}):{},l=(e,t)=>{const n=`${e}=;Path=${t};Domain=.churchofjesuschrist.org;Expires=Thu, 01 Jan 1970 00:00:01 GMT;`;document.cookie=n}},63927:(e,t,n)=>{n.d(t,{BH:()=>u,Be:()=>d,Fg:()=>c,N5:()=>h,NW:()=>i,V2:()=>p,nw:()=>l,rf:()=>s});var o=n(67294),r=n(86706),a=n(6267);const i=()=>{const[,e]=(0,o.useReducer)((e=>e+1),0);return e},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,o.useRef)(!0);(0,o.useEffect)((()=>{if(!n.current)return e();n.current=!1}),t)},l=e=>{(0,o.useEffect)(e,[])},c=e=>{const t=(0,r.v9)(a.Pu);(0,o.useEffect)((()=>{if(!e)return document.body.classList.add(t),()=>{document.body.classList.remove(t)}}),[t,e])},d=()=>(0,r.v9)(a.p0),u=()=>(0,r.v9)(a.yu),h=()=>(0,r.v9)(a.lf),p=()=>(0,r.v9)(a.I3)},42139:(e,t,n)=>{n.d(t,{f:()=>a,v:()=>r});const o="3.32.0",r=(e,t)=>t?{...e,headers:{...e.headers,...t}}:e,a=(e,t)=>(t={...t,"client-app-version":`GLO-${o}`},r(e,t))},19476:(e,t,n)=>{n.d(t,{j:()=>o});n(10584);const o=e=>["urd","ara","pes"].includes(e)?"rtl":"ltr"},60152:(e,t,n)=>{n.d(t,{P:()=>o,l:()=>r});const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=null;function o(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];n||(n=setTimeout((()=>{e(...r),n=null}),t))}return o.cancel=()=>{clearTimeout(n),n=null},o},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=null;const o=()=>{n=null};return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];n?clearTimeout(n):(n=setTimeout((()=>e(...a)),t),setTimeout(o,t))}}},36976:(e,t,n)=>{n.d(t,{Cz:()=>u,LM:()=>a,Nr:()=>g,Tv:()=>s,Ym:()=>l,ck:()=>i,m8:()=>p,nH:()=>d,qX:()=>m,wp:()=>c,yN:()=>h,yq:()=>f});var o=n(35404),r=n(76276);const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return{...t,[e]:{...t[e],[n]:o}}},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{[n]:o,...r}=t[e];return{...t,[e]:r}},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{...t,[e]:{...t[e],...n}}},l=function(e,t,n){const o=t[e];for(var r=arguments.length,a=new Array(r>3?r-3:0),i=3;i<r;i++)a[i-3]=arguments[i];return{...t,[e]:{...o,[n]:o[n].concat(...a)}}},c=(e,t,n,o)=>{const r=t[e];return{...t,[e]:{...r,[n]:r[n].filter((e=>e!==o))}}},d=function(e){return`/${arguments.length>1&&void 0!==arguments[1]?arguments[1]:"eng"}${(0,o.Qj)((0,o.cp)(e))}`},u=e=>{let[t,n,o]=e.match(/^\/(.+?)(\/.*$)/);return{key:t,lang:n,uri:o}},h=e=>{let t=(e=e||(r.ZP?window.location:{pathname:"",search:""})).pathname,n=(0,o.LM)(e.search).lang;return d(t,n)},p=(e,t)=>`${t}/${e}`,f=(e,t)=>t.map((t=>{let{pid:n}=t;return p(e,n)})),g=e=>{let{note:{title:t,content:n},folders:o=[],tags:r=[],refs:a=[]}=e;return(t||n?"note":a.length&&"link")||r.length&&"tag"||o.length&&"notebook"||void 0},m=(e,t)=>{let[n,o]=t;return Object.assign(e,{[n]:o})}},55398:(e,t,n)=>{n.d(t,{P:()=>a});var o=n(22222),r=n(44815);const a=(0,o.createSelectorCreator)(r.PW,{maxSize:5})},35262:(e,t,n)=>{n.d(t,{c:()=>a,w:()=>r});var o=n(76276);const r=()=>o.ZP?document.querySelector("#content")?document.documentElement:document.scrollingElement:null,a=()=>{let e=r();return e&&e.scrollTop}},1262:(e,t,n)=>{n.d(t,{F_:()=>l,IY:()=>o,Kk:()=>s,Rv:()=>a,fp:()=>r,j4:()=>i});const o=(e,t)=>localStorage.setItem(e,JSON.stringify(t)),r=e=>localStorage.getItem(e),a=e=>localStorage.removeItem(e),i=(e,t)=>sessionStorage.setItem(e,JSON.stringify(t)),s=e=>sessionStorage.getItem(e),l=e=>sessionStorage.removeItem(e)},62972:(e,t,n)=>{n.d(t,{Z:()=>i,z:()=>a});var o=n(35404);const r=e=>{switch(e){case"scriptures":return{type:"scriptures",placeholder:"searchContextScriptures",subTypes:[{type:"ot",placeholder:"searchContextOldTestament"},{type:"nt",placeholder:"searchContextNewTestament"},{type:"bofm",placeholder:"searchContextBookOfMormon"},{type:"dc-testament",placeholder:"searchContextDnC"},{type:"pgp",placeholder:"searchContextPGP"}]};case"general-conference":return{type:"general-conference",placeholder:"searchContextGeneralConference"};case"come-follow-me":return{type:"come-follow-me",placeholder:"searchContextComeFollowMe"};case"general-handbook":return{type:"general-handbook",placeholder:"searchContextHandbook"};case"books-and-lessons":case"manual":case"manuals":return{type:"manuals",placeholder:"searchContextBooksAndLessons"};case"liahona":return{type:"liahona",placeholder:"searchContextLiahona"};case"for-the-strength-of-youth":return{type:"for-the-strength-of-youth",placeholder:"searchContextFTSOY"};case"friend":return{type:"the-friend",placeholder:"searchContextFriend"};case"ya-weekly":return{type:"young-adult-weekly",placeholder:"searchContextYAWeekly"};case"church-history":return{type:"church-history",placeholder:"searchContextChurchHistory"};case"gospel-topics":case"topics":return{type:"gospel-topics",placeholder:"searchContextGospelTopics"};default:return}},a=(e,t,n)=>{const[a="lib",i]=(0,o.Qj)(e).slice(1).split("/"),[s,l]=(0,o.Qj)(t).slice(1).split("/");let{type:c="all",subTypes:d=[],placeholder:u="searchContextGospelLibrary"}=r(l)||r(s)||r(i)||r(a)||{},h=d.find((e=>e.type===l));window.platformConfig.searchConfig.searchOptionalParams=[{param:"facet",value:c},h&&{param:"subfacet",value:h.type}].filter(Boolean);const p=`${n("searchContextSearch")} ${n(h?h.placeholder:u)}`;window.platformConfig.searchConfig.searchPlaceholderText=p,document.dispatchEvent(new CustomEvent("checkcontext"))},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";const[n="lib",a]=(0,o.Qj)(e).slice(1).split("/"),[i,s]=(0,o.Qj)(t).slice(1).split("/");let{type:l=i||n,subTypes:c=[]}=r(i)||r(n)||{};return{primary:l,subCategory:c.find((e=>[s,i,a].includes(e)))}}},35404:(e,t,n)=>{n.d(t,{D3:()=>_,Fr:()=>v,L2:()=>p,LM:()=>T,Qj:()=>g,TL:()=>b,U9:()=>E,aq:()=>f,cp:()=>m,ob:()=>I,on:()=>S,pE:()=>w,sF:()=>y,zz:()=>O});var o=n(84639),r=n(76276);const{APP_PATHNAME:a,APP_HOST:i}=(0,o.U2)(),s=new RegExp(`(^${a})?((?:/.*|$))`),l=new RegExp(`^${a}(?=/|$)`),c=/(^\/lib$)|(^\/\w{3}(?=$|\/))/,d=/^\/(lib|item|content)\//,u=/%[0-9A-Fa-f]{2}/,h=/[^%]+|(?:%[0-9A-Fa-f]{2})+/g,p=e=>l.test(e),f=e=>!p(e)&&/^\//.test(e)?`${a}${e}`:e,g=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(l,"")},m=function(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return u.test(e)?e.replace(h,(e=>u.test(e)?e:e.toLowerCase())):e.toLowerCase()}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(s,(function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:a)+(arguments.length>2?arguments[2]:void 0).replace(c,"$1").replace(d,"/")}))},v=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(".")[0]},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e.split("#")[0];let t=e.split(".").pop();return`${e}${t!==e?`#${t.split(/-|\?/)[0]}`:""}`},S=e=>g(v(e)),E=(e,t,n)=>{for(var o in e)"object"==typeof e[o]?E(e[o],t,n):o!==t||/^(?:http|\/\/|#)/.test(e[o])||(e[o]=n+e[o])},b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"churchofjesuschrist.org";if(e.startsWith("/")||!e)return e;try{const{hostname:n,pathname:o,search:r,hash:i}=new URL(e);return n.includes(t)&&o.startsWith(a)?`${o}${r}${i}`:e}catch(t){return e}},I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{lang:"eng"},o=(null==n?void 0:n.baseUrl)||(r.ZP?window.location:i),{href:a="",origin:s="",protocol:l="",host:c="",hostname:d="",port:u="",pathname:h="",search:p="",hash:f=""}=new URL(e,o),g=e.startsWith("#")?T(p):{lang:null==n?void 0:n.lang,...T(p)};return p=w(g),a=`${s}${h}${p}${f}`,{href:a,origin:s,protocol:l,host:c,hostname:d,port:u,pathname:h,search:p,hash:f,state:t,query:g}},T=e=>[...new URLSearchParams(e).entries()].reduce(((e,t)=>{let[n,o]=t;return e[n]=e[n]?[].concat(e[n],o):o,e}),{}),w=e=>{let{lang:t,...n}=e,o=Object.entries({lang:t,...n}).map((e=>{let[t,n]=e;return[].concat(n||[]).filter(Boolean).map((e=>`${t}=${e}`))})).flat().join("&");return o?`?${o}`:""},O=e=>{let{pathname:t,query:n}=I(e),o=[t.split(".")[1],n.id,n.context,n.para,n.verse].filter(Boolean);return t=v(t),o.length?`${t}.${o.join(",")}`:t},_=e=>{let t=new URL(e),[n,o]=t.pathname.split(".");return t.pathname=n,o=[].concat(t.searchParams.get("id")||[],o).join(","),o&&t.searchParams.set("id",o),t.toString()}},33065:(e,t,n)=>{n.d(t,{D9:()=>r,Rh:()=>d,YU:()=>a,Ze:()=>l,pE:()=>i,sV:()=>c,tI:()=>s,xb:()=>o});const o=e=>null==e?!e:Number.isInteger(e.size)?!e.size:!(e=Object.keys(e)).length,r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;if(null==e)return{};const n=Object.entries(e).filter((e=>{let[n,o]=e;return t(o)}));return Object.fromEntries(n)},a=e=>{try{return JSON.parse(JSON.stringify(e))}catch(t){return r(e,(e=>void 0!==e))}},i=e=>e.nodeType===Node.ELEMENT_NODE?e:e.parentElement,s=e=>e instanceof Promise,l=e=>new RegExp(/.*\.pdf$/).test(e),c=e=>{let{fullpage:t}=e;const n=document.querySelector("[class*=readerViewHeader-]");return t?Array.from(document.querySelectorAll("[data-aid-version] header [data-aid]"))[0]:Array.from(document.querySelectorAll("[data-aid-version] [data-aid]")).filter((e=>e.offsetTop>n.offsetTop))[0]},d=e=>{if(null===e)return null;if(void 0===e.attribs["data-aid"]){let t=e.parent,n=-1;for(let o=0;o<t.children.length;o++){if(t.children[o]===e){n=o;break}}if(-1!==n)for(let e=n;e>=0;e--){let n=t.children[e];if(""!==n.innerText&&void 0!==(n.attribs&&n.attribs["data-aid"]))return n}}return e}}},t={},n,o,r;function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,a.amdO={},n=[],a.O=(e,t,o,r)=>{if(!t){var i=1/0;for(d=0;d<n.length;d++){for(var[t,o,r]=n[d],s=!0,l=0;l<t.length;l++)(!1&r||i>=r)&&Object.keys(a.O).every((e=>a.O[e](t[l])))?t.splice(l--,1):(s=!1,r<i&&(i=r));if(s){n.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}r=r||0;for(var d=n.length;d>0&&n[d-1][2]>r;d--)n[d]=n[d-1];n[d]=[t,o,r]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>({41:"error",88:"eden--reader~related-content-panel~associated-media-panel~disambiguation-panel",93:"study-sets-panel",111:"related-content-panel",120:"associated-media-panel",133:"modules--home~library~reader",177:"home",201:"eden--home~library~reader",207:"reader",262:"reader~annotation-panel~cross-ref-panel~disambiguation-panel~footnote",278:"modules--reader~editor-panel",285:"eden--reader~options-panel~related-content-panel",289:"eden--bookmarks-panel~study-sets-panel",297:"eden--reader~editor-panel",327:"eden--library",329:"modules--library~reader",347:"library~reader",380:"move-annotation-to-set-panel",395:"cross-ref-panel",453:"bitmovin",479:"eden--audio-player",516:"video-player",537:"video-stream",680:"eden--reader",683:"eden--editor-panel",689:"footnote",721:"library",729:"options-panel",734:"annotation-panel",766:"modules--editor-panel",845:"audio-player",883:"disambiguation-panel",896:"eden--bitmovin",913:"editor-panel",916:"home~library~reader",942:"reader~disambiguation-panel",958:"bookmarks-panel",980:"eden--related-content-panel~disambiguation-panel"}[e]+"."+{41:"23b80675cc9b59237505",88:"831bd7bacfda4148ba0a",93:"fad605268f93ff74d1fe",111:"07b898ccb0e75c47285f",120:"851ab409318b4dc344c9",133:"0ef3afcf9ef056487907",177:"45faa55264a960dfb954",201:"06f944a564ecc7ad64be",207:"847c1b508be992ce0669",262:"2efd56f5783505ef0503",278:"afdf18c71f49d4e9239d",285:"3bddbd9dc6239b9e9ec0",289:"f53f6dc1a2b72cafceb9",297:"056ee29855c95ea7f963",327:"04143535e48f518f97ec",329:"079125f114efc2060039",347:"9d986427c8e8ee942973",380:"31e0c6d5fa3a37d39ef3",395:"d1145703797ee435b994",453:"12da6eac594fc17ff997",479:"1b80aea2cbc68022037d",516:"de75e89a909d810ee076",537:"912eaa68472cd3774a83",680:"cfdbe11632792fb2af9e",683:"650d29852dfb8e02c016",689:"a198189ed4481b20bda5",721:"2f66b3e88b552a6eba3f",729:"7df1d39c7d7e9eee0b09",734:"ce0b5b992caf476f5d9f",766:"6badad1291b69cff717d",845:"5362e7c4e4c76b9d60d7",883:"d6553853fb07b00f729e",896:"8598529a388847294be6",913:"41c5a09d8a101cf075df",916:"c9ca2be81c7f52acbca8",942:"244fa1a49740aa5fe568",958:"f3ad769c95df80c29092",980:"a9b8046b8159c624a64d"}[e]+".bundle.js"),a.miniCssF=e=>({41:"error",93:"study-sets-panel",111:"related-content-panel",120:"associated-media-panel",177:"home",207:"reader",380:"move-annotation-to-set-panel",395:"cross-ref-panel",453:"bitmovin",516:"video-player",537:"video-stream",689:"footnote",721:"library",729:"options-panel",734:"annotation-panel",845:"audio-player",883:"disambiguation-panel",913:"editor-panel",958:"bookmarks-panel"}[e]+"."+{41:"1cf4bf3671f589d4f0c4",93:"44bcd0178c095744294b",111:"911a1673910dea097fe9",120:"72196fd52c0e8df96233",177:"f09c26d49c8e74e4ec3d",207:"bea652ba3568036c6935",380:"7d18dcf5fdc012d2fa38",395:"9c5c0818672b9b2e31eb",453:"b88b41f42c779642fe48",516:"91557eb446fd2e53981e",537:"772591e21605f36e6df5",689:"95c24e8d710056656a77",721:"b62017884cd96ec18db6",729:"7cee3631f597212dcf7d",734:"3640ef1d4820ab2a34d8",845:"06e717d1ed3d0d26400b",883:"9246ddbbfb2b7c1aedd1",913:"4e316bf5959ee78b42e2",958:"87f2540d059222a2ba09"}[e]+".css"),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},r="gospel-library-online:",a.l=(e,t,n,i)=>{if(o[e])o[e].push(t);else{var s,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==r+n){s=u;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",r+n),s.src=e),o[e]=[t];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var r=o[e];if(delete o[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/study/static/",(()=>{if("undefined"!=typeof document){var e=e=>new Promise(((t,n)=>{var o=a.miniCssF(e),r=a.p+o;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var r=(i=n[o]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(r===e||r===t))return i}var a=document.getElementsByTagName("style");for(o=0;o<a.length;o++){var i;if((r=(i=a[o]).getAttribute("data-href"))===e||r===t)return i}})(o,r))return t();((e,t,n,o,r)=>{var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.onerror=a.onload=n=>{if(a.onerror=a.onload=null,"load"===n.type)o();else{var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=i,l.request=s,a.parentNode&&a.parentNode.removeChild(a),r(l)}},a.href=t,n?n.parentNode.insertBefore(a,n.nextSibling):document.head.appendChild(a)})(e,r,null,t,n)})),t={143:0};a.f.miniCss=(n,o)=>{t[n]?o.push(t[n]):0!==t[n]&&{41:1,93:1,111:1,120:1,177:1,207:1,380:1,395:1,453:1,516:1,537:1,689:1,721:1,729:1,734:1,845:1,883:1,913:1,958:1}[n]&&o.push(t[n]=e(n).then((()=>{t[n]=0}),(e=>{throw delete t[n],e})))}}})(),(()=>{var e={143:0};a.f.j=(t,n)=>{var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise(((n,r)=>o=e[t]=[n,r]));n.push(o[2]=r);var i=a.p+a.u(t),s=new Error;a.l(i,(n=>{if(a.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,o[1](s)}}),"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[i,s,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(l)var d=l(a)}for(t&&t(n);c<i.length;c++)r=i[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},n=self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var i=a.O(void 0,[882,64,34],(()=>a(21208)));i=a.O(i)})();
//# sourceMappingURL=app.defdcaadfdb0f264c408.js.map