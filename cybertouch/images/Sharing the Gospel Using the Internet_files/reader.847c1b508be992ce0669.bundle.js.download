(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[207],{51976:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(12788),s=n(13901),a=n(13256),o=n(85893);const r=i.ZP.div.withConfig({displayName:"src__Container",componentId:"sc-18n93dp-0"})(["align-items:top;display:grid;grid-template-columns:min-content auto;flex-wrap:wrap;position:relative;"]),l=i.ZP.div.withConfig({displayName:"src__Form",componentId:"sc-18n93dp-1"})(["margin-block-end:",";align-self:stretch;width:100%;& input{min-width:100px;border:none;outline:none;font-family:",";font-size:",";&::placeholder{color:var(--text-secondary,",");}}"],a.lp,a.SY,a.D0,a.f3),c=i.ZP.div.withConfig({displayName:"src__SearchAndTagsWrapper",componentId:"sc-18n93dp-2"})(["width:100%;align-items:center;"]),d=e=>{let{autoFocus:t,children:n,className:i,items:a,minChars:d,renderId:u,onSubmit:h,placeholder:p,render:m,renderProps:g,resultsModifier:v,searchKeys:f}=e;return(0,o.jsxs)(r,{className:i,children:[n,(0,o.jsxs)(c,{children:[(0,o.jsx)(l,{children:(0,o.jsx)(s.Z,{autoFocus:t,contain:!1,items:a,renderId:u,minChars:d,onSubmit:h,placeholder:p,resultsModifier:v,searchKeys:f})}),m(g)]})]})}},68741:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(56491),s=n(53173),a=n(52779),o=n(58740),r=n(62897),l=n(85893);const c=()=>(0,l.jsxs)(i.Z,{className:"ActionBar",children:[(0,l.jsx)(s.Z,{}),(0,l.jsx)(a.Z,{}),(0,l.jsx)(o.Z,{}),(0,l.jsx)(r.Z,{})]})},65552:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Y});var i=n(67294);const s="overlay-aDdvd",a="overlayBody-TGmWD",o="header-uPOun",r="crossLinks-okV2I",l="overlayContent-QYt_X",c="hasBorder-sx230",d="backButton-kFRsr",u="overlayTitle-n5Fp_",h="modalControls-uSajZ";var p=n(94184),m=n.n(p),g=n(84639),v=n(37531),f=n(86706),b=n(91499),x=n(39516),y=n(81359),S=n(6267),k=n(16550),C=n(97691),j=n(96182),P=n(6837);const N="modalControls-Ma9U3",T="closeButton-XHtYr",w="saveButton-L_voN",O="save-button-enter-fKguT",I="savedButton-vpgkV",Z="save-button-enter-active-maJRQ",M="save-button-enter-done-hwxpf",A="save-button-exit-bV0xO",B="save-button-exit-active-gPTbo",E="save-button-exit-done-rXfcK";var R=n(14590),L=n(80784),D=n(86759),U=n(39587),H=n(85893);const F={enter:O,enterActive:Z,enterDone:M,exit:A,exitActive:B,exitDone:E},$=[{key:"save",string:"editorSave",classNames:[],timeout:200},{key:"saved",string:"editorSaved",classNames:[I],timeout:200},{key:"saving",string:"editorSaving",classNames:[],timeout:200},{key:"error",string:"editorError",classNames:[],timeout:200}],_=e=>{let{className:t,close:n,disableSave:i,saveAll:s,saveState:a,selectI18nStringById:o}=e;return(0,H.jsxs)("div",{className:m()(N,t),children:[$.map((e=>{let{classNames:t,key:n,string:r,timeout:l}=e;return(0,H.jsx)(D.Z,{className:m()(w,...t),classNames:F,in:a===n,mountOnEnter:!0,timeout:l,children:"saving"!==n?(0,H.jsx)(U.gh,{disabled:i,onClick:s,title:o(r),small:!0,"data-testid":"cross-link-save",children:o(r)}):(0,H.jsx)(U.hU,{size:"small",children:(0,H.jsx)(R.Z,{size:"1em"})})},n)})),(0,H.jsx)(U.hU,{className:T,onClick:n,title:o("close"),size:"small","data-testid":"cross-link-close",children:(0,H.jsx)(L.Z,{})})]})};var q=n(13167),V=n(34592),z=n(88579),W=n(76540);const{APP_PATHNAME:K}=(0,g.U2)(),G=(0,b.e)(j.Z);function Q(e,t){let{payload:n,type:i}=t,s=new Set(e.values());switch(i){case"add":return s.add(n);case"remove":return s.delete(n),s;case"replace":return n=n||[],new Set(n);default:throw new Error("Action type unknown")}}G.displayName="ChevronLeftLargeIconButton";const X=e=>{const{lang:t}=(0,i.useContext)(P.ZP),n=(0,k.TH)(),p=(0,i.useMemo)((()=>(0,v.PP)({initialEntries:[`${K}/lib?lang=${t}`]})),[]),g=(0,f.v9)(S.I3),b={createLink:g("createCrossLinkHeading"),editLink:g("editCrossLinkHeading")},j=(0,f.v9)(S.sJ),N=(0,f.v9)(S.Wp)||[],T=(0,f.v9)((e=>(0,S.IK)(e,p.location))),w=(0,f.v9)((e=>(0,S.Nm)(e,p.location))),O=(0,f.I0)(),I=(0,i.useRef)(null),[Z,M]=(0,i.useState)(""),[A,B]=(0,i.useState)("save"),[E,R]=(0,i.useReducer)(Q,new Set),L=(0,i.useMemo)((()=>({selectedPids:E,dispatch:R})),[E,R]),D=Z?b.editLink:b.createLink;(0,i.useEffect)((()=>{I.current.focus();let e=document.getElementById("content");return()=>{e.focus()}}),[]),(0,i.useEffect)((()=>{"save"!==A&&B("save")}),[Z,E]),(0,i.useEffect)((()=>p.listen(((e,t)=>{var n;null!==(n=e.state)&&void 0!==n&&n.isCrossLink||"REPLACE"===t||(M(""),R({type:"replace",payload:[]}))}))),[p,E]);const U=(F=async t=>{if(null===j){const{offsets:t}=e,i=async()=>await O((0,x.CC)({offsets:t},n));O((0,x.uG)(await i()))}if(Z||E.size>0||t&&T){const e=E.size>0?E:new Set([T]);Z?[...e].toString(",")!==Z&&O((0,x.$)(e,Z,p.location)):O((0,x.pc)(e,p.location)),M((0,x.KQ)(e,w).toString(","))}},async e=>{B("saving");try{await F(e),B("saved")}catch(e){B("error")}});var F;const $=!(E.size>0||T);return(0,H.jsx)(z.i,{active:!0,className:s,onCloseGesture:()=>{U(),M(""),e.onClose()},children:(0,H.jsx)(P.hk,{lang:t,crossLinkMode:!0,children:(0,H.jsx)(q.eI,{value:L,children:(0,H.jsx)(k.F0,{history:p,children:(0,H.jsxs)("div",{className:a,tabIndex:"-1",ref:I,"aria-live":"polite",role:"dialog",id:"cross-link-overlay",children:[(0,H.jsx)(C.Z,{active:!0}),(0,H.jsxs)("header",{className:m()(o,c),children:[(0,H.jsx)(G,{className:d,onClick:p.goBack,"data-testid":"cross-link-back"}),(0,H.jsx)("span",{className:u,"data-testid":"cross-link-title",children:D}),(0,H.jsx)(_,{className:h,close:()=>{R({type:"replace",payload:[]}),M(""),e.onClose()},disableSave:$,saveAll:()=>U(!0),saveState:A,selectI18nStringById:g})]}),(0,H.jsx)(V.Z,{className:r,handleClick:(e,n,i)=>{const s=N[n].pid;Z===s?(M(""),R({type:"replace",payload:[]})):(M(s),R({type:"replace",payload:s.split(",")}),(0,y.rx)(e)&&(e.preventDefault(),(0,y.c4)(i,t,p,{isCrossLink:s})))},onClose:(e,t)=>{Z===N[t].pid&&R({type:"replace",payload:[]}),M(""),O((0,x.G_)(N[t].pid))},editing:Z,tags:N,type:"combo"}),(0,H.jsx)("div",{className:l,children:(0,H.jsx)(W.Z,{crossLinkMode:!0})})]})})})})})},Y=(0,i.memo)(X)},85556:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});const i="innerAlert-AJstr",s="buttons-ONhG7";var a=n(98633),o=n(63927),r=n(39587),l=n(70426),c=n(29650),d=n(666),u=n(85893);const h=e=>{let{onClose:t,children:n,className:i}=e;const s=(0,a.z)({onClickOutside:e=>{e.stopPropagation(),t&&t()}});return(0,u.jsx)("div",{className:i,ref:s,children:n})},p=e=>{let{className:t,onClose:n=(()=>{}),onDelete:a=(()=>{}),inline:o=!1,message:p,selectI18nStringById:m,title:g,testId:v}=e;const f=o?h:l.ModalAlert;return(0,u.jsx)(f,{open:!0,onClose:n,className:t,children:(0,u.jsx)(l.ErrorAlert,{onClose:n,children:(0,u.jsxs)("div",{className:i,"data-testid":`${v}-delete-modal`,children:[(0,u.jsx)(d.Gn,{children:g}),(0,u.jsx)(c.hh,{children:p}),(0,u.jsxs)("div",{className:s,children:[(0,u.jsx)(r.kq,{onClick:()=>{a(),n()},small:!0,"data-testid":`${v}-delete-modal-submit`,children:m("deleteAlertDeleteButton")}),(0,u.jsx)(r.gh,{onClick:n,small:!0,"data-testid":`${v}-delete-modal-cancel`,children:m("deleteAlertCancelButton")})]})]})})})},m=e=>{const t=(0,o.V2)();return(0,u.jsx)(p,{...e,selectI18nStringById:t})}},54808:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Qe});var i=n(67294);const s="toolbarTrack-jruQ9",a="floatingAnnotationToolbar-XbsfR",o="toolbarMark-T2ZEy",r="sticky-mESUH",l="singleItem-UwSoj",c="fatDivider-dN9b2",d="fatIconButton-xVn8V",u="defaultToolbarMarkOption-Qn5nu",h="markOption-JBTcc",p="markOptionHighlight-q1aMz",m="active-QiHhy",g="highlightMenuColor-fiM8b";var v=n(94184),f=n.n(v),b=n(86706),x=n(14791),y=n(39516),S=n(73431),k=n.n(S),C=n(33065);const j=e=>{var t,n;let{pidElement:i,range:s,selectBookmarksByPid:a}=e;if(!i){let e=s.startContainer.closest?s.startContainer:s.startContainer.parentElement;i=null==e?void 0:e.closest("[data-aid-version] [data-aid]")}let o=a(null===(t=i)||void 0===t?void 0:t.getAttribute("data-aid"));const r=i?window.getComputedStyle(i).getPropertyValue("font-size"):0,l=Math.max(parseInt(r),24);return o.length?Math.round((null===(n=i)||void 0===n?void 0:n.getBoundingClientRect().top)+l):0},P=e=>{const t=document.querySelector("#archivedAlert"),n=(null==t?void 0:t.getBoundingClientRect().height)||0,i=t?n+64:0;if((()=>{const e=document.querySelectorAll("[data-aid-version] header")[0],t=(null==e?void 0:e.getBoundingClientRect().top)-20,n=(0,C.sV)({fullpage:!0});return(null==n?void 0:n.getBoundingClientRect().top)-t-324>0})())return 64+n;const s=document.querySelector("#content"),a=null==s?void 0:s.getBoundingClientRect().top,{element:o,range:r}=(()=>{let e=document.createRange();const t=(0,C.sV)({fullpage:!0});return t&&e.selectNodeContents(t),{element:t,range:e}})(),l=j({pidElement:o,range:r,selectBookmarksByPid:e}),c=l?l-a:0,d=Math.round((null==o?void 0:o.getBoundingClientRect().top)-56),u=d?d-a+n:0;return Math.max(c,u,64,i)},N=k()(.4,.1,.25,1);var T=n(6267),w=n(63927),O=n(16550),I=n(20296),Z=n.n(I),M=n(91499),A=n(85893);const B=e=>t=>{let{className:n,...i}=t;return(0,A.jsx)(M.Z,{className:f()(n,d),Icon:e,...i})};var E=n(18327),R=n(66716),L=n(80784),D=n(87262),U=n(89338),H=n(62716),F=n(94889),$=n(5755),_=n(38628),q=n(85556);const V="divider-x40lI",z=e=>{let{className:t,...n}=e;return(0,A.jsx)("hr",{className:f()(V,t),...n})};z.displayName="Divider";const W=z,K=e=>{let{className:t,...n}=e;return(0,A.jsx)(W,{className:f()(t,c),...n})};var G=n(37720),Q=n(26145),X=n(38233);const Y=B(X.Z),J={red:"highlightColorRed",orange:"highlightColorOrange",yellow:"highlightColorYellow",green:"highlightColorGreen",blue:"highlightColorBlue",dark_blue:"highlightColorDarkBlue",purple:"highlightColorPurple",pink:"highlightColorPink",brown:"highlightColorBrown",gray:"highlightColorGray"},ee=e=>{let{className:t,clear:n,color:i,onClick:s,theme:a,title:o,underline:r,...l}=e;return(0,A.jsx)("button",{className:h,onClick:s,title:o,...l,children:(0,A.jsx)(Q.vc,{className:t,clear:n,color:i,highlightTheme:a,underline:r,children:"A"})})},te=e=>{let{annotation:t,changeView:n,defaultStyle:s,selectI18nStringById:a,theme:o,...r}=e;const[l,c]=(0,i.useState)(s);(0,i.useEffect)((()=>{if(t){const{clear:e,color:n,underline:i}=(null==t?void 0:t.highlights[0])||{};c({clear:e,color:n,underline:i})}}),[t]);const d=e=>{c({...l,...e}),r.updateHighlightStyle({...l,...e})};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Y,{onClick:()=>n("DefaultToolbar"),title:a("annotationMenuReturnText"),"data-testid":"highlight-back-button"}),(0,A.jsx)(K,{}),Object.keys(J).map((e=>(0,A.jsx)("button",{"aria-label":a(J[e]),className:f()(g,l.color===e&&m),onClick:()=>d({color:e}),style:{backgroundColor:Q.O9[e][o].color},"data-testid":`${e}-highlight`},e))),(0,A.jsx)(K,{}),(0,A.jsx)(ee,{"aria-label":a("highlightMarkHighlight"),className:f()(!(l.underline||l.clear)&&m,p),color:l.color,onClick:()=>d({underline:!1,clear:!1}),theme:o,"data-testid":"full-height-highlight"}),(0,A.jsx)(ee,{"aria-label":a("highlightMarkUnderline"),className:l.underline&&!l.clear&&m,color:l.color,onClick:()=>d({underline:!0,clear:!1}),theme:o,underline:!0,"data-testid":"underline-highlight"}),(0,A.jsx)(ee,{"aria-label":a("highlightMarkClear"),className:l.clear&&m,clear:!0,onClick:()=>d({clear:!0}),theme:o,"data-testid":"clear-highlight"})]})},ne=e=>{let{...t}=e;const n=(0,b.I0)(),i=(0,b.v9)(G.$g),s=(0,b.v9)(T.S6),a=(0,b.v9)(T.Pu),o=(0,w.V2)();return(0,A.jsx)(te,{...t,annotation:i,defaultStyle:s,selectI18nStringById:o,theme:a,updateHighlightStyle:e=>n((0,y.mf)(e))})};var ie=n(5276),se=n(15914);const ae=B(ie.Z),oe=B(se.Z),re=e=>{let{disabled:t,handleClick:n,title:s}=e;const[a,o]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{if(a){const e=setTimeout((()=>{o(!1)}),1800);return()=>{clearTimeout(e)}}}),[a]),a?(0,A.jsx)(oe,{style:{color:"green"},title:s,"data-test-id":"fat-copy-button-success"}):(0,A.jsx)(ae,{disabled:t,onClick:()=>{o(!0),n()},title:s,"data-test-id":"fat-copy-button"})},le="calloutChild-OCox4",ce="closeButton-gpLUG";var de=n(98633);const ue={callout:"callout-_mjTv",blockStart:"blockStart-cbifE",blockEnd:"blockEnd-NT2j_",inlineStart:"inlineStart-DuMEk",inlineEnd:"inlineEnd-jNnyS",none:"none-aJMw6",arrow:"arrow-vXHZe"};var he=n(85610);const pe=e=>{let{arrowDirection:t}=e;return(0,A.jsx)("div",{className:f()(ue.arrow,ue[t]||ue.blockStart)})},me=(0,i.forwardRef)(((e,t)=>{let{arrowDirection:n="blockStart",className:i,open:s=!1,children:a,...o}=e;return s?(0,A.jsx)("div",{className:i,ref:t,children:(0,A.jsxs)(he.Z,{className:f()(ue.callout,ue[n]||ue.blockStart,i),children:[(0,A.jsx)(pe,{arrowDirection:n}),a]})}):null}));var ge=n(18511),ve=n(666),fe=n(15020);const be=B(L.Z),xe=e=>{let{annotationsOutOfService:t,arrowDirection:n,children:s,className:a,disabled:o,loggedIn:r,selectI18nStringById:l}=e;const[c,d]=(0,i.useState)(!1),u=(0,i.useRef)(),h=(0,de.z)({onClickOutside:e=>{const t=u.current.contains(e.target);c&&t||d(!c)}});return(0,A.jsx)(A.Fragment,{children:r&&!t?s:(0,A.jsxs)("div",{style:{position:"relative"},children:[(0,A.jsx)("div",{onClickCapture:e=>{o||(e.stopPropagation(),d(!c))},ref:u,children:s}),(0,A.jsx)(me,{className:a,arrowDirection:n,ref:h,open:c,children:(0,A.jsxs)("div",{className:le,children:[(0,A.jsxs)("header",{children:[(0,A.jsx)(ve.L8,{children:l("annotationMenuSignInTitle")}),(0,A.jsx)(be,{className:ce,onClick:()=>d(!1)})]}),(0,A.jsx)(K,{}),t&&r?(0,A.jsx)(fe.Z,{}):(0,A.jsx)(ge.ZP,{signInDescription:l("signInPromptDescription")})]})})]})})},ye=e=>{const t=(0,b.v9)(T.y8),n=(0,b.v9)(T.gs),i=(0,w.V2)();return(0,A.jsx)(xe,{annotationsOutOfService:t,loggedIn:n,selectI18nStringById:i,...e})},Se=B(R.Z),ke=B(L.Z),Ce=B(D.Z),je=B(U.Z),Pe=B(H.Z),Ne=B(F.Z),Te=B($.Z),we=B(_.Z),Oe=e=>{let{addFloatingPanel:t,addHighlight:n,annotation:s,annotationsOutOfService:a,changeActiveAnnotation:o,changeView:r,clearSelection:l,defaultStyle:c,deleteAnnotation:d,location:h,loggedIn:m,modalOpen:g,offsets:v,openNotebookModal:b,openTagModal:x,openCrossLinkOverlay:y,range:S,removeFloatingPanelById:k,selectI18nStringById:C,theme:j}=e;const[P,N]=(0,i.useState)(!1),T=(null==s?void 0:s.id)||S,w=m&&!a,{clear:O,color:I,underline:M}=(null==s?void 0:s.highlights[0])||c||{};let B=(0,i.useMemo)((()=>({clear:O,color:I,underline:M})),[O,I,M]);const E=(0,i.useMemo)((()=>Z()((async()=>{const e=await n({offsets:v,style:B},h);return o(e),e}),300,!0)),[n,o,v,B,h]),R=()=>N(!P),L=(0,i.useCallback)((async(e,n)=>{e=e||await E(),t({annotationId:e,autoFocus:n,id:`${e}-editor`,type:"editor"})}),[t,E]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(ke,{onClick:()=>{l(),r("Closed")},title:C("annotationMenuCloseText"),"data-testid":"fat-close-button"}),(0,A.jsx)(K,{}),null!=s&&s.id&&!a?(0,A.jsx)(ee,{className:f()(u,!(B.clear||B.underline)&&p),clear:B.clear,color:B.color,onClick:()=>r("HighlightMenu"),theme:j,title:C("annotationMenuStyleText"),underline:B.underline,"data-testid":"fat-mark-button"}):(0,A.jsx)(ye,{arrowDirection:"inlineStart",disabled:!T,children:(0,A.jsx)(Se,{"data-testid":"fat-mark-button",disabled:!T,onClick:()=>E(),title:C("annotationMenuMarkText")})}),w&&(0,A.jsx)(Ne,{onClick:()=>L(null==s?void 0:s.id,"notes"),disabled:!T,title:C("annotationMenuNoteText"),"data-testid":"fat-note-button"}),w&&(0,A.jsx)(we,{onClick:()=>(async e=>{e=e||await E(),x(e)})(null==s?void 0:s.id),disabled:!T,title:C("annotationMenuTagText"),"data-testid":"fat-tag-button"}),w&&(0,A.jsx)(Pe,{onClick:()=>(async e=>{e=e||await E(),b(e)})(null==s?void 0:s.id),disabled:!T,title:C("annotationMenuAddToText"),"data-testid":"fat-notebook-button"}),w&&(0,A.jsx)(je,{onClick:()=>{return e=null==s?void 0:s.id,void y(e||null);var e},disabled:!T,title:C("annotationMenuOpenCrossLinkOverlayText"),"data-testid":"fat-cross-link-button"}),w&&(0,A.jsx)(Ce,{onClick:R,disabled:!(null!=s&&s.id)||g,title:C("annotationMenuRemoveText"),"data-testid":"fat-delete-button-test"}),(0,A.jsx)(K,{}),(0,A.jsx)(re,{handleClick:()=>{document.execCommand("copy")},disabled:!S,title:C("annotationMenuCopyText")}),(0,A.jsx)(Te,{onClick:()=>r("Share"),title:C("annotationMenuShareText"),"data-testid":"fat-share-button"}),P&&(0,A.jsx)(q.Z,{onClose:R,onDelete:()=>{k(`${null==s?void 0:s.id}-editor`),d(null==s?void 0:s.id),l(),R()},message:C("deleteAnnotationWarningText"),title:C("deleteAnnotationWarningTitle"),testId:"main-pane"})]})},Ie=e=>{let{...t}=e;const n=(0,O.TH)(),s=(0,b.v9)(T.$g),a=(0,b.v9)(T.y8),o=(0,b.v9)(T.S6),r=(0,b.v9)(T.gs),l=(0,w.V2)(),c=(0,b.v9)(T.Pu),d=(0,b.I0)(),u=(0,i.useMemo)((()=>(0,x.DE)({addHighlight:y.CC,addFloatingPanel:E.Vh,changeActiveAnnotation:y.uG,deleteAnnotation:y.Dl,removeFloatingPanelById:E.$R},d)),[d]);return(0,A.jsx)(Oe,{annotation:s,annotationsOutOfService:a,defaultStyle:o,location:n,loggedIn:r,selectI18nStringById:l,theme:c,...u,...t})};const Ze=B(n(38035).Z),Me=e=>{let{changeView:t}=e;const n=(0,w.V2)();return(0,A.jsx)(Ze,{onClick:()=>t("DefaultToolbar"),title:n("annotationMenuOpenToolbarText"),"data-testid":"open-fat"})};var Ae=n(6837),Be=n(50720),Ee=n(41503),Re=n(40104),Le=n(84639),De=n(61027),Ue=n(1577),He=n(35404);const Fe=B(X.Z),$e=B(Be.Z),_e=B(Ee.Z),qe=B(Re.Z),Ve=B(U.Z),ze={FACEBOOK:(e,t,n)=>`https://www.facebook.com/sharer/sharer.php?u=${n}&quote=${e}%0A%0A${t}`,TWITTER:(e,t,n)=>`https://twitter.com/share?url=${n}&text=${e}%0A%0A${t}`,EMAIL:(e,t,n)=>`mailto:?subject=${e}&body=${e}%0A%0A${t}%0A%0A${n}`},We=e=>{let{appUrl:t,changeView:n,lang:s,offsets:a,range:o,selectI18nStringById:r,showToast:l}=e;const c=(e,t)=>{Ue.Z.fireShareEvent({component:{info:{channel:e.toLowerCase(),link:t}}})},d=()=>{let e=null==o?void 0:o.cloneContents(),n=p(e),i=h(e),r=m(a);r+="?lang="+s;let l=`${t}${(0,He.sF)(r)}`;return{body:i,subject:n,url:(0,He.D3)(l)}},u=e=>{let{body:t,subject:n,url:i}=d();c(e,i),t=encodeURIComponent(t),n=encodeURIComponent(n),i=encodeURIComponent(i),window.open(ze[e](n,t,i))},h=e=>{if(!e){let t=document.querySelector('meta[name="description"]');(e=new DocumentFragment).append((null==t?void 0:t.getAttribute("content"))||"")}return e.querySelectorAll("sup").forEach((e=>e.remove())),e.querySelectorAll("span[data-pointer-type]").forEach((e=>e.remove())),Array.from(e.querySelectorAll("p"),(e=>e.innerText)).join("\n\n")||e.textContent},p=e=>{let t=document.title,n=Array.from((null==e?void 0:e.querySelectorAll("[data-aid]"))||[],(e=>document.querySelector(`[data-aid="${e.dataset.aid}"].verse .verse-number`))).filter(Boolean);if(n.length)t+=`:${n[0].innerText.trim()}`,n.length>1&&(t+=`-${n.pop().innerText.trim()}`);else if(o){let e=(0,C.pE)(o.startContainer).closest("[data-aid].verse");e&&(t+=`:${e.querySelector(".verse-number").innerText.trim()}`)}return t},m=e=>e?(0,y.yc)(e):"/"===window.location.pathname?"":(0,He.on)(window.location.pathname);return(0,w.nw)((()=>{var e;if("Windows"!==(null===(e=navigator.userAgentData)||void 0===e?void 0:e.platform)&&navigator.canShare){let{body:e,subject:t,url:i}=d();try{navigator.share({url:i,title:t,text:e}),c("native",i),n("DefaultToolbar")}catch(e){console.error(e)}}})),(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)(Fe,{onClick:()=>{n("DefaultToolbar")},title:r("annotationMenuBackText"),"data-testid":"share-back-button"}),(0,A.jsx)(K,{}),(0,A.jsx)($e,{onClick:()=>u("FACEBOOK"),title:r("facebookLogoText"),"data-testid":"share-facebook-button"}),(0,A.jsx)(_e,{onClick:()=>u("TWITTER"),title:r("twitterLogoText"),"data-testid":"share-twitter-button"}),(0,A.jsx)(qe,{onClick:()=>u("EMAIL"),title:r("emailLogoText"),"data-testid":"share-email-button"}),(0,A.jsx)(Ve,{onClick:()=>(e=>{let{url:t}=d();navigator.clipboard.writeText(t),l({type:"url-copied",disableAutoHide:!1})})(),title:r("copyLinkLogoText"),"data-testid":"share-copy-button"})]})},Ke={DefaultToolbar:Ie,HighlightMenu:ne,Closed:Me,Share:e=>{let{...t}=e;const{APP_URL:n}=(0,Le.U2)(),s=(0,w.V2)(),a=(0,b.I0)(),{lang:o}=(0,i.useContext)(Ae.ZP);return(0,A.jsx)(We,{...t,appUrl:n,buildContentUri:e=>a((0,y.yc)(e)),lang:o,selectI18nStringById:s,showToast:e=>a((0,De.showToast)(e))})}},Ge=e=>{var t;let{activeAnnotation:n,activeSelection:c,activeUri:d,changeActiveAnnotation:u,clearSelection:h,offsets:p,openCrossLinkOverlay:m,openNotebookModal:g,openTagModal:v,range:b,selectBookmarksByPid:x,...y}=e;const[S,k]=(0,i.useState)("DefaultToolbar"),[C,T]=(0,i.useState)(!1),O=Ke[S]||(()=>(console.error(`${S} is not a valid view`),null)),I=(0,i.useRef)(null),Z=(0,i.useRef)(d),M=(0,i.useRef)(),B=(0,i.useRef)(),E=(0,i.useRef)(),R=(0,i.useRef)(),L="Closed"===S;return(0,i.useEffect)((()=>{var e;Z.current!==d&&(Z.current=d);const t=P(x);null==R||null===(e=R.current)||void 0===e||e.style.setProperty("--initialOffset",`${t}px`)}),[d,x,c]),(0,w.nw)((()=>{var e;null==R||null===(e=R.current)||void 0===e||e.style.setProperty("--toolbar-top","0px"),M.current=window.matchMedia("(max-width: 46em)")})),(0,w.nw)((()=>{const e=e=>{setTimeout((()=>{("Tab"===e.key||9===e.keyCode)&&!E.current.contains(document.activeElement)&&h()}),0)};return document.body.addEventListener("keydown",e),()=>{document.body.removeEventListener("keydown",e)}})),(0,w.nw)((()=>{const e=new ResizeObserver((e=>{e.forEach((e=>{if(e.target===E.current){const{blockSize:t,inlineSize:n}=e.borderBoxSize[0];B.current.style.setProperty("height",`${t}px`),B.current.style.setProperty("width",`${n}px`)}}))}));return e.observe(E.current),()=>e.disconnect()})),(0,i.useEffect)((()=>{var e;const t=null!==(e=M.current)&&void 0!==e&&e.matches?60:16,n=new IntersectionObserver((e=>{e.forEach((e=>{let{boundingClientRect:t,isIntersecting:n,rootBounds:i,target:s}=e;if(s===B.current){const e=t.bottom>=i.bottom?i.bottom-t.height:i.top;E.current.style.setProperty("--toolbar-sticky-top",`${e}px`),E.current.classList.toggle(r,!n),T(!n)}}))}),{rootMargin:`-48px 0px -${t}px 0px`,threshold:1});return n.observe(B.current),()=>n.disconnect()}),[null===(t=M.current)||void 0===t?void 0:t.matches]),(0,i.useEffect)((()=>{(()=>{var e;let t=null==R||null===(e=R.current)||void 0===e?void 0:e.getBoundingClientRect().top,n=E.current.getBoundingClientRect().top,i=((e,t)=>{if(!e)return 0;let n=j({range:e,selectBookmarksByPid:t}),i=Math.round(e.getBoundingClientRect().top-56);return Math.max(n,i)})(b,x),s=i-n,a=(e=>100*Math.log2(Math.abs(e)))(s),o=performance.now();const r=e=>{var i;let l=Math.min((e-o)/a,1),d=N(l)*s,u=Math.max(n+d-t,0);if(null==R||null===(i=R.current)||void 0===i||i.style.setProperty("--toolbar-top",`${u}px`),l<1)I.current=requestAnimationFrame(r);else if(!c){var h;null==R||null===(h=R.current)||void 0===h||h.style.setProperty("--toolbar-top","0px")}};cancelAnimationFrame(I.current),I.current=requestAnimationFrame(r)})()}),[c,b,x]),(0,i.useEffect)((()=>{(!c&&!L||c&&L||!n&&"Share"!==S&&!L)&&k("DefaultToolbar")}),[n,c,L,d]),(0,A.jsxs)("div",{className:s,ref:R,children:[(0,A.jsx)("div",{className:o,ref:B}),(0,A.jsx)("div",{className:f()(a,L&&l,C&&r),id:"floatingAnnotationToolbar",ref:E,tabIndex:"-1",children:(0,A.jsx)(O,{changeView:k,clearSelection:h,offsets:p,openCrossLinkOverlay:m,openNotebookModal:g,openTagModal:v,range:b,...y})})]})},Qe=e=>{const t=(0,b.I0)(),n=(0,b.v9)(T.$g),s=(0,w.Be)(),a=(0,i.useMemo)((()=>(0,x.DE)({changeActiveAnnotation:y.uG},t)),[t]);return(0,A.jsx)(Ge,{activeAnnotation:n,selectBookmarksByPid:s,...a,...e})}},30465:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(67294),s=n(20296),a=n.n(s),o=n(85893);function r(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.Component{constructor(e){super(e),r(this,"handleResize",(()=>{let e=`${this.componentRef.current.getBoundingClientRect().height}px`;this.state.height!==e&&this.setState({height:e})})),this.componentRef=e.ref||(0,i.createRef)(),this.state={}}componentDidMount(){0===l.observedElements.length&&window.addEventListener("resize",l.handleResize),l.observedElements.push(this.handleResize),this.handleResize()}componentWillUnmount(){l.observedElements=l.observedElements.filter((e=>e!==this.handleResize)),0===l.observedElements.length&&window.removeEventListener("resize",l.handleResize)}render(){const{Component:e,style:t,ref:n,...i}=this.props,{height:s}=this.state;return(0,o.jsx)(e,{...i,ref:this.componentRef,style:{...t,"--height":s}})}}r(l,"observedElements",[]),r(l,"handleResize",a()((e=>l.observedElements.forEach((e=>e()))),100));const c=l},33594:(e,t,n)=>{"use strict";n.d(t,{Z:()=>z});var i=n(67294),s=n(94184),a=n.n(s),o=n(79396),r=n(25935),l=n(10956),c=n.n(l),d=n(86706),u=n(16550),h=n(6267),p=n(63927),m=n(35404),g=n(74221),v=n(32428);const f=e=>{var t,n;const i=(0,v.$1)().searchSnippet;if(!i)return;const s=e.content.body,a=document.createElement("div");a.innerHTML=s;const o=null===(t=a.querySelector("header"))||void 0===t?void 0:t.querySelectorAll("p, h1, h2, h3, h4, h5, h6"),r=null===(n=a.querySelector(".body-block"))||void 0===n?void 0:n.querySelectorAll("p, h1, h2, h3, h4, h5, h6"),l=o&&r&&[...o,...r];if(!l)return;const c=l.filter((e=>e.id)).map((e=>({id:e.id,text:e.innerText||e.textContent})));if(!c)return;const d=new g.Z(c,{ignoreLocation:!0,keys:["text"],includeScore:!0}),[u,h]=i.split("***"),p=u?d.search(u):[],m=h?d.search(h):[];let f={score:2};return p.forEach((e=>{const t=m.find((t=>t.item.id===(null==e?void 0:e.item.id))),n=e.score+((null==t?void 0:t.score)||1);f.score>n&&(f={id:e.item.id,score:n})})),f.id?(window.location.hash=f.id,b(a.querySelector(`#${f.id}`),u.split(" ")),(0,v.Mz)("searchSnippet",e.uri),a.innerHTML):void 0},b=(e,t)=>{t.sort(((e,t)=>t.length-e.length));const n=t.map((e=>`\\b${e}\\b`)),i=RegExp(n.join("|"),"gi");Array.from(e.childNodes).forEach((e=>{if(3!==e.nodeType)b(e,t);else if(i.test(e.textContent)){let t=0;const n=document.createDocumentFragment();e.textContent.replace(i,((i,s)=>{const a=document.createTextNode(e.textContent.slice(t,s)),o=document.createElement("span");o.textContent=i,o.classList.add("searchHighlight"),n.appendChild(a),n.appendChild(o),t=s+i.length}));const s=document.createTextNode(e.textContent.slice(t));n.appendChild(s),e.parentNode.replaceChild(n,e)}}))};var x=n(7914),y=n(26145),S=n(90880),k=n(64593),C=n(84639),j=n(86535),P=n(6837),N=n(85893);const{IPS_CDN_URL:T,APP_URL:w}=(0,C.U2)(),O=e=>{let{links:t,meta:n={pageAttributes:{}},noIndex:s,pageMeta:a={},scripts:o}=e,{crossLinkMode:r}=(0,i.useContext)(P.ZP);return(0,N.jsxs)(i.Fragment,{children:[(0,N.jsx)(j.Z,{links:t}),(0,N.jsxs)(k.q,{children:[!r&&[(0,N.jsx)("title",{children:n.title},"title"),(0,N.jsx)("meta",{name:"Search.doc-aid",content:n.pageAttributes["data-aid"]},"Search.doc-aid"),s&&(0,N.jsx)("meta",{name:"robots",content:"noindex"},"robots"),Object.entries(a).map((e=>{let[t,n]=e;return(0,N.jsx)("meta",{name:t,content:n},t)})).flat(),n.ogTagImageUrl&&(0,N.jsx)("meta",{property:"og:image",content:n.ogTagImageUrl},"og:image"),(0,N.jsx)("meta",{property:"og:title",content:n.title},"og:title"),(0,N.jsx)("meta",{property:"og:type",content:"website"},"og:type"),(0,N.jsx)("meta",{property:"og:url",content:`${w}/${n.pageAttributes.lang}${n.pageAttributes["data-uri"]}`},"og:url"),(0,N.jsx)("link",{rel:"canonical",href:`${w}${n.canonicalUrl}`},"canonical")],(0,N.jsx)("script",{type:"application/ld+json",children:n.structuredData}),o.map((e=>(0,i.createElement)("script",{...e,key:e.src,src:`${T}/styles/${e.src}`,type:"text/javascript"})))]})]})};var I=n(20296),Z=n.n(I),M=n(48844);const A="startHandle-QaYpL",B="endHandle-PO7Wc",E="dragging-TsqBG",R=e=>{let{container:t,handleSelectEnd:n,onDragStart:s,parentRef:a,range:o,selection:r,setSelectionState:l,showHandles:c}=e;const d=(0,i.useRef)(),u=(0,i.useRef)(),h=(0,i.useRef)({dragging:!1}),p=M.Z.phone?1.3:1.2;(0,i.useEffect)((()=>{c?g():m()}));const m=()=>{u.current.style.display="none",d.current.style.display="none"},g=()=>{if((()=>{if(a)return r.containsNode(a,!0)})()&&!M.Z.apple.device){const{left:e,top:n}=t.getBoundingClientRect(),i=v();if(!i.length)return void m();const s=u.current.style,a=d.current.style;s.height=p+"em",s.width=p+"em",s.left=`calc(${i[0].left-e}px - ${p}em)`,s.top=i[0].bottom-n+"px",s.display="block",a.height=p+"em",a.width=p+"em",a.left=i[i.length-1].right-e+"px",a.top=i[i.length-1].bottom-n+"px",a.display="block"}},v=()=>{const e=r.getRangeAt(0).getClientRects(),{left:t,right:n}=document.querySelector("[data-aid-version]").getBoundingClientRect();return[...e].filter((e=>{let{left:i,right:s}=e;return i>=t&&s<=n}))},f=e=>{const{offsetX:t,offsetY:n,target:i,range:s}=h.current;let a,o,l=e.clientX-t,c=e.clientY-n;i===u.current&&(l+=i.offsetWidth);try{document.caretPositionFromPoint?({offsetNode:a,offset:o}=document.caretPositionFromPoint(l,c)):document.caretRangeFromPoint&&({startContainer:a,startOffset:o}=document.caretRangeFromPoint(l,c))}catch(e){return}a&&o&&(i===u.current?r.setBaseAndExtent(a,o,s.endContainer,s.endOffset):r.setBaseAndExtent(s.startContainer,s.startOffset,a,o))},b={"touch-action":"none",onPointerDown:e=>{let t=e.currentTarget.getBoundingClientRect();h.current={dragging:!0,offsetX:e.clientX-t.left,offsetY:e.clientY-t.top,range:o,target:e.currentTarget},h.current.target.setPointerCapture(e.pointerId),s()},onPointerMove:e=>{if(h.current.dragging){const{left:n,top:i}=t.getBoundingClientRect(),{target:s,offsetX:a,offsetY:o}=h.current;s.style.left=e.clientX-a-n+"px",s.style.top=e.clientY-o-i+"px",s.classList.add(E),e.preventDefault(),f(e)}},onPointerUp:e=>{l({selectButtonDown:!1}),h.current.target.classList.remove(E),h.current.target.releasePointerCapture(e.pointerId),n(!0),h.current={dragging:!1,offsetX:void 0,offsetY:void 0,range:void 0,target:void 0}}};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:A,ref:u,...b}),(0,N.jsx)("div",{className:B,ref:d,...b})]})};function L(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class D extends i.Component{constructor(e){super(e),L(this,"setSelectionState",(e=>this.selectionState={...this.selectionState,...e})),L(this,"handleSelectionChange",(e=>this.determineSelectionResult())),L(this,"handleSelectButtonDown",(e=>this.setSelectionState({selectButtonDown:D.isSelectButton(e)}))),L(this,"handleSelectButtonUp",(e=>{var t;const{selectButtonDown:n}=this.selectionState,i=null===(t=this.selection)||void 0===t?void 0:t.containsNode(this.props.container,!0),s=n&&(D.isSelectButton(e)||"contextmenu"===e.type)&&!e.shiftKey;i&&s&&(this.setSelectionState({selectButtonDown:!1}),this.determineSelectionResult())})),L(this,"determineNewUserSelection",(()=>{var e;const t=null===(e=this.selection)||void 0===e?void 0:e.getRangeAt(0),n=t&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Range,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Range;return 2===Math.abs(e.compareBoundaryPoints(Range.START_TO_START,t))+Math.abs(e.compareBoundaryPoints(Range.END_TO_END,t))}(t,this.props.range);n?this.setSelectionState({newUserSelection:!0}):this.setSelectionState({newUserSelection:!1})})),L(this,"determineSelectionResult",Z()((()=>{var e;this.determineNewUserSelection();const{selectButtonDown:t}=this.selectionState;this.selection.isCollapsed?this.props.anAnnotationEditorOpen?this.setSelectionState({newUserSelection:!1}):this.selectionState.activeSelection&&this.selectionState.newUserSelection&&this.handleSelectClear():!t&&null!==(e=this.selection)&&void 0!==e&&e.containsNode(this.props.container,!0)&&this.handleSelectEnd()}),300)),this.selectionState={selectButtonDown:!1,activeSelection:!1},this.state={showHandles:!1}}componentDidMount(){this.selection=window.getSelection(),M.Z.any&&this.self.addEventListener("contextmenu",D.preventDefault),document.addEventListener("selectionchange",this.handleSelectionChange),D.selectButtonDownEvents.forEach((e=>document.addEventListener(e,this.handleSelectButtonDown))),D.selectButtonUpEvents.forEach((e=>document.addEventListener(e,this.handleSelectButtonUp)))}componentWillUnmount(){M.Z.any&&this.self.removeEventListener("contextmenu",D.preventDefault),document.removeEventListener("selectionchange",this.handleSelectionChange),D.selectButtonDownEvents.forEach((e=>document.removeEventListener(e,this.handleSelectButtonDown))),D.selectButtonUpEvents.forEach((e=>document.removeEventListener(e,this.handleSelectButtonUp)))}componentDidUpdate(e){if(e!==this.props){const e=this.props.range&&!this.props.range.collapsed;this.setState({showHandles:!!e}),this.setSelectionState({activeSelection:!!e})}}handleSelectEnd(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.selection.getRangeAt(0);(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Range,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Range;return!(e.compareBoundaryPoints(Range.START_TO_START,t)||e.compareBoundaryPoints(Range.END_TO_END,t))})(t,this.props.range)||(M.Z.apple.device||e||!this.props.range||this.handleSelectClear(),this.props.onSelectEnd(t,this.selectionState.newUserSelection),this.setState({showHandles:!0}),this.setSelectionState({activeSelection:!0})),this.setSelectionState({newUserSelection:!1})}handleSelectClear(){this.props.onSelectClear(),this.setState({showHandles:!1}),this.setSelectionState({activeSelection:!1})}render(){const{children:e}=this.props;return(0,N.jsxs)("div",{ref:e=>this.self=e,children:[e,(0,N.jsx)(R,{container:this.props.container,handleSelectEnd:e=>this.handleSelectEnd(e),onDragStart:this.props.onDragStart,parentRef:this.self,range:this.props.range,selection:this.selection,setSelectionState:this.setSelectionState,showHandles:this.state.showHandles})]})}}L(D,"defaultProps",{onSelectClear:()=>{},onSelectEnd:()=>{}}),L(D,"selectButtonDownEvents",["pointerdown","keydown"]),L(D,"selectButtonUpEvents",["pointerup","keyup","contextmenu"]),L(D,"preventDefault",(e=>e.preventDefault())),L(D,"isSelectButton",(e=>e.isPrimary&&0===e.button||"Shift"===e.key||16===e.keyCode));const U=D;var H=n(70426),F=n(666),$=n(29650);function _(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let q={rootMargin:"-80px 0px 0px 0px",threshold:.01};class V extends i.Component{constructor(){super(...arguments),_(this,"maxWidthOverridePathnames",["/manual/preach-my-gospel-a-guide-to-missionary-service/","/manual/the-family-a-proclamation-to-the-world/","/manual/the-living-christ-the-testimony-of-the-apostles/","/scriptures/af-poster/","/scriptures/harmony/","/manual/book-of-mormon-stories/","/manual/doctrine-and-covenants-stories/","/manual/new-testament-stories/","/manual/old-testament-stories/"]),_(this,"state",{isClient:!1}),_(this,"syncedScrollCallback",((e,t)=>{let n=e.filter((e=>80===e.intersectionRect.top||e.boundingClientRect.bottom<=80))[0];if(n&&this.props.defaultPanelRef.current){let e=`#rca-${n.target.dataset.scrollId}`,t=document.querySelector(e).getBoundingClientRect().top+this.props.defaultPanelRef.current.scrollTop-50;this.props.defaultPanelRef.current.scrollTo({top:t,behavior:"smooth"})}})),_(this,"getActiveItems",c()((e=>{let t=Array.from(document.querySelectorAll("[data-aid-version] [id][data-aid]"),(e=>e.id)),n=(0,m.LM)(e.search);return[(e.pathname.match(/\.(.*$)/)||[])[1]||"",n.id,n.context,n.para,n.verse].join(",").replace(/(\b\d)/g,"p$1").split(",").reduce(((e,n)=>{if(!n||/\?/.test(n))return e;let[i,s=i]=n.split("-"),a=t.indexOf(i),o=t.indexOf(s),r=t.slice(a,o+1);return[...e,...r.filter((t=>!e.includes(t)))]}),[])}))),_(this,"comparePathname",(e=>this.props.location.pathname.includes(e)))}componentDidMount(){this.setState({isClient:!0}),this.syncedScrollObserver=new IntersectionObserver(this.syncedScrollCallback,q),this.altContentBody=f(this.props.data)}componentDidUpdate(e){e.data.uri!==this.props.data.uri&&(this.altContentBody=f(this.props.data))}componentWillUnmount(){this.syncedScrollObserver.disconnect()}render(){const{anAnnotationEditorOpen:e,children:t,className:n,crossLinkMode:i,data:s,frameRef:l,fontSansSerif:c,fontSize:d,highlights:u,id:h,location:p,noIndex:m,onDragStart:g,onSelectEnd:v,onSelectClear:f,range:b,selectI18nStringById:k,theme:C,...j}=this.props;let P,T=s.meta.scopedClassName,w=this.maxWidthOverridePathnames.some(this.comparePathname)&&"has-max-width";const I=s.meta.archived;return P=/_contents|_manifest/.test(s.meta.pageAttributes["data-uri"])?{parseOptions:{replace:(0,x.s3)()},highlights:void 0}:i?{parseOptions:{replace:(0,x.kF)()},highlights:void 0}:{parseOptions:{replace:(0,x.En)(this.props,this.state,{getActiveItems:this.getActiveItems,syncedScrollObserver:this.syncedScrollObserver})},highlights:u},(0,N.jsxs)(S.Z,{type:"narrowReader",id:h,className:a()(n,o.Z.renderFrame),frameRef:l,children:[(0,N.jsx)(O,{...j,meta:s.meta,noIndex:m,pageMeta:s.content.head["page-meta-social"].pageMeta,links:s.content.head.links,scripts:s.content.head.scripts,title:s.content.head.title}),I&&(0,N.jsxs)(H.WarnAlert,{className:o.Z.archivedAlert,id:"archivedAlert",children:[(0,N.jsx)(F.H4,{children:k("archivedAlertTitle")}),(0,N.jsx)($.hh,{children:k("archivedAlertMessage")})]}),t,i?(0,N.jsx)("article",{...(0,r.e_)(s.meta.pageAttributes),className:a()(T,w),children:(0,N.jsx)("div",{className:a()("body",c&&"fontSansSerif"),children:(0,N.jsx)(y.ZP,{...P,children:s.content.body})})}):(0,N.jsx)(U,{anAnnotationEditorOpen:e,disabled:i,onDragStart:g,onSelectEnd:v,onSelectClear:f,container:l.current,range:b,children:(0,N.jsx)("article",{...(0,r.e_)(s.meta.pageAttributes),className:a()(T,w),id:i?void 0:"main",children:(0,N.jsx)("div",{className:a()("body",c&&"fontSansSerif"),style:{"--increment":d},children:(0,N.jsx)(y.ZP,{...P,alternateBody:this.altContentBody,children:s.content.body})})})})]})}}const z=e=>{const t=(0,d.v9)(h.A$),n=(0,d.v9)(h.n7),i=(0,u.TH)(),s=(0,p.Be)(),a=(0,p.V2)(),o=(0,d.v9)(h.sJ),r=(0,d.v9)((e=>(0,h.wv)(e,i))),l=(0,d.v9)((e=>(0,h.x_)(e,i))),c=(0,d.v9)(h.Pu);return(0,N.jsx)(V,{fontSansSerif:t,fontSize:n,activeAnnotationId:o,highlights:r,noIndex:l,selectBookmarksByPid:s,selectI18nStringById:a,theme:c,...e})}},7914:(e,t,n)=>{"use strict";n.d(t,{En:()=>M,kF:()=>A,s3:()=>B});var i=n(67294),s=n(79396),a=n(97762),o=n(94184),r=n.n(o),l=n(33065),c=n(666),d=n(29650),u=n(25935),h=n(26145),p=n(67813),m=n(982),g=n(63642),v=n(35818),f=n(22597),b=n(77999),x=n(30465),y=n(34866),S=n(81359),k=n(39862),C=n(13167),j=n(68741),P=n(3144),N=n(23810),T=n(66527),w=n(63053),O=n(85893);const I=(0,N.ZP)({resolved:{},chunkName:e=>"bitmovin",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:e=>Promise.all([n.e(896),n.e(453)]).then(n.bind(n,33515)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return n(t)},resolve(e){return 33515}},{fallback:(0,O.jsx)(T.Z,{})}),Z=e=>!!["p"].includes(e.name)||!!e.parent&&Z(e.parent),M=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{activeAnnotationId:a,associatedMedia:o,closePanel:c,data:d,disambiguate:C,footnotes:P,footnotesHidden:N,getFootnoteData:T,getCrossRefData:M,location:A,selectActiveAnnotation:B,selectBookmarksByPid:E,template:R,theme:L}=e,{isClient:D}=t,{getActiveItems:U,syncedScrollObserver:H}=n,F={};let $=d.meta.pageAttributes["data-aid"];let _=D&&document.querySelector(`[data-aid='${$}']`)?U(A):[];return(e,t)=>{if(F[e.name]=(F[e.name]||0)+1,"tag"===e.type){if(e.attribs.key||(e.attribs.key=e.name+F[e.name]),e.attribs["data-aid"]){let n=[].concat((0,u.du)(e.children,{replace:t})||[]),a=e.attribs["data-aid"],l=(0,u.e_)(e.attribs);_.includes(e.attribs.id)&&(l.className=r()(l.className,"active-item"));let d=E(a).map((e=>(0,O.jsx)(b.Z,{annotationId:e.annotationId,closePanel:c,disambiguate:C},e.annotationId)));if(n.unshift(...d),o[e.attribs.id]){const e={disambiguate:C,key:l.id,id:l.id,syncedScrollObserver:H},t=(0,O.jsx)(p.Z,{className:s.Z.associatedMediaPointer,icon:!0,...e});n.unshift(t)}return(0,i.createElement)(x.Z,{Component:e.name,...l,key:a},n)}if("img"===e.name){const t=(0,u.e_)(e.attribs);return t.inline=Z(e),"icon"===t.className||"headshot"===t.className||"a"===e.parent.name?["h1","h2","h3","h4","h5","h6"].includes(e.parent.name)?(0,O.jsx)(y.Z,{...t,width:t["data-width"],height:t["data-height"],passedStyle:{display:"inline"}}):(0,O.jsx)(y.Z,{...t,width:t["data-width"],height:t["data-height"]}):(0,O.jsx)(w.Z,{...t,altSource:t["data-alt-source"],height:t["data-height"],width:t["data-width"]})}if("mark"===e.name){const n=e.attribs.annotationid,i=a===n,s=(0,u.e_)(e.attribs),o=[].concat((0,u.du)(e.children,{replace:t})||[]),{first:r,pid:l,icon:c,uris:d}=e.attribs;if(r&&c){const e={annotationId:n,pid:l,icon:c,uri:d,disambiguate:C,syncedScrollObserver:H};o.unshift((0,O.jsx)(v.Z,{icon:!0,...e},n))}return(0,O.jsx)(f.Z,{annotationId:n,disambiguate:C,onClick:()=>B(),children:(0,O.jsx)(h.vc,{annotationId:n,"data-active-mark":i,highlightTheme:L,...s,children:o})},s.key)}if("a"===e.name){let n=(0,u.e_)(e.attribs);const i=(0,u.du)(e.children,{replace:t});if(e.attribs.href&&/note-ref/.test(e.attribs.class)){const e=n.href.slice(1);return n={...n,footnote:P[e],footnotesHidden:N,disambiguate:C,getFootnoteData:T,syncedScrollObserver:H},(0,O.jsx)(g.Z,{...n,children:i})}return e.attribs.href&&(/scripture-ref/.test(e.attribs.class)||/cross-ref/.test(e.attribs.class))?(n={...n,getCrossRefData:M,disambiguate:C},(0,O.jsx)(m.Z,{...n,children:i})):(0,O.jsx)(S.ZP,{...n,children:i})}if("source"===e.name&&!e.attribs.src)return(0,O.jsx)(i.Fragment,{});if("video"===e.name){const t=`${e.attribs.key}-${e.attribs["data-video-id"]}`,n=e.attribs["data-time-end"],i=e.attribs["data-time-start"];return(0,O.jsx)(I,{description:e.attribs["data-video-description"],endTime:n,refId:e.attribs["data-ref-id"],startTime:i,title:e.attribs["data-video-title"]},t)}if("span"===e.name&&/page-break/.test(e.attribs.class)&&(e.children=[]),"record-your-impressions"===e.attribs.class){const t=(0,l.Rh)(e),n=t.attribs["data-aid"],i=t.attribs.id;return(0,O.jsx)(k.Z,{pid:n,siblingId:i},`recordImpressionsButton_${i}`)}if("header"===e.name&&"article"===R&&"header1"===e.attribs.key&&null===e.parent){const t={type:"tag",name:"ActionBar",parent:e,children:[],attribs:{}};return void(e.children=e.children.reduce(((n,i,s)=>{var a,o;return n.length>s?n.concat(i):"byline"===(null===(a=i.attribs)||void 0===a?void 0:a.class)?n.concat(i,t):"kicker"===(null===(o=i.attribs)||void 0===o?void 0:o.class)?n.concat(t,i):s===e.children.length-1?n.concat(i,t):n.concat(i)}),[]).map(((e,t,n)=>(e.next=n[t+1]||null,e.previous=n[t-1]||null,e))))}if("ActionBar"===e.name)return(0,O.jsx)(j.Z,{},"action-bar")}}},A=()=>{const e={};return(t,n)=>{if(e[t.name]=(e[t.name]||0)+1,"tag"===t.type){if(t.attribs.key||(t.attribs.key=t.name+e[t.name]),t.attribs["data-aid"]){let e=(0,u.du)(t.children,{replace:n}),i=t.attribs["data-aid"],s=Object.assign({},(0,u.e_)(t.attribs),{children:e,key:i,pid:i,Component:t.name});return(0,O.jsx)(C.Fq,{...s})}if("a"===t.name){let e=(0,u.e_)(t.attribs),i=(0,u.du)(t.children,{replace:n});return t.attribs.href&&/note-ref/.test(t.attribs.class)?(0,O.jsx)("span",{children:i}):(0,O.jsx)(S.ZP,{...e,children:i})}if("video"===t.name){const e=`${t.attribs.key}-${t.attribs["data-video-id"]}`,n=t.attribs["data-time-end"],i=t.attribs["data-time-start"];return(0,O.jsx)(I,{description:t.attribs["data-video-description"],endTime:n,refId:t.attribs["data-ref-id"],startTime:i,title:t.attribs["data-video-title"]},e)}if("img"===t.name){const e=(0,u.e_)(t.attribs);return e.inline=Z(t),(0,O.jsx)(y.Z,{...e})}if("sup"===t.name&&(t.attribs.class||"").includes("marker"))return(0,O.jsx)(i.Fragment,{});if("footer"===t.name)return(0,O.jsx)(i.Fragment,{})}}},B=()=>{const e={};return(t,n)=>{if(e[t.name]=(e[t.name]||0)+1,"tag"===t.type){if(t.attribs.key||(t.attribs.key=t.name+e[t.name]),"header"===t.name&&null===t.parent){const{title:e,subtitle:n,deck:i}=t.children.reduce(((e,t)=>("tag"!==t.type||(e[t.attribs.class]=(0,u.du)([t])),e)),{});return(0,O.jsxs)("header",{children:[e&&(0,O.jsx)(c.wo,{children:e}),n&&(0,O.jsx)(c.Rn,{children:n}),i&&(0,O.jsx)(d.Rw,{children:i})]})}if("a"===t.name){const e=(0,u.du)(t.children,{replace:n});let i=(0,u.e_)(t.attribs);if(/list-tile/.test(t.attribs.class)){let{title:e,primaryMeta:n,secondaryMeta:s,image:o,description:r}=t.children.reduce(((e,t)=>("tag"!==t.type||("img"===t.name?(e.image=t.attribs,e.image.alt=t.attribs.alt||"",e.image.srcSet=t.attribs.srcset):e[t.attribs.class]=(0,u.du)([t])),e)),{});return(0,O.jsx)(P.Z,{...i,alignment:"start",description:(0,a.uS)(r),image:o,primaryMeta:n,secondaryMeta:s,title:e})}return(0,O.jsx)(S.ZP,{...i,children:e})}if("label"===t.attribs.class){const e=(0,u.du)(t.children,{replace:n});let i=(0,u.e_)(t.attribs);return(0,O.jsx)(c.Rn,{...i,children:e})}}}}},31e3:(e,t,n)=>{"use strict";n.d(t,{L:()=>h,Z:()=>p});const i="menuLabel-A5h02",s="children-Ut_1c",a="disabled-Nf2xc";var o=n(94184),r=n.n(o),l=n(1119),c=n(11781),d=n(29650),u=n(85893);const h=e=>{let{align:t,children:n,className:o,description:h,disabled:p,labelId:m,testId:g,title:v,tooltip:f}=e;return void 0===t&&(t=h?"bottom":"top"),(0,u.jsx)(l.Z,{children:(0,u.jsxs)(c.Z,{className:r()(i,o,p&&a),htmlFor:m,children:[(0,u.jsxs)("div",{"data-testid":`${g}-menu-label`,children:[(0,u.jsx)(d.hh,{emphasized:!0,children:v}),f,"top"===t&&(0,u.jsx)("span",{className:s,children:n})]}),h&&(0,u.jsxs)("div",{children:[(0,u.jsx)(d.yr,{children:h}),"bottom"===t&&(0,u.jsx)("span",{className:s,children:n})]})]})})},p=h},40514:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});const i="notebookIcon-bGrdA";var s=n(67294),a=n(86706),o=n(14791),r=n(39516),l=n(6267),c=n(63927),d=n(62716),u=n(44325),h=n(85893);const p=e=>{let{addFolder:t,annotation:n,autoFocused:a,removeFolder:o,selectI18nStringById:r,folders:l={},...c}=e;const p=(0,s.useMemo)((()=>Object.values(l).filter((e=>!n.folders.includes(e))).map((e=>{let{name:t,id:n}=e;return{title:t,id:n}}))),[n.folders,l]);return(0,h.jsx)(u.ZP,{addNewString:r("annotationNewTagPostTitle"),autoFocus:!0,icon:(0,h.jsx)(d.Z,{className:i}),items:p,renderId:n.id,onSubmit:function(){let{title:e,id:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t({name:e,id:n})},placeholderText:r("addNotebookPlaceholder"),removeTag:o,tagItems:null==n?void 0:n.folders,title:r("annotationAddToNotebookTitle"),testId:"notebook",...c})},m=e=>{const t=(0,a.I0)(),n=(0,a.v9)(l.$g),i=(0,c.V2)(),d=(0,a.v9)(l.B5),u=(0,s.useMemo)((()=>(0,o.DE)({addFolder:r.oN,removeFolder:r.Ih},t)),[t]);return(0,h.jsx)(p,{annotation:n,selectI18nStringById:i,folders:d,...u,...e})}},15020:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});const i="message-vM7mR";var s=n(94184),a=n.n(s),o=n(63927),r=n(85893);const l=e=>{let{className:t,Component:n="span",selectI18nStringById:s,...o}=e;return(0,r.jsx)(n,{className:a()(i,t),...o,children:s("annotationsOutOfServiceText")})},c=e=>{const t=(0,o.V2)();return(0,r.jsx)(l,{selectI18nStringById:t,...e})}},73370:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(67294);const s="printOptions-IzHHk",a="printButtons-wsxZG";var o=n(86706),r=n(6267),l=n(33724),c=n(1577),d=n(63927),u=n(90104),h=n(39587),p=n(85893);const m=e=>{let{footnotesHidden:t,loggedIn:n,onCancel:o,onClose:r,printHighlights:l,selectI18nStringById:d,setPrintHighlights:m}=e;const[g,v]=(0,i.useState)(!t||!1);(0,i.useEffect)((()=>()=>{document.body.classList.remove("print-show-footnotes--override","print-hide-footnotes--override")}),[]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:s,children:[(0,p.jsx)(u.Z,{description:!n&&d("printOptionsSignInPrompt"),disabled:!n,onToggle:e=>{const t=!l;m(t),t?document.body.classList.remove("print-hide-highlights"):document.body.classList.add("print-hide-highlights")},optionId:"disable-highlights",title:d("printOptionsPrintHighlights"),value:l}),(0,p.jsx)(u.Z,{onToggle:e=>{v(!g)},optionId:"include-footnotes",title:d("printOptionsPrintFootnotes"),value:g})]}),(0,p.jsxs)("div",{className:a,children:[(0,p.jsx)(h.kq,{onClick:o,small:!0,"data-testid":"print-cancel",children:d("printOptionsCancel")}),(0,p.jsx)(h.KM,{onClick:()=>{c.Z.fireShareEvent({component:{info:{channel:"print",link:window.location.href}}}),document.body.classList.remove("print-show-footnotes--override","print-hide-footnotes--override"),g?document.body.classList.add("print-show-footnotes--override"):document.body.classList.add("print-hide-footnotes--override"),window.print(),r&&r()},small:!0,"data-testid":"print-confirm",children:d("printOptionsConfirm")})]})]})},g=e=>{const t=(0,o.I0)(),n=(0,o.v9)(r.bK),i=(0,o.v9)(r.gs),s=(0,o.v9)(r.g6),a=(0,d.V2)();return(0,p.jsx)(m,{footnotesHidden:n,loggedIn:i,printHighlights:s,selectI18nStringById:a,setPrintHighlights:e=>t((0,l.setPrintHighlights)(e)),...e})}},43930:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(67294);const s="printModal-DCxqf";var a=n(63927),o=n(1577),r=n(88579),l=n(73370),c=n(85893);const d=e=>{let{selectI18nStringById:t}=e;const[n,a]=(0,i.useState)(!1),d=()=>a(!1);(0,i.useEffect)((()=>(window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)})),[]);const u=e=>{80===e.keyCode&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),a(!0),o.Z.fireComponentClickEvent({component:{attributes:{inputDevice:"keyboard"},category:{primary:"modal"},info:{name:"print"}}}))};return(0,c.jsx)(r.u,{active:n,className:s,heading:t("printSettingsTitle"),onCloseGesture:d,children:(0,c.jsx)(l.Z,{onCancel:d,onClose:d})})},u=e=>{const t=(0,a.V2)();return(0,c.jsx)(d,{...e,selectI18nStringById:t})}},76139:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(86706),s=n(16550);const a="readerViewHeader-HnrCv",o="iconGroupStart-KPXEj",r="iconGroupEnd-oqmhd",l="activePanel-bVs7b",c="contentTitle-JbPZw",d="catalogTitle-KCT7_";var u=n(6267),h=n(63927),p=n(69025),m=n(15836),g=n(89516),v=n(91499),f=n(666),b=n(77123),x=n(56255),y=n(38035),S=n(70165),k=n(85893);const C=(0,v.e)(b.Z),j=(0,v.e)(x.Z),P=(0,v.e)(y.Z),N=(0,v.e)(S.Z);C.displayName="BookmarksButton",j.displayName="BookPublishedButton",P.displayName="OptionsButton",N.displayName="RelatedContentButton";const T=e=>{let{activePanel:t,catalogTitle:n,content:i,contentType:s,contentTemplateType:u,crossLinkMode:h,selectI18nStringById:v,toggleSidePanel:b,toggleTableOfContentsPanel:x}=e;const y=("magazine"===s||"general-conference"===s)&&"contents/manifest"!==u;return(0,k.jsxs)("header",{className:a,"data-testid":"readerview-header",children:[(0,k.jsx)("div",{className:o,children:(0,k.jsx)(j,{onClick:(0,p.Z)(x),title:v("tableOfContentsIconTitleText")})}),(0,k.jsxs)("span",{className:c,onClick:()=>x(),children:[(0,k.jsx)(m.Z,{children:i.meta&&i.meta.title}),y&&(0,k.jsx)(f.L8,{className:d,children:n})]}),(0,k.jsx)("div",{className:r,children:!h&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(g.Z,{className:"StudySetsPanel"===t&&l,onClick:()=>b("StudySetsPanel"),"data-testid":"study-sets-tab"}),(0,k.jsx)(C,{className:"BookmarksPanel"===t&&l,hiddenTitleText:v("bookmarkManagerTitle"),onClick:()=>b("BookmarksPanel"),title:v("bookmarkManagerTitle"),"data-testid":"bookmarks-tab"}),(0,k.jsx)(N,{className:"RelatedContentPanel"===t&&l,hiddenTitleText:v("relatedContentIconTitleText"),onClick:()=>b("RelatedContentPanel"),title:v("relatedContentIconTitleText"),"data-testid":"rca-tab"}),(0,k.jsx)(P,{className:"OptionsPanel"===t&&l,hiddenTitleText:v("optionsTitle"),onClick:()=>b("OptionsPanel"),title:v("optionsTitle"),"data-testid":"options-tab"})]})})]})},w=e=>{const t=(0,s.TH)(),n=(0,i.v9)(u.p2),a=(0,i.v9)((e=>(0,u._q)(e,t))),o=(0,i.v9)((e=>(0,u.n6)(e,t))),r=(0,i.v9)((e=>(0,u.hY)(e,t))),l=(0,h.V2)();return(0,k.jsx)(T,{activePanel:n,catalogTitle:a,contentTemplateType:r,contentType:o,selectI18nStringById:l,...e})}},39862:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var i=n(67294);const s="button-ddhVT";var a=n(86706),o=n(16550),r=n(14791),l=n(39516),c=n(61027),d=n(18327),u=n(6267),h=n(18511),p=n(63927),m=n(50097),g=n(1262),v=n(35404),f=n(39587),b=n(85893);const x=async e=>{let{addHighlight:t,changeActiveAnnotation:n,loggedIn:i,matchingAnnotations:s=[],offsets:a,addFloatingPanel:o,location:r}=e;if(!i)return(0,g.IY)("highlightRange",a),void(window.location=(0,h.Md)());if(!s.length){s=[{id:await t({offsets:a,style:{clear:!0}},r,!1)}]}const l=s[0];n(l.id),o({annotationId:l.id,autoFocus:"notes",id:`${l.id}-editor`,type:"editor"})},y=(0,i.memo)((e=>{var t,n,a;const{annotations:o,annotationsInitialized:r,annotationsOutOfService:l,location:c,loggedIn:d,pid:u,selectI18nStringById:h,showToast:p,siblingId:y}=e,S=[{endOffset:"-1",startOffset:"-1",uri:`${(0,v.on)(c.pathname)}.${y}`,pid:u}],k=(0,m.fG)(o,S);(0,i.useEffect)((()=>{const t=JSON.parse((0,g.fp)("highlightRange"));t&&d&&r&&function(e,t){return 1===e.length&&e[0].pid===t}(t,u)&&((0,g.Rv)("highlightRange"),x({...e,location:c,matchingAnnotations:k,offsets:S}))}),[d,r,u]);const C=k&&(null===(t=k[0])||void 0===t?void 0:t.note),j=h(C&&((null==C||null===(n=C.content)||void 0===n?void 0:n.length)||(null==C||null===(a=C.title)||void 0===a?void 0:a.length))?"recordImpressionsButtonTextEdit":"recordImpressionsButtonTextCreate");return(0,b.jsx)(f.KM,{className:s,onClick:()=>{l?p({type:"annotations-out-of-service",disableAutoHide:!0}):x({...e,location:c,matchingAnnotations:k,offsets:S})},children:j})})),S=e=>{const t=(0,o.TH)(),n=(0,a.v9)((e=>(0,u.uS)(e,t))),s=(0,a.v9)((e=>(0,u.wE)(e,t))),h=(0,a.v9)(u.y8),m=(0,a.v9)(u.gs),g=(0,p.V2)(),v=(0,a.I0)(),f=(0,i.useMemo)((()=>(0,r.DE)({addHighlight:l.CC,addFloatingPanel:d.Vh,changeActiveAnnotation:l.uG,showToast:c.showToast},v)),[v]);return(0,b.jsx)(y,{annotations:n,annotationsInitialized:s,annotationsOutOfService:h,location:t,loggedIn:m,selectI18nStringById:g,...f,...e})};S.displayName="RecordImpressionsButtonContainer";const k=S},15836:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(67294),s=n(94184),a=n.n(s);const o={HTMLRenderer:"HTMLRenderer-r3ZjH"};var r=n(85893);class l extends i.Component{render(){const{children:e,html:t,className:n,type:i,...s}=this.props;return(e=>{let{__html:t,children:n}=e;return"object"!=typeof n&&("string"==typeof t||"string"==typeof n)})({__html:t,children:e})?(0,r.jsx)("div",{className:a()(o.renderHtml,n,o[i]),...s,dangerouslySetInnerHTML:{__html:t||e}}):(0,r.jsx)("div",{className:a()(o.renderHtml,n,o[i]),...s,children:e})}}const c=l},13167:(e,t,n)=>{"use strict";n.d(t,{eI:()=>l,Fq:()=>u});var i=n(67294);const s="selected-GgYAX",a="selectableParagraph-RR3GO";var o=n(85893);const r=(0,i.createContext)(),l=e=>{let{children:t,value:n}=e;return(0,o.jsx)(r.Provider,{value:n,children:t})};var c=n(94184),d=n.n(c);const u=e=>{let{Component:t,pid:n,...l}=e;const{selectedPids:c,dispatch:u}=(0,i.useContext)(r),h=c.has(n),p=(0,i.useCallback)((()=>{u({type:h?"remove":"add",payload:n})}),[h]);return(0,o.jsx)(t,{...l,className:d()(a,h&&s,l.className&&l.className),onClick:p})}},90104:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(94184),s=n.n(i);const a="toggleOption-Zcyf9",o="toggle-zjlfs";var r=n(31e3),l=n(17263),c=n(85893);const d=e=>{let{className:t,description:n,disabled:i,onToggle:d,optionId:u,title:h,toggleTitle:p,value:m}=e;return(0,c.jsx)(r.L,{align:"top",className:s()(a,t),description:n,disabled:i,labelId:`${u}-toggle`,testId:u,title:h,children:(0,c.jsx)(l.Z,{className:o,"data-testid":`${u}-toggle`,disabled:i,id:`${u}-toggle`,on:m,onToggle:d,small:!0,title:p})})}},86535:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(67294);const s=(0,n(85326).Z)((e=>{let{addStyleSheet:t,children:n=null,currentLinks:s=[],links:a=[],loadedStyles:o,removeStyleSheet:r,styleSheetLoaded:l,...c}=e;return(0,i.useEffect)((()=>{a.forEach((e=>{s.find((t=>t.href===e.href))||t(e)}))}),[s,a,t]),a.some((e=>!o.includes(e.href)))?null:n}))},93351:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ee});var i=n(67294),s=n(86706),a=n(16550);const o="backToAll-UOcb9",r="backText-x1fGy",l="backIcon-XouQc",c="backToLink-iuO6Q",d="tocWrapper-SHEaS",u="tocPanelBottomBuffer-jPBYo",h="hiddenPlatformFooter-GfoTA";var p=n(63927),m=n(69025),g=n(6267),v=n(35404),f=n(76276);const b={tableOfContents:"tableOfContents-HYfFr",subItems:"subItems-iyPWM",open:"open-C1MIf",active:"active-tEupD",item:"item-U_5Ca",sectionTitle:"sectionTitle-_Dn99",bookTitle:"bookTitle-XO2nM",hasQuickNav:"hasQuickNav-Rd1tE",itemTitle:"itemTitle-MXhtV",activeMarker:"activeMarker-JuaTC",sectionLabel:"sectionLabel-HdHsm",sectionDrawer:"sectionDrawer-yKL0i",pretitle:"pretitle-U8363",titleNumber:"titleNumber-oxcvl",subtitle:"subtitle-LKtQp",seriesTitle:"seriesTitle-YRDM6",songNumber:"songNumber-vZmKj",quickNav:"quickNav-FdnVQ"};var x=n(27274),y=n.n(x),S=n(20296),k=n.n(S),C=n(60152),j=n(6837),P=n(85893);function N(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class T extends i.Component{constructor(){super(...arguments),N(this,"state",{scrollbarOffset:0}),N(this,"resizeNav",k()((()=>{var e,t;let n=(null===(e=this.quickNav)||void 0===e?void 0:e.offsetHeight)-100,i=null===(t=this.quickNav)||void 0===t?void 0:t.firstElementChild.offsetHeight,s=Math.floor(n/i);this.setState({availableSlots:s})}))),N(this,"handlePointerDown",(e=>this.setState({pointerDown:!0}))),N(this,"handlePointerMove",(0,C.P)((e=>0===e.buttons&&this.state.pointerDown&&this.setState({pointerDown:!1})))),N(this,"handlePointerEnter",(e=>this.state.pointerDown&&e.currentTarget.click())),N(this,"handleClick",(e=>t=>{let n=document.querySelector(e),i=y()(n),s=n.closest(`.${b.sectionLabel} + ul`);i.scrollTop=n.offsetTop,"mouse"!==t.nativeEvent.pointerType&&n.focus(),s&&(i.scrollTop-=30)}))}componentDidMount(){this.resizeNav(),window.addEventListener("resize",this.resizeNav),document.addEventListener("pointermove",this.handlePointerMove)}componentWillUnmount(){window.removeEventListener("resize",this.resizeNav),document.removeEventListener("pointermove",this.handlePointerMove)}fillNav(){const{entries:e}=this.props,{availableSlots:t=e.length}=this.state,n=e.length-t,i=n/(t-1);let s=0;return e.reduce(((e,t)=>{let{title:a,uri:o}=t;return s>.5&&s<=n?--s:(e.push((0,P.jsx)("li",{children:(0,P.jsx)("button",{onClick:this.handleClick(o),onPointerEnter:this.handlePointerEnter,children:a})},`quickNav_${o.slice(1)}`)),s+=i),e}),[])}render(){return(0,P.jsx)("ul",{className:b.quickNav,"data-testid":"quick-nav",onPointerDown:this.handlePointerDown,"touch-action":"none",ref:e=>this.quickNav=e,children:this.fillNav()})}}T.defualtName="QuickNav";const w=(0,j.FU)(T);var O=n(44295),I=n(23977),Z=n(81359),M=n(79167),A=n(94184),B=n.n(A),E=n(31073),R=n(84761);const L=()=>(0,P.jsx)("span",{className:b.activeMarker}),D=e=>{let{active:t,titleNumber:n,seriesTitle:i,songNumber:s,subtitle:a,title:o}=e;return(0,P.jsxs)("div",{className:b.itemTitle,children:[t&&(0,P.jsx)(L,{}),n&&(0,P.jsx)("p",{className:b.titleNumber,dangerouslySetInnerHTML:{__html:n}}),i&&(0,P.jsx)("p",{className:b.seriesTitle,dangerouslySetInnerHTML:{__html:i}}),o&&(0,P.jsxs)("p",{className:b.title,children:[s&&(0,P.jsx)("span",{className:b.songNumber,children:s}),(0,P.jsx)("span",{dangerouslySetInnerHTML:{__html:o}})]}),a&&(0,P.jsx)("p",{className:b.subtitle,dangerouslySetInnerHTML:{__html:a}})]})};class U extends i.PureComponent{render(){const{activeUri:e,className:t,id:n,indent:i=0,titleNumber:s,seriesTitle:a,songNumber:o,subtitle:r,title:l,uri:c}=this.props,d=e===c;return(0,P.jsx)(Z.ZP,{className:B()(t,b.item,d&&b.active),id:n,style:{paddingInlineStart:16*i+"px"},to:c,children:(0,P.jsx)(D,{active:d,title:l,subtitle:r,songNumber:o,seriesTitle:a,titleNumber:s})})}}const H=U;var F=n(13256);function $(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _ extends i.PureComponent{constructor(){super(...arguments),$(this,"state",{isAnyChildActive:!1,open:!1,userOpenState:void 0}),$(this,"buildKey",(e=>{let{uri:t="",title:n}=e;return t+n})),$(this,"openDrawer",(()=>{this.setState({userOpenState:!this.state.open})}))}static getDerivedStateFromProps(e,t){var n;let{activeUri:i,childUris:s}=e,{open:a,userOpenState:o}=t,r=i&&s.includes(i);return null!==(n=e.type)&&void 0!==n&&n.includes("drawer")?(a=void 0!==o?o:r,o=r||o?o:void 0,{isAnyChildActive:r,open:a,userOpenState:o}):{isAnyChildActive:r}}render(){const{activeForce:e,activeUri:t,bookUri:n,children:s,directChildUris:a,entries:o,id:r,indent:l=0,levelProps:c={},sectionClassName:d,seriesTitle:u,subtitle:h,title:p,type:g,uri:v}=this.props,{isAnyChildActive:f,open:x}=this.state;let y,S;t&&(y=null==e?t===(v&&"content-drawer"!==g)||f&&(null==g?void 0:g.includes("drawer"))&&!x:e,S=(null==g?void 0:g.includes("drawer"))&&a.includes(t));let k={activeUri:(f||v===n)&&t,bookUri:n,indent:l+1,sectionClassName:b.sectionTitle,...c},C=B()(d,(y||S)&&b.active,"label"===g?b.sectionLabel:(null==g?void 0:g.includes("drawer"))&&b.sectionDrawer),j=B()(b.subItems,S&&b.active,(!(null!=g&&g.includes("drawer"))||x)&&b.open);return(0,P.jsxs)(i.Fragment,{children:[p&&(0,P.jsxs)(Z.ZP,{to:null==g||!g.includes("content")||x||S?void 0:v,className:C,onClick:(0,m.Z)(this.openDrawer),onKeyPress:(0,m.Z)(this.openDrawer),style:{paddingInlineStart:16*l+"px"},tabIndex:g&&"label"!==g?0:void 0,children:[(0,P.jsx)(D,{active:y||void 0,title:p,subtitle:h,seriesTitle:u}),(null==g?void 0:g.includes("drawer"))&&(x?(0,P.jsx)(E.Z,{size:F.CB}):(0,P.jsx)(R.Z,{size:F.CB}))]}),s,(!(null!=g&&g.includes("drawer"))||x)&&(0,P.jsx)("ul",{id:r,className:j,children:o.map(((e,t)=>{let{section:n,content:i}=e;return(0,P.jsx)("li",{children:n?(0,P.jsx)(_,{...k,...n}):(0,P.jsx)(H,{...k,...i})},`li_${this.buildKey(n||i)}`)}))})]})}}$(_,"defaultProps",{childUris:[],directChildUris:[]});const q=_;class V extends i.PureComponent{render(){const{activeUri:e,className:t="",book:{quickNav:n,...i}}=this.props;return(0,P.jsx)("nav",{className:B()(b.tableOfContents,n?b.hasQuickNav:"",t),ref:e=>this.self=e,children:i.entries&&(0,P.jsx)(q,{activeForce:!1,activeUri:e,levelProps:{className:b.sectionTitle},sectionClassName:b.bookTitle,bookUri:i.uri,...i})})}}const z=V;var W=n(6912),K=n(91499),G=n(37551),Q=n(80784);const X=(0,K.e)(G.Z),Y=(0,K.e)(Q.Z),J=e=>{let{activeUri:t,book:n,className:s,handleVirtualScroll:a,libraryTitle:p,libraryUri:g,location:v,selectI18nStringById:b,tableOfContentsPanelOpen:x,toggleTableOfContentsPanel:y}=e;const S=n.quickNav,k=(0,i.useRef)();return(0,i.useEffect)((()=>{x&&k.current.focus()}),[x]),(0,P.jsx)(O.Z,{className:s,Component:"section",children:x?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(I.Z,{className:o,testId:"toc",children:[(0,P.jsxs)(Z.ZP,{to:g,className:r,ref:k,children:[(0,P.jsx)(X,{className:l,hiddenTitleText:b("backButtonText"),"data-testid":"toc-back"}),(0,P.jsx)("span",{className:c,children:p})]}),(0,P.jsx)(Y,{onClick:(0,m.Z)(y,!1),hiddenTitleText:b("closePanelButtonText"),"data-testid":"toc-close"})]}),(0,P.jsxs)(M.Z,{handleVirtualScroll:a,testId:"toc",children:[(0,P.jsxs)("div",{className:d,children:[f.ZP&&S&&(0,P.jsx)(w,{entries:S}),(0,P.jsx)(z,{book:n,location:v,activeUri:t})]}),(0,P.jsx)(W.Z,{forceMobile:!0,panelFooter:!0}),(0,P.jsx)("div",{className:u})]})]}):(0,P.jsx)(W.Z,{className:h,forceMobile:!0})})},ee=e=>{const t=(0,a.TH)(),n=(0,s.v9)((e=>(0,g.uo)(e,t))),i=n.parentNameOverride||n.parentName,o=(0,v.aq)(n.parentUriOverride)||(0,v.aq)(n.parentUri),r=(0,p.V2)();return(0,P.jsx)(J,{book:n,libraryTitle:i,libraryUri:o,location:t,selectI18nStringById:r,...e})}},15230:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});const i="tagIcon-XNkZ_";var s=n(67294),a=n(86706),o=n(14791),r=n(39516),l=n(6267),c=n(63927),d=n(38628),u=n(44325),h=n(85893);const p=e=>{let{addTag:t,annotation:n,autoFocused:a,removeTag:o,selectI18nStringById:r,tags:l={},...c}=e;const p=(0,s.useMemo)((()=>Object.values(l).filter((e=>!n.tags.includes(e))).map((e=>{let{name:t,id:n}=e;return{title:t,id:n}}))),[n.tags,l]);return(0,h.jsx)(u.ZP,{addNewString:r("annotationNewTagPostTitle"),autoFocus:!0,icon:(0,h.jsx)(d.Z,{className:i}),renderId:n.id,items:p,onSubmit:function(){let{title:e,id:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t({name:e,id:n})},placeholderText:r("addTagPlaceholder"),removeTag:o,tagItems:null==n?void 0:n.tags,title:r("annotationTags"),testId:"tag",...c})},m=e=>{const t=(0,a.I0)(),n=(0,a.v9)(l.$g),i=(0,c.V2)(),d=(0,a.v9)(l.a0),u=(0,s.useMemo)((()=>(0,o.DE)({addTag:r._U,removeTag:r.tc},t)),[t]);return(0,h.jsx)(p,{annotation:n,selectI18nStringById:i,tags:d,...u,...e})}},34592:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});const i="innerWrapper-CFoW1",s="tag-tcU_y";var a=n(85691),o=n(81359),r=n(94184),l=n.n(r),c=n(85893);const d=e=>{let{handleClick:t,href:n,onClose:i,...s}=e;return(0,c.jsx)(a.ML,{onClick:i,...s})},u={actionable:e=>{let{handleClick:t,href:n,onClose:i,...s}=e;const r=(0,c.jsx)(a.ZO,{onClick:t,...s});return n?(0,c.jsx)(o.ZP,{href:n,children:r}):r},combo:e=>{let{children:t,disabled:n,handleClick:i,href:s,onClose:o,selected:r,...l}=e;return(0,c.jsxs)(a.M5,{...l,children:[(0,c.jsx)(a.ZO,{disabled:n,onClick:i,selected:r,children:t}),(0,c.jsx)(d,{disabled:n,onClick:o,selected:r,children:t})]})},dismissible:d},h=e=>{let{className:t,editing:n,onClose:a,handleClick:o,href:r,tags:d=[],type:h="actionable",state:p}=e;const m=u[h];return d.length?(0,c.jsx)("section",{className:t,children:(0,c.jsx)("div",{className:i,children:d.map(((e,t)=>{let{content:i,disabled:r,href:d,key:u,name:h,selected:p}=e;return p=p??(n&&n===u),(0,c.jsx)(m,{className:l()(s,p),disabled:r,handleClick:e=>o(e,t,d),href:d,onClose:e=>a(e,t),selected:p,children:i||h},`tag-${u||h||t}`)}))})}):null}},44325:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>P});var i=n(67294);const s={typeaheadTagListModal:"typeaheadTagListModal-tmY_Z",modalTitle:"modalTitle-O7ngr",modalButtons:"modalButtons-XGHkQ",card:"card-d5q8w",notebookIcon:"notebookIcon-n8C6Y",tagIcon:"tagIcon-OCc4H",tag:"tag-goU51",tagText:"tagText-uUGTR",tagList:"tagList-O7scg"};var a=n(63927),o=n(91499),r=n(85610),l=n(80784),c=n(51976);const d="positionByRange-dMisw",u="hidden-E9485";var h=n(94184),p=n.n(h),m=n(48844),g=n(85893);const v=m.Z.apple.device?16:8,f=e=>{let{children:t,container:n,range:s,...a}=e;const o=(0,i.useRef)(),[r,l]=(0,i.useState)();(0,i.useEffect)((()=>{var e;const t=(null===(e=o.current)||void 0===e?void 0:e.getBoundingClientRect())||{},n=c.top-t.height-v,i=c.bottom+t.height+24,s=!(n-h.top<20||n<60),a=!(i>window.innerHeight-20);l(s?"top":a?"bottom":"middle")}),[s]);const c=(null==s?void 0:s.getBoundingClientRect())||{},h=(null==n?void 0:n.getBoundingClientRect())||{};let m={};return"top"===r?m.bottom=`${h.bottom-c.top+v}px`:"bottom"===r?m.top=c.bottom-h.top+24+"px":(m.top=window.innerHeight/2-h.top+"px",m.transform="translate(-50%, -50%)"),(0,g.jsx)("div",{onPointerUpCapture:e=>e.stopPropagation(),onMouseUpCapture:e=>e.stopPropagation(),onTouchEndCapture:e=>e.stopPropagation(),onKeyUpCapture:e=>e.stopPropagation(),onContextMenuCapture:e=>e.stopPropagation(),className:p()(d,!r&&u),ref:o,style:m,children:t})};var b=n(39587),x=n(85691),y=n(666);const S=(0,o.e)(l.Z);S.displayName="CloseButton";const k=e=>{let{tagItems:t,removeTag:n}=e;return null==t?void 0:t.map((e=>(0,g.jsx)(x.ML,{className:s.tag,showClose:!0,onClick:()=>n(e.id),children:(0,g.jsx)("span",{className:s.tagText,children:e.name})},e.id)))},C=e=>{let{addNewString:t,autoFocus:n=!0,icon:a,items:o=[],renderId:l,onClose:d,onSave:u,onSubmit:h,placeholderText:p,removeTag:m,searchKeys:v,selectI18nStringById:f,tagItems:x,title:C,testId:j}=e;const P=(0,i.useCallback)(((e,n,i)=>{const s=null==x?void 0:x.map((e=>{let{name:t}=e;return t}));return e.some((e=>e.title===i||s.includes(i)))?n:[{title:i,postTitle:`- ${t}`},...n]}),[t,x]),N=(0,i.useMemo)((()=>({removeTag:m,tagItems:x})),[m,x]);return(0,g.jsx)(r.Z,{depth:"poppedOut",className:s.card,children:(0,g.jsxs)("div",{className:s.typeaheadTagListModal,children:[(0,g.jsxs)("header",{children:[(0,g.jsx)(y.Gn,{className:s.modalTitle,"data-testid":`${j}-modal-title`,children:C}),(0,g.jsxs)("span",{className:s.modalButtons,children:[(0,g.jsx)(b.gh,{onClick:()=>u(),id:"save-button","data-testid":`${j}-modal-save`,children:f("annotationMenuSaveText")}),(0,g.jsx)(S,{className:s.closeButton,onClick:()=>d(),title:f("annotationMenuCloseText"),"data-testid":`${j}-modal-close`})]})]}),(0,g.jsx)(c.Z,{autoFocus:n,className:s.tagList,items:o,minChars:1,renderId:l,onSubmit:h,placeholder:p,render:k,renderProps:N,resultsModifier:P,searchKeys:v,children:a})]})})},j=e=>{let{range:t,container:n,...i}=e;return(0,g.jsx)(f,{container:n,range:t,children:(0,g.jsx)(C,{...i})})},P=e=>{const t=(0,a.V2)();return(0,g.jsx)(j,{selectI18nStringById:t,...e})}},67577:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>q});var i=n(67294),s=n(95715),a=n(94184),o=n.n(a),r=n(1577),l=n(48844),c=n(60152),d=n(50097),u=n(33065),h=n(74e3),p=n(23810),m=n(54808),g=n(15230),v=n(11274),f=n(91499),b=n(33594),x=n(66527),y=n(2130),S=n(81359),k=n(70466),C=n(83940),j=n(96182),P=n(75522),N=n(38233),T=n(65552),w=n(58083),O=n(43930),I=n(40514),Z=n(26503),M=n(76139),A=n(93351),B=n(85893);function E(e,t,n){return(t=R(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){var t=L(e,"string");return"symbol"==typeof t?t:String(t)}function L(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}const D=(0,p.ZP)({resolved:{},chunkName:e=>"audio-player",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:e=>Promise.all([n.e(479),n.e(845)]).then(n.bind(n,55656)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return n(t)},resolve(e){return 55656}},{fallback:(0,B.jsx)(x.Z,{})}),U=(0,f.e)(j.Z),H=(0,f.e)(P.Z),F=(0,f.e)(N.Z),$=e=>{let{dir:t,...n}=e;return(0,f.e)(N.Z)({style:{transform:"ltr"===t?"scale(-1)":"scale(1)"},...n})};U.displayName="ChevronLeftLargeButton",H.displayName="ChevronRightLargeButton",F.displayName="ArrowLeftButton",$.displayName="ArrowRightButton";class _ extends i.Component{constructor(e){var t;super(e),t=this,E(this,"scrollUtils",{}),E(this,"getActiveIndex",(()=>{let{book:{navList:e},location:t}=this.props,[n,i]=t.pathname.split("."),s=t.hash,a=`${n}${s}`,o=`${n}#${i}`,r=e.findIndex((e=>e===n||e===a||e===o));return-1===r&&(r=e.findIndex((e=>e.split("#")[0]===n))),r})),E(this,"handleDesktopMediaQueryList",(e=>this.setState({isDesktop:e.matches}))),E(this,"handleTabletMediaQueryList",(e=>this.setState({isTablet:e.matches}))),E(this,"handleKeyEvents",(0,c.l)((e=>{const{activePanel:t,dir:n,history:i,lang:s}=this.props,{modalOpen:a,next:o,prev:r}=this.state;let l="ltr"===n?r:o,c="ltr"===n?o:r;a||"EditorPanel"===t||("ArrowRight"!==e.key&&39!==e.keyCode||!c?"ArrowLeft"!==e.key&&37!==e.keyCode||!l||(this.clearSelection(),(0,S.c4)(l,s,i)):(this.clearSelection(),(0,S.c4)(c,s,i)))}),300)),E(this,"toggleModal",(e=>()=>{const t="CrossLinkOverlay"===e&&!this.state.crossLinkOverlayOpen,n="NotebookModal"===e&&!this.state.notebookModalOpen,i="TagModal"===e&&!this.state.tagModalOpen;this.setState((()=>({crossLinkOverlayOpen:t,notebookModalOpen:n,tagModalOpen:i,modalOpen:t||n||i})),(()=>{!this.state.modalOpen&&this.state.activeRange&&this.selectActiveAnnotation()}))})),E(this,"toggleSidePanel",(e=>{const{activePanel:t,setActivePanel:n}=this.props;n(t===e?null:e),"StudySetsPanel"===e&&t!==e&&r.Z.fireStudyToolsEvent({component:{info:{name:"study set"},category:{type:"view"}}}),"OptionsPanel"===e&&t!==e&&r.Z.fireComponentClickEvent({component:{info:{name:"options"},category:{primary:"site tools"}}}),"RelatedContentPanel"===e&&t!==e&&r.Z.fireAssociatedRelatedContentEvent({context:"related"})})),E(this,"toggleTableOfContentsPanel",(e=>{const t=void 0===e?!this.state.tableOfContentsPanelOpen:!!e;this.setState({tableOfContentsPanelOpen:t})})),E(this,"toggleAudioPlayer",(e=>{this.setState((e=>({audioPlayerOpen:!e.audioPlayerOpen})))})),E(this,"disambiguate",(()=>{let e,t=[],n=[];return i=>{n.includes(i.id)||(n.push(i.id),t.push(i),clearTimeout(e),e=setTimeout((()=>{this.handlePanels(n,t),n=[],t=[]}),100))}})()),E(this,"handleAudioNavigation",(()=>{var e,t;const{lang:n,history:i,book:{navList:s}}=this.props,a=this.getActiveIndex(),o=null!==(e=s[a+1])&&void 0!==e&&e.includes("general-conference")&&null!==(t=s[a+1])&&void 0!==t&&t.includes("session")?s[a+2]:s[a+1];o&&(0,S.c4)(o,n,i)})),E(this,"handlePanels",(function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const{addFloatingPanel:n,panels:i}=t.props;let[s={}]=i.slice(-1),a=new C.V(e.reduce(t.reducePanels,{id:"",dataPromises:[],panels:[],addFloatingPanel:n}));(null==s?void 0:s.id)===a.id&&"highlight"!==a.type||a.handle()})),E(this,"reducePanels",((e,t,n)=>{let{id:i,dataPromises:s,type:a,panels:o,addFloatingPanel:r}=e;return{id:i+t.id,addFloatingPanel:r,dataPromises:[...s,t.getData()],panels:[...o,t],type:a?"disambiguation":t.type,handle:0===n?t.handle:void 0}})),E(this,"selectActiveAnnotation",(()=>{let e=this.props.activeAnnotation;if(e){let t=e?e.highlights:[],n=this.highlightConverter.getRangeFromHighlights(t);this.setSelection(n),this.setState({activeOffsets:t,activeRange:n,activeSelection:!0}),this.props.editorPanelOpen&&this.props.addFloatingPanel({annotationId:e.id,autoFocus:"notes",id:`${e.id}-editor`,type:"editor"})}else this.selection.isCollapsed?this.clearSelectionState():this.props.editorPanelOpen&&this.props.removeEditorPanel()})),E(this,"setOffsets",(e=>this.setState({activeOffsets:e}))),E(this,"handleSelectEnd",((e,t)=>{const{activeAnnotation:n,updateHighlightOffsets:i}=this.props,s=this.highlightConverter.getHighlightFromRange(e),a=this.highlightConverter.getRangeFromHighlights(s);t?(this.props.changeActiveAnnotation(null),this.setState({notebookModalOpen:!1,tagModalOpen:!1,modalOpen:!1}),this.setSelection(a)):n&&!(0,d.qw)(s,n.highlights)?i(s).then(this.selectActiveAnnotation).catch(this.clearSelection):this.setSelection(a),this.setState({activeOffsets:s,activeRange:a,activeSelection:!0})})),E(this,"clearSelectionState",(e=>{if(this.state.modalOpen||this.props.editorPanelOpen||(this.props.changeActiveAnnotation(null),this.setState({activeOffsets:void 0,activeRange:void 0,activeSelection:!1})),e)return this.setState({modalOpen:!1,activeSelection:!1,notebookModalOpen:!1,tagModalOpen:!1}),Promise.reject(e)})),E(this,"clearSelection",(e=>{this.setSelection(document.createRange()),this.clearSelectionState(e)}));const{book:{navList:n}}=e,s=this.getActiveIndex();this.state={tableOfContentsPanelOpen:!0,activeUri:n[s],prev:n[s-1],next:n[s+1],location:{},isClient:!1,isDesktop:!1,crossLinkOverlayOpen:!1,notebookModalOpen:!1,tagModalOpen:!1,modalOpen:!1,activeSelection:!1},this.frameRef=(0,i.createRef)(),this.defaultPanelRef=(0,i.createRef)()}componentDidMount(){const{crossLinkMode:e,fromLibrary:t,history:n,location:i,notifications:s,selectI18nStringById:a}=this.props;this.tabletMediaQueryList=window.matchMedia("(min-width: 60em)"),this.desktopMediaQueryList=window.matchMedia("(min-width: 80em)"),this.tabletMediaQueryList.addEventListener("change",this.handleTabletMediaQueryList),this.desktopMediaQueryList.addEventListener("change",this.handleDesktopMediaQueryList),document.addEventListener("keydown",this.handleKeyEvents,!1),this.scrollUtils=new k.Z({history:n,defaultPanelRef:this.defaultPanelRef,crossLinkMode:e}),this.selection=window.getSelection();let o=this.tabletMediaQueryList.matches,r=this.desktopMediaQueryList.matches;this.setState({isClient:!0,isDesktop:r,isTablet:o,tableOfContentsPanelOpen:r||t.current,notificationsOpen:s&&!!s.length}),this.audioStrings={playbackSpeed:a("playbackSpeedTitle")||void 0,voice:a("voiceTitle")||void 0,voiceChangeWarning:a("voiceChangeWarningText")||void 0,continuousPlay:a("continuousPlayText")||void 0},this.fixHash=i.hash}shouldComponentUpdate(e,t){return!(0,u.xb)(e.content)}async componentDidUpdate(e,t){var n;const{activeAnnotation:i,book:{navList:s},content:a,coreContentUri:o,fromLibrary:r,history:l,loadedStyles:c,location:d,notifications:u,sidePanelActive:p}=this.props,{isClient:m,isDesktop:g,isTablet:v,tableOfContentsPanelOpen:f}=this.state,b=this.getActiveIndex();t.isClient!==m&&(this.highlightConverter=new h.Z({context:document.querySelector("[data-aid-version]"),baseUri:o})),this.fixHash&&(this.fixHash=void 0,this.scrollUtils.scrollToHash());(!g&&m&&f||!v&&m&&!f&&p)&&this.scrollUtils.scrollHeaderOffScreen();const x=i!==e.activeAnnotation,y=(null==i?void 0:i.id)!==(null===(n=e.activeAnnotation)||void 0===n?void 0:n.id);if(!x||!y&&this.props.editorPanelOpen||this.selectActiveAnnotation(),e!==this.props){let t={activeUri:s[b],next:s[b+1],prev:s[b-1],notificationsOpen:u&&!!u.length};if(e.location.pathname!==d.pathname&&"REPLACE"!==l.action){var S,k,C,j;r.current=!1;let e=(null==a||null===(S=a.content)||void 0===S||null===(k=S.head)||void 0===k||null===(C=k.links)||void 0===C||null===(j=C[0])||void 0===j?void 0:j.href)||"";c.includes(e)&&"PUSH"===d.action&&this.scrollUtils.resetScrollPosition(),t.tableOfContentsPanelOpen=g&&f}this.state.activeUri!==t.activeUri&&(t.activeOffsets=void 0,t.activeRange=void 0,t.activeSelection=!1),this.highlightConverter=new h.Z({context:document.querySelector("[data-aid-version]"),baseUri:o}),this.setState(t)}}backToKeyPress(e){"Enter"===e.key&&this.backToCollection()}setSelection(e){this.selection.removeAllRanges(),l.Z.apple.device?setTimeout((()=>this.selection.addRange(e)),0):this.selection.addRange(e)}componentWillUnmount(){this.desktopMediaQueryList.removeEventListener("change",this.handleDesktopMediaQueryList),this.tabletMediaQueryList.removeEventListener("change",this.handleTabletMediaQueryList),document.removeEventListener("keydown",this.handleKeyEvents),this.scrollUtils.cleanup(),document.body.classList.remove(s.Z.tableOfContentsPanelOpen),document.body.classList.remove(s.Z.sidePanelManagerOpen)}render(){const{activeAnnotation:e,associatedMedia:t,audio:n,content:i,crossLinkMode:a,dir:r,editorPanelOpen:l,footnotes:c,footnotesHidden:d,fromLibrary:u,getCrossRefData:h,getFootnoteData:p,history:f,lang:x,location:k,loggedIn:C,notifications:j,selectI18nStringById:P,sidePanelActive:N,template:E}=this.props;let{activeOffsets:R,activeRange:L,activeSelection:_,activeUri:q,audioPlayerOpen:V,crossLinkOverlayOpen:z,isClient:W,isDesktop:K,isTablet:G,modalOpen:Q,next:X,notebookModalOpen:Y,notificationsOpen:J,prev:ee,tableOfContentsPanelOpen:te,tagModalOpen:ne}=this.state;const ie=o()(s.Z.reader,te&&s.Z.tableOfContentsPanelOpen,N&&s.Z.sidePanelManagerOpen,!(W||u.current)&&s.Z.hideMobileTableOfContents),se=!K&&W&&te,ae=!G&&W&&!te&&N;return(0,B.jsxs)("div",{className:ie,onTransitionEnd:this.handleTransitionEnd,children:[(0,B.jsx)(y.Z,{active:se,className:s.Z.mask,onClick:()=>this.toggleTableOfContentsPanel(!1)}),(0,B.jsx)(A.Z,{activeUri:q,className:s.Z.tableOfContentsPanel,handleVirtualScroll:this.scrollUtils.handleVirtualScroll,tableOfContentsPanelOpen:te,toggleTableOfContentsPanel:this.toggleTableOfContentsPanel}),(0,B.jsxs)("div",{className:s.Z.contentArea,children:[(0,B.jsx)(M.Z,{content:i,crossLinkMode:a,toggleSidePanel:this.toggleSidePanel,toggleTableOfContentsPanel:this.toggleTableOfContentsPanel}),J&&(0,B.jsx)(w.Z,{notifications:j,onClose:()=>this.setState({notificationsOpen:!1})}),i.status&&(0,B.jsx)(v.Z,{status:i.status,className:s.Z.errorPanel,id:"readerView",...this.props}),ee&&(0,B.jsx)("span",{className:o()(s.Z.traversalLink,s.Z.prevLink),children:(0,B.jsx)(U,{className:s.Z.navButton,hiddenTitleText:P("previousButtonText"),href:ee,onClick:e=>{this.props.changeActiveAnnotation(null),(0,S.rx)(e)&&(e.preventDefault(),(0,S.c4)(ee,x,f))},size:"normal","data-testid":"previous-nav"})}),X&&(0,B.jsx)("span",{className:o()(s.Z.traversalLink,s.Z.nextLink),children:(0,B.jsx)(H,{className:s.Z.navButton,hiddenTitleText:P("nextButtonText"),href:X,onClick:e=>{this.props.changeActiveAnnotation(null),(0,S.rx)(e)&&(e.preventDefault(),(0,S.c4)(X,x,f))},size:"normal","data-testid":"next-nav"})}),W&&!a&&n&&(0,B.jsx)(D,{audio:n,buttonClassName:s.Z.button,className:s.Z.audioPlayer,handleAudioNavigation:this.handleAudioNavigation,open:V,playerClassName:s.Z.player,playerKey:q,strings:this.audioStrings,togglePlayer:this.toggleAudioPlayer}),i.content&&(0,B.jsx)("div",{className:s.Z.contentWrapper,children:(0,B.jsxs)(b.Z,{anAnnotationEditorOpen:Q||l,associatedMedia:t,className:o()(R&&e&&s.Z.hideSelection),crossLinkMode:a,data:i,defaultPanelRef:this.defaultPanelRef,disambiguate:this.disambiguate,footnotes:c,footnotesHidden:d,frameRef:this.frameRef,getCrossRefData:h,getFootnoteData:p,id:"content",lang:x,location:k,loggedIn:C,onSelectEnd:this.handleSelectEnd,onSelectClear:this.clearSelection,onDragStart:this.setOffsets,range:L,selectActiveAnnotation:this.selectActiveAnnotation,template:E,children:[!a&&(0,B.jsx)(m.Z,{activeSelection:_,activeUri:q,clearSelection:this.clearSelection,editorPanelOpen:l,modalOpen:Q,offsets:R,openCrossLinkOverlay:this.toggleModal("CrossLinkOverlay"),openNotebookModal:this.toggleModal("NotebookModal"),openTagModal:this.toggleModal("TagModal"),range:L}),W&&ne&&(0,B.jsx)(g.Z,{container:this.frameRef.current,onClose:this.toggleModal("TagModal"),onSave:this.toggleModal("TagModal"),open:ne,range:L}),W&&Y&&(0,B.jsx)(I.Z,{container:this.frameRef.current,onClose:this.toggleModal("NotebookModal"),onSave:this.toggleModal("NotebookModal"),open:Y,range:L})]})}),(0,B.jsxs)("div",{className:s.Z.mobileNav,children:[(0,B.jsx)(S.ZP,{to:ee,className:o()(s.Z.mobileIcon,s.Z.mobilePrev),children:(0,B.jsx)(F,{dir:r,className:s.Z.navButton,hiddenTitleText:P("previousButtonText"),onClick:()=>this.props.changeActiveAnnotation(null),"data-testid":"previous-nav-mobile"})}),(0,B.jsx)(S.ZP,{to:X,className:o()(s.Z.mobileIcon,s.Z.mobileNext),children:(0,B.jsx)($,{dir:r,className:s.Z.navButton,hiddenTitleText:P("nextButtonText"),onClick:()=>this.props.changeActiveAnnotation(null),"data-testid":"previous-nav-mobile"})})]}),!a&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(y.Z,{active:ae,className:o()(s.Z.mask,s.Z.sidePanelMask),onClick:()=>this.toggleSidePanel("")}),(0,B.jsx)(Z.Z,{associatedMedia:t,className:s.Z.sidePanelManager,sidePanelBottomBufferClassName:s.Z.sidePanelBottomBuffer,defaultPanelRef:this.defaultPanelRef,disambiguate:this.disambiguate,handleVirtualScroll:this.scrollUtils.handleVirtualScroll,openCrossLinkOverlay:this.toggleModal("CrossLinkOverlay"),page:"reader"})]})]}),W&&z&&!a&&(0,B.jsx)(T.Z,{offsets:R,onClose:this.toggleModal("CrossLinkOverlay")}),(0,B.jsx)(O.Z,{})]})}}E(_,"defaultProps",{content:{meta:{}},location:{pathname:""},panels:[]});const q=_},88579:(e,t,n)=>{"use strict";n.d(t,{u:()=>c,i:()=>d});const i="modalNoHeader-BwHA3",s="modal-v1MH7";var a=n(94184),o=n.n(a),r=n(46506),l=n(85893);const c=e=>{let{className:t,...n}=e;return(0,l.jsx)(r.Z,{className:o()(t,s),...n})},d=e=>{let{className:t,...n}=e;return(0,l.jsx)(r.Z,{className:o()(t,i),...n})}},85691:(e,t,n)=>{"use strict";n.d(t,{ZO:()=>p,M5:()=>m,FR:()=>g,ML:()=>g});var i=n(67294);const s="actionable-CciB3",a="dismissible-O2wKb",o="combo-JgXP4";var r=n(94184),l=n.n(r),c=n(98917),d=n(92175),u=n(95634),h=n(85893);const p=(0,i.forwardRef)(((e,t)=>{let{className:n,selected:i,...a}=e;return(0,h.jsx)(c.Z,{"aria-selected":i?"true":"false",className:l()(n,s),...a,ref:t,selected:i})})),m=(0,i.forwardRef)(((e,t)=>{let{className:n,selected:i,...s}=e;return(0,h.jsx)(d.Z,{"aria-selected":i?"true":"false",className:l()(n,o),...s,ref:t,selected:i})})),g=(0,i.forwardRef)(((e,t)=>{let{className:n,selected:i,...s}=e;return(0,h.jsx)(u.C,{"aria-selected":i?"true":"false",className:l()(n,a),...s,ref:t,selected:i})}))},48844:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var i=/iPhone/i,s=/iPod/i,a=/iPad/i,o=/\biOS-universal(?:.+)Mac\b/i,r=/\bAndroid(?:.+)Mobile\b/i,l=/Android/i,c=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,d=/Silk/i,u=/Windows Phone/i,h=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,m=/BB10/i,g=/Opera Mini/i,v=/\b(CriOS|Chrome)(?:.+)Mobile/i,f=/Mobile(?:.+)Firefox\b/i,b=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};var x=n(76276);let y=function(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=t.userAgent,x=n.split("[FBAN");void 0!==x[1]&&(n=x[0]),void 0!==(x=n.split("Twitter"))[1]&&(n=x[0]);var y=function(e){return function(t){return t.test(e)}}(n),S={apple:{phone:y(i)&&!y(u),ipod:y(s),tablet:!y(i)&&(y(a)||b(t))&&!y(u),universal:y(o),device:(y(i)||y(s)||y(a)||y(o)||b(t))&&!y(u)},amazon:{phone:y(c),tablet:!y(c)&&y(d),device:y(c)||y(d)},android:{phone:!y(u)&&y(c)||!y(u)&&y(r),tablet:!y(u)&&!y(c)&&!y(r)&&(y(d)||y(l)),device:!y(u)&&(y(c)||y(d)||y(r)||y(l))||y(/\bokhttp\b/i)},windows:{phone:y(u),tablet:y(h),device:y(u)||y(h)},other:{blackberry:y(p),blackberry10:y(m),opera:y(g),firefox:y(f),chrome:y(v),device:y(p)||y(m)||y(g)||y(f)||y(v)},any:!1,phone:!1,tablet:!1};return S.any=S.apple.device||S.android.device||S.windows.device||S.other.device,S.phone=S.apple.phone||S.android.phone||S.windows.phone,S.tablet=S.apple.tablet||S.android.tablet||S.windows.tablet,S}();x.ZP&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&(y.any=!0,y.tablet=!0,y.apple=Object.assign(y.apple,{device:!0,tablet:!0}));const S=y},50097:(e,t,n)=>{"use strict";function i(e,t){return e.pid-t.pid}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e=e.sort(i),t=t.sort(i),e.length===t.length&&e.every(((e,n)=>e.pid===t[n].pid&&parseInt(e.startOffset,10)===parseInt(t[n].startOffset,10)&&parseInt(e.endOffset,10)===parseInt(t[n].endOffset,10)))}function a(e,t){return Object.values(e).filter((e=>{let{highlights:n}=e;return s(n,t)}))}n.d(t,{fG:()=>a,qw:()=>s})},73431:e=>{var t=.1,n="function"==typeof Float32Array;function i(e,t){return 1-3*t+3*e}function s(e,t){return 3*t-6*e}function a(e){return 3*e}function o(e,t,n){return((i(t,n)*e+s(t,n))*e+a(t))*e}function r(e,t,n){return 3*i(t,n)*e*e+2*s(t,n)*e+a(t)}function l(e){return e}e.exports=function(e,i,s,a){if(!(0<=e&&e<=1&&0<=s&&s<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===i&&s===a)return l;for(var c=n?new Float32Array(11):new Array(11),d=0;d<11;++d)c[d]=o(d*t,e,s);function u(n){for(var i=0,a=1;10!==a&&c[a]<=n;++a)i+=t;--a;var l=i+(n-c[a])/(c[a+1]-c[a])*t,d=r(l,e,s);return d>=.001?function(e,t,n,i){for(var s=0;s<4;++s){var a=r(t,n,i);if(0===a)return t;t-=(o(t,n,i)-e)/a}return t}(n,l,e,s):0===d?l:function(e,t,n,i,s){var a,r,l=0;do{(a=o(r=t+(n-t)/2,i,s)-e)>0?n=r:t=r}while(Math.abs(a)>1e-7&&++l<10);return r}(n,i,i+t,e,s)}return function(e){return 0===e?0:1===e?1:o(u(e),i,a)}}},79396:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={renderFrame:"renderFrame-hnHZX",archivedAlert:"archivedAlert-cJHZ8"}},95715:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={activeVerse:"activeVerse-B3mHQ",reader:"reader-qGQ4p",mask:"mask-bxOrm",sidePanelMask:"sidePanelMask-oPCwY",contentArea:"contentArea-xpA9g",contentWrapper:"contentWrapper-n6Z8K",hideSelection:"hideSelection-bJ7Sk",traversalLink:"traversalLink-JrW0G",nextLink:"nextLink-otfJl",prevLink:"prevLink-c6tNM",audioPlayer:"audioPlayer-PRRDV",button:"button-UZL8g",player:"player-s3kza",mobileNav:"mobileNav-N3fXJ",mobileIcon:"mobileIcon-Pak4h",mobilePrev:"mobilePrev-c9ni_",mobileNext:"mobileNext-ARZIt",navButton:"navButton-ESfiE",printIcon:"printIcon-JZpI4",tableOfContentsPanel:"tableOfContentsPanel-qvxa4",sidePanelManager:"sidePanelManager-lVqUx",tableOfContentsPanelOpen:"tableOfContentsPanelOpen-UXVpC",hideMobileTableOfContents:"hideMobileTableOfContents-JHowz",sidePanelManagerOpen:"sidePanelManagerOpen-CxW9C",iconGroupStart:"iconGroupStart-TSv6t",contentTitle:"contentTitle-xBZ8n",locked:"locked-Hr5It",drawerWrapperWrapper:"drawerWrapperWrapper-ZSb6I",icon:"icon-v82fI",loadingScreen:"loadingScreen-PGzw8",narrowReader:"narrowReader-fjjP4",sidePanelBottomBuffer:"sidePanelBottomBuffer-BUv5Z"}},27274:function(e,t){var n,i,s;i=[],void 0===(s="function"==typeof(n=function(){function e(e){var t=getComputedStyle(e,null).getPropertyValue("overflow");return t.indexOf("scroll")>-1||t.indexOf("auto")>-1}function t(t){if(t instanceof HTMLElement||t instanceof SVGElement){for(var n=t.parentNode;n.parentNode;){if(e(n))return n;n=n.parentNode}return document.scrollingElement||document.documentElement}}return t})?n.apply(t,i):n)||(e.exports=s)}}]);
//# sourceMappingURL=reader.847c1b508be992ce0669.bundle.js.map